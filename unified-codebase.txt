CV LANDING PAGE GENERATOR - UNIFIED CODEBASE
Generated: 07/24/2025 17:22:20
Project Root: C:\Coding\cv-landing-generator
========================================

=====================================
DIRECTORY: .
PATH: C:\Coding\cv-landing-generator\.
=====================================

--------------------------------------------------------------------------------
FILE: server.js
SIZE: 3204 bytes (3.1 KB)
--------------------------------------------------------------------------------
// File: server.js
const express = require('express');
const cors = require('cors');
const path = require('path');
require('dotenv').config();

const app = express();
const PORT = 3000;

// Validate required environment variables
if (!process.env.GEMINI_API_KEY) {
    console.error('ERROR: GEMINI_API_KEY is required for CV processing');
    process.exit(1);
}

if (!process.env.JWT_SECRET) {
    console.error('ERROR: JWT_SECRET is required for authentication');
    process.exit(1);
}

// Global middleware
app.use(cors());
app.use(express.json({ limit: '50mb' }));
app.use(express.urlencoded({ limit: '50mb', extended: true }));

// Create required directories
const uploadsDir = path.join(__dirname, 'uploads');
const generatedDir = path.join(__dirname, 'generated');
const fs = require('fs');

if (!fs.existsSync(uploadsDir)) {
    fs.mkdirSync(uploadsDir, { recursive: true });
}
if (!fs.existsSync(generatedDir)) {
    fs.mkdirSync(generatedDir, { recursive: true });
}

// Import route modules
const healthRoutes = require('./routes/health');
const authRoutes = require('./routes/auth');
const cvRoutes = require('./routes/cv');
const sitesRouter = require('./routes/sites');
const githubRouter = require('./routes/github');

// Mount routes
app.use('/api', healthRoutes);
app.use('/api/auth', authRoutes);
app.use('/api/cv', cvRoutes);
app.use('/api/sites', sitesRouter);
app.use('/api/github', githubRouter);

// Error handling middleware
app.use((error, req, res, next) => {
    console.error('Global error handler:', error);
    
    if (error.type === 'entity.too.large') {
        return res.status(413).json({
            error: 'File too large',
            message: 'File size exceeds the 50MB limit'
        });
    }
    
    res.status(500).json({
        error: 'Internal server error',
        message: process.env.NODE_ENV === 'production' ? 'Something went wrong' : error.message
    });
});

// 404 handler
app.use('*', (req, res) => {
    res.status(404).json({
        error: 'Not found',
        message: `Route ${req.method} ${req.originalUrl} not found`
    });
});

// Start server
app.listen(PORT, () => {
    console.log(`=================================`);
    console.log(`CV Landing Generator API Server`);
    console.log(`=================================`);
    console.log(`Server: http://localhost:${PORT}`);
    console.log(`Health: http://localhost:${PORT}/api/health`);
    console.log(`Upload: POST http://localhost:${PORT}/api/cv/upload`);
    console.log(`Process: POST http://localhost:${PORT}/api/cv/process`);
    console.log(`Generate: POST http://localhost:${PORT}/api/cv/generate`);
    console.log(`Preview: GET http://localhost:${PORT}/api/cv/preview`);
    console.log(`Download: GET http://localhost:${PORT}/api/cv/download`);
    console.log(`=================================`);
    console.log(`Gemini API: ${process.env.GEMINI_API_KEY ? '✓ Configured' : '✗ Missing'}`);
    console.log(`JWT Secret: ${process.env.JWT_SECRET ? '✓ Configured' : '✗ Missing'}`);
    console.log(`=================================`);
});

module.exports = app;

[END OF FILE: server.js]

--------------------------------------------------------------------------------
FILE: test-llm-clients.js
SIZE: 13134 bytes (12.8 KB)
--------------------------------------------------------------------------------
// File: test-processors-individually.js
// Test each CV processor individually with a local CV file

require('dotenv').config();
const fs = require('fs');
const path = require('path');
const pdfParse = require('pdf-parse');
const mammoth = require('mammoth');

// Import all processors
const PersonalInfoProcessor = require('./lib/cv-processors/personal-info-processor');
const AboutMeProcessor = require('./lib/cv-processors/about-me-processor');
const ExperienceProcessor = require('./lib/cv-processors/experience-processor');
const SkillsProcessor = require('./lib/cv-processors/skills-processor');
const EducationProcessor = require('./lib/cv-processors/education-processor');
const ProjectsProcessor = require('./lib/cv-processors/projects-processor');
const CertificationsProcessor = require('./lib/cv-processors/certifications-processor');
const TextCleaner = require('./lib/utils/text-cleaner');

async function testProcessorsIndividually(cvFilePath) {
    console.log('=== Individual Processor Testing ===');
    console.log(`Testing with CV file: ${cvFilePath}`);
    
    // Check if file exists
    if (!fs.existsSync(cvFilePath)) {
        console.error(`File not found: ${cvFilePath}`);
        console.log('\nUsage: node test-processors-individually.js path/to/your/cv.pdf');
        process.exit(1);
    }
    
    try {
        // Step 1: Extract text from CV file
        console.log('\n=== Step 1: Extract Text ===');
        const extractedText = await extractTextFromFile(cvFilePath);
        console.log(`Extracted ${extractedText.length} characters`);
        console.log('Text preview:', extractedText.substring(0, 200) + '...\n');
        
        // Clean text for processing
        const cleanedText = TextCleaner.prepareForAI(extractedText);
        console.log(`Cleaned text: ${cleanedText.length} characters`);
        
        // LLM Configuration for all processors
        const llmConfig = {
            type: 'ollama',
            model: 'mistral'
        };
        
        console.log(`Using LLM: ${llmConfig.type} with model: ${llmConfig.model}\n`);
        
        // Initialize all processors (just like your main code)
        console.log('=== Initializing Processors ===');
        const personalInfoProcessor = new PersonalInfoProcessor(llmConfig);
        const aboutMeProcessor = new AboutMeProcessor(llmConfig);
        const experienceProcessor = new ExperienceProcessor(llmConfig);
        const skillsProcessor = new SkillsProcessor(llmConfig);
        const educationProcessor = new EducationProcessor(llmConfig);
        const projectsProcessor = new ProjectsProcessor(llmConfig);
        const certificationsProcessor = new CertificationsProcessor(llmConfig);
        
        console.log('All processors initialized\n');
        
        // Store results
        const results = {};
        
        // Test each processor individually
        console.log('=== Testing PersonalInfoProcessor ===');
        try {
            const personalResult = await personalInfoProcessor.process(cleanedText);
            results.personalInfo = personalResult.personalInfo;
            displayPersonalInfo(personalResult.personalInfo);
        } catch (error) {
            console.error('PersonalInfoProcessor failed:', error.message);
            results.personalInfo = null;
        }
        
        console.log('\n=== Testing AboutMeProcessor ===');
        try {
            const aboutResult = await aboutMeProcessor.process(cleanedText, results);
            results.aboutData = aboutResult.aboutData;
            displayAboutMe(aboutResult.aboutData);
        } catch (error) {
            console.error('AboutMeProcessor failed:', error.message);
            results.aboutData = null;
        }
        
        console.log('\n=== Testing ExperienceProcessor ===');
        try {
            const experienceResult = await experienceProcessor.process(cleanedText, results);
            results.experience = experienceResult.experience;
            displayExperience(experienceResult.experience);
        } catch (error) {
            console.error('ExperienceProcessor failed:', error.message);
            results.experience = null;
        }
        
        console.log('\n=== Testing SkillsProcessor ===');
        try {
            const skillsResult = await skillsProcessor.process(cleanedText, results);
            results.skills = skillsResult.skills;
            displaySkills(skillsResult.skills);
        } catch (error) {
            console.error('SkillsProcessor failed:', error.message);
            results.skills = null;
        }
        
        console.log('\n=== Testing EducationProcessor ===');
        try {
            const educationResult = await educationProcessor.process(cleanedText, results);
            results.education = educationResult.education;
            displayEducation(educationResult.education);
        } catch (error) {
            console.error('EducationProcessor failed:', error.message);
            results.education = null;
        }
        
        console.log('\n=== Testing ProjectsProcessor ===');
        try {
            const projectsResult = await projectsProcessor.process(cleanedText, results);
            results.projects = projectsResult.projects;
            displayProjects(projectsResult.projects);
        } catch (error) {
            console.error('ProjectsProcessor failed:', error.message);
            results.projects = null;
        }
        
        console.log('\n=== Testing CertificationsProcessor ===');
        try {
            const certificationsResult = await certificationsProcessor.process(cleanedText, results);
            results.certifications = certificationsResult.certifications;
            displayCertifications(certificationsResult.certifications);
        } catch (error) {
            console.error('CertificationsProcessor failed:', error.message);
            results.certifications = null;
        }
        
        // Summary
        console.log('\n=== Test Summary ===');
        displayTestSummary(results);
        
        return results;
        
    } catch (error) {
        console.error('Test failed:', error.message);
        console.error('Stack:', error.stack);
        process.exit(1);
    }
}

async function extractTextFromFile(filePath) {
    const fileExtension = path.extname(filePath).toLowerCase();
    
    switch (fileExtension) {
        case '.pdf':
            console.log('Extracting from PDF...');
            const dataBuffer = fs.readFileSync(filePath);
            const data = await pdfParse(dataBuffer);
            return data.text;
            
        case '.doc':
        case '.docx':
            console.log('Extracting from Word document...');
            const result = await mammoth.extractRawText({ path: filePath });
            return result.value;
            
        default:
            throw new Error(`Unsupported file type: ${fileExtension}`);
    }
}

function displayPersonalInfo(personalInfo) {
    if (!personalInfo) {
        console.log('❌ No personal info extracted');
        return;
    }
    
    console.log('✅ Personal Information:');
    console.log(`  Name: "${personalInfo.name}"`);
    console.log(`  Email: "${personalInfo.email}"`);
    console.log(`  Phone: "${personalInfo.phone}"`);
    console.log(`  Location: "${personalInfo.location}"`);
    console.log(`  Current Title: "${personalInfo.currentTitle}"`);
}

function displayAboutMe(aboutData) {
    if (!aboutData) {
        console.log('❌ No about me data generated');
        return;
    }
    
    console.log('✅ About Me Content:');
    console.log(`  Summary (${aboutData.summary?.length || 0} chars): "${aboutData.summary?.substring(0, 100)}..."`);
    console.log(`  About Me (${aboutData.aboutMe?.length || 0} chars): "${aboutData.aboutMe?.substring(0, 100)}..."`);
}

function displayExperience(experience) {
    if (!experience || experience.length === 0) {
        console.log('❌ No work experience extracted');
        return;
    }
    
    console.log(`✅ Work Experience (${experience.length} entries):`);
    experience.forEach((exp, index) => {
        console.log(`  ${index + 1}. ${exp.title} at ${exp.company}`);
        console.log(`     Location: ${exp.location}`);
        console.log(`     Duration: ${exp.startDate} - ${exp.endDate}`);
        console.log(`     Description: "${exp.description?.substring(0, 80)}..."`);
        console.log(`     Achievements: ${exp.achievements?.length || 0} items`);
    });
}

function displaySkills(skills) {
    if (!skills) {
        console.log('❌ No skills extracted');
        return;
    }
    
    console.log('✅ Skills:');
    console.log(`  Technical (${skills.technical?.length || 0}): [${skills.technical?.slice(0, 5).join(', ')}${skills.technical?.length > 5 ? '...' : ''}]`);
    console.log(`  Soft (${skills.soft?.length || 0}): [${skills.soft?.slice(0, 5).join(', ')}${skills.soft?.length > 5 ? '...' : ''}]`);
    console.log(`  Languages (${skills.languages?.length || 0}): [${skills.languages?.join(', ')}]`);
}

function displayEducation(education) {
    if (!education || education.length === 0) {
        console.log('❌ No education extracted');
        return;
    }
    
    console.log(`✅ Education (${education.length} entries):`);
    education.forEach((edu, index) => {
        console.log(`  ${index + 1}. ${edu.degree} from ${edu.institution}`);
        console.log(`     Location: ${edu.location}`);
        console.log(`     Graduation: ${edu.graduationDate}`);
        if (edu.gpa) console.log(`     GPA: ${edu.gpa}`);
        console.log(`     Achievements: ${edu.achievements?.length || 0} items`);
    });
}

function displayProjects(projects) {
    if (!projects || projects.length === 0) {
        console.log('❌ No projects extracted');
        return;
    }
    
    console.log(`✅ Projects (${projects.length} entries):`);
    projects.forEach((proj, index) => {
        console.log(`  ${index + 1}. ${proj.name}`);
        console.log(`     Description: "${proj.description?.substring(0, 80)}..."`);
        console.log(`     Technologies: [${proj.technologies?.join(', ')}]`);
        if (proj.url) console.log(`     URL: ${proj.url}`);
    });
}

function displayCertifications(certifications) {
    if (!certifications || certifications.length === 0) {
        console.log('❌ No certifications extracted');
        return;
    }
    
    console.log(`✅ Certifications (${certifications.length} entries):`);
    certifications.forEach((cert, index) => {
        console.log(`  ${index + 1}. ${cert.name}`);
        console.log(`     Issuer: ${cert.issuer}`);
        console.log(`     Date: ${cert.date}`);
        console.log(`     Type: ${cert.type}`);
        if (cert.url) console.log(`     URL/ID: ${cert.url}`);
        if (cert.description) console.log(`     Description: "${cert.description?.substring(0, 80)}..."`);
    });
}

function displayTestSummary(results) {
    const sections = [
        { name: 'Personal Info', data: results.personalInfo, key: 'name' },
        { name: 'About Me', data: results.aboutData, key: 'summary' },
        { name: 'Experience', data: results.experience, key: 'length' },
        { name: 'Skills', data: results.skills, key: 'technical' },
        { name: 'Education', data: results.education, key: 'length' },
        { name: 'Projects', data: results.projects, key: 'length' },
        { name: 'Certifications', data: results.certifications, key: 'length' }
    ];
    
    console.log('Processor Results:');
    sections.forEach(section => {
        const status = section.data ? '✅ PASS' : '❌ FAIL';
        console.log(`  ${section.name}: ${status}`);
    });
    
    const passedCount = sections.filter(s => s.data).length;
    console.log(`\nOverall: ${passedCount}/${sections.length} processors succeeded`);
    
    if (passedCount === sections.length) {
        console.log('🎉 All processors working correctly with Mistral!');
    } else {
        console.log('⚠️  Some processors failed - check the errors above');
    }
}

// Command line usage
async function main() {
    const args = process.argv.slice(2);
    
    if (args.length === 0) {
        console.log('Usage: node test-processors-individually.js <path-to-cv-file>');
        console.log('');
        console.log('Examples:');
        console.log('  node test-processors-individually.js "C:\\Users\\YourName\\Documents\\cv.pdf"');
        console.log('  node test-processors-individually.js "./your-cv.pdf"');
        console.log('  node test-processors-individually.js "/path/to/your/cv.docx"');
        process.exit(1);
    }
    
    const cvFilePath = args[0];
    await testProcessorsIndividually(cvFilePath);
}

if (require.main === module) {
    main();
}

[END OF FILE: test-llm-clients.js]

--------------------------------------------------------------------------------
FILE: package.json
SIZE: 969 bytes (0.9 KB)
--------------------------------------------------------------------------------
{
  "name": "cv-landing-generator",
  "version": "1.0.0",
  "scripts": {
    "dev": "concurrently \"npm run dev:api\" \"npm run dev:frontend\"",
    "dev:frontend": "cd frontend && ng serve",
    "dev:api": "node server.js",
    "build": "cd frontend && ng build",
    "test:llm": "node test-llm-clients.js",
    "test:gemini": "node test-llm-clients.js gemini",
    "test:ollama": "node test-llm-clients.js ollama",
    "db:init": "node scripts/init-database.js"
  },
  "dependencies": {
    "@google/generative-ai": "^0.24.1",
    "archiver": "^7.0.1",
    "cors": "^2.8.5",
    "dotenv": "^17.0.1",
    "express": "^4.21.2",
    "google-auth-library": "^10.1.0",
    "jsonwebtoken": "^9.0.2",
    "mammoth": "^1.9.1",
    "multer": "^2.0.1",
    "mysql2": "^3.14.2",
    "node-fetch": "^3.3.2",
    "pdf-parse": "^1.1.1",
    "pg": "^8.16.3"
  },
  "devDependencies": {
    "@types/pg": "^8.15.4",
    "concurrently": "^8.2.0"
  }
}

[END OF FILE: package.json]

--------------------------------------------------------------------------------
FILE: .env.example
SIZE: 937 bytes (0.9 KB)
--------------------------------------------------------------------------------
# File: .env.example

# LLM Client Configuration
LLM_CLIENT_TYPE=gemini

# Google OAuth Configuration
GOOGLE_CLIENT_ID=your_google_client_id_here
GOOGLE_CLIENT_SECRET=your_google_client_secret_here
JWT_SECRET=your_super_secret_jwt_key_here_make_it_long_and_random

# GitHub OAuth Configuration (NEW - for deployment)
GITHUB_CLIENT_ID=your_github_client_id
GITHUB_CLIENT_SECRET=your_github_client_secret
GITHUB_REDIRECT_URI=http://localhost:3000/api/github/callback

# Gemini AI Configuration
GEMINI_API_KEY=your_gemini_api_key_here

# Database Configuration (Supabase PostgreSQL)
DATABASE_URL="postgresql://username:password@host/cv-landing-generator?ssl={\"rejectUnauthorized\":true}"

# Encryption for sensitive data
ENCRYPTION_KEY=your_32_character_encryption_key_here

# Development URLs
FRONTEND_URL=http://localhost:4200
API_URL=http://localhost:3000

# Optional: Vercel Integration (for future)
VERCEL_TOKEN=your_vercel_token_here

[END OF FILE: .env.example]

--------------------------------------------------------------------------------
FILE: .gitignore
SIZE: 2426 bytes (2.4 KB)
--------------------------------------------------------------------------------
# Node.js dependencies
node_modules/
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# Angular build outputs
frontend/dist/
frontend/tmp/
frontend/out-tsc/

# Environment variables
.env
.env.local
.env.development.local
.env.test.local
.env.production.local

# Logs
logs
*.log
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# Runtime data
pids
*.pid
*.seed
*.pid.lock

# Coverage directory used by tools like istanbul
coverage/
*.lcov

# nyc test coverage
.nyc_output

# Dependency directories
node_modules/
jspm_packages/

# Optional npm cache directory
.npm

# Optional REPL history
.node_repl_history

# Output of 'npm pack'
*.tgz

# Yarn Integrity file
.yarn-integrity

# dotenv environment variables file
.env

# parcel-bundler cache (https://parceljs.org/)
.cache
.parcel-cache

# next.js build output
.next

# nuxt.js build output
.nuxt

# vuepress build output
.vuepress/dist

# Serverless directories
.serverless

# FuseBox cache
.fusebox/

# DynamoDB Local files
.dynamodb/

# TernJS port file
.tern-port

# Uploaded files (temporary storage)
uploads/
temp/
generated/
*.pdf
*.doc
*.docx
*.jpg
*.jpeg
*.png
*.gif

# IDE and editor files
.vscode/
.idea/
*.swp
*.swo
*~

# OS generated files
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
ehthumbs.db
Thumbs.db

# Windows
*.lnk

# Angular specific
frontend/.angular/
frontend/e2e/
frontend/*.log

# Testing
coverage/
karma-debug.log

# Vercel
.vercel

# Database files (if using SQLite)
*.db
*.sqlite
*.sqlite3

# Backup files
*.bak
*.backup

# Package lock files (choose one)
# package-lock.json  # Uncomment if using yarn
# yarn.lock          # Uncomment if using npm

# Build artifacts
build/
dist/

# Generated documentation
docs/

# Firebase (if added later)
.firebase/
.firebaserc
firebase-debug.log

# GitHub integration tokens (sensitive)
github-tokens/
oauth-tokens/

# CV processing temporary files
cv-processing-temp/
extracted-text/

# Profile pictures temporary storage
profile-pics-temp/

# AI processing cache
gemini-cache/
ai-responses/

# Template generation temporary files
template-temp/
landing-page-temp/

# Production secrets
secrets/
private-keys/
certificates/

# Analytics and monitoring
analytics/
monitoring/

# Backup configurations
*.conf.bak
*.config.bak

[END OF FILE: .gitignore]

=====================================
DIRECTORY: frontend
PATH: C:\Coding\cv-landing-generator\frontend
=====================================

--------------------------------------------------------------------------------
FILE: frontend\src\main.ts
SIZE: 586 bytes (0.6 KB)
--------------------------------------------------------------------------------
import { bootstrapApplication } from '@angular/platform-browser';
import { appConfig } from './app/app.config';
import { AppComponent } from './app/app';
import { provideRouter } from '@angular/router';
import { provideHttpClient } from '@angular/common/http';
import { routes } from './app/app.routes';

const updatedAppConfig = {
  ...appConfig,
  providers: [
    ...appConfig.providers,
    provideRouter(routes),
    provideHttpClient() // Add HTTP client provider
  ]
};

bootstrapApplication(AppComponent, updatedAppConfig)
  .catch((err) => console.error(err));

[END OF FILE: frontend\src\main.ts]

--------------------------------------------------------------------------------
FILE: frontend\src\app\app.config.ts
SIZE: 412 bytes (0.4 KB)
--------------------------------------------------------------------------------
import { ApplicationConfig, provideBrowserGlobalErrorListeners, provideZoneChangeDetection } from '@angular/core';
import { provideRouter } from '@angular/router';

import { routes } from './app.routes';

export const appConfig: ApplicationConfig = {
  providers: [
    provideBrowserGlobalErrorListeners(),
    provideZoneChangeDetection({ eventCoalescing: true }),
    provideRouter(routes)
  ]
};

[END OF FILE: frontend\src\app\app.config.ts]

--------------------------------------------------------------------------------
FILE: frontend\src\app\app.routes.ts
SIZE: 1043 bytes (1 KB)
--------------------------------------------------------------------------------
// frontend/src/app/app.routes.ts
import { Routes } from '@angular/router';

export const routes: Routes = [
  {
    path: '',
    redirectTo: '/home',
    pathMatch: 'full'
  },
  {
    path: 'home',
    loadComponent: () => import('./pages/home/home.component').then(m => m.HomeComponent)
  },
  {
    path: 'login',
    loadComponent: () => import('./components/login/login.component').then(m => m.LoginComponent)
  },
  {
    path: 'dashboard',
    loadComponent: () => import('./pages/dashboard/dashboard.component').then(m => m.DashboardComponent)
  },
  {
    path: 'upload',
    loadComponent: () => import('./pages/upload/upload.component').then(m => m.UploadComponent)
  },
  {
    path: 'test',
    loadComponent: () => import('./components/api-test/api-test.component').then(m => m.ApiTestComponent)
  },
  {
    path: 'github-test',
    loadComponent: () => import('./components/github-test/github-test').then(m => m.GithubTestComponent)
  },
  {
    path: '**',
    redirectTo: '/home'
  }
];

[END OF FILE: frontend\src\app\app.routes.ts]

--------------------------------------------------------------------------------
FILE: frontend\src\app\app.spec.ts
SIZE: 689 bytes (0.7 KB)
--------------------------------------------------------------------------------
import { TestBed } from '@angular/core/testing';
import { App } from './app';

describe('App', () => {
  beforeEach(async () => {
    await TestBed.configureTestingModule({
      imports: [App],
    }).compileComponents();
  });

  it('should create the app', () => {
    const fixture = TestBed.createComponent(App);
    const app = fixture.componentInstance;
    expect(app).toBeTruthy();
  });

  it('should render title', () => {
    const fixture = TestBed.createComponent(App);
    fixture.detectChanges();
    const compiled = fixture.nativeElement as HTMLElement;
    expect(compiled.querySelector('h1')?.textContent).toContain('Hello, frontend');
  });
});

[END OF FILE: frontend\src\app\app.spec.ts]

--------------------------------------------------------------------------------
FILE: frontend\src\app\app.ts
SIZE: 864 bytes (0.8 KB)
--------------------------------------------------------------------------------
// File: frontend/src/app/app.ts
import { Component } from '@angular/core';
import { RouterOutlet } from '@angular/router';
import { HeaderComponent } from './components/header/header.component';
import { FooterComponent } from './components/footer/footer.component';

@Component({
  selector: 'app-root',
  standalone: true,
  imports: [RouterOutlet, HeaderComponent, FooterComponent],
  template: `
    <div class="min-h-screen flex flex-col bg-gradient-to-br from-gray-50 via-white to-blue-50">
      <app-header></app-header>
      <main class="flex-1">
        <router-outlet></router-outlet>
      </main>
      <app-footer></app-footer>
    </div>
  `,
  styles: [`
    :host {
      display: block;
      min-height: 100vh;
    }
  `]
})
export class AppComponent {
  title = 'CVLanding - Professional Landing Page Generator';
}

[END OF FILE: frontend\src\app\app.ts]

--------------------------------------------------------------------------------
FILE: frontend\src\app\components\api-test\api-test.component.ts
SIZE: 4470 bytes (4.4 KB)
--------------------------------------------------------------------------------
import { Component, OnInit } from '@angular/core';
import { CommonModule } from '@angular/common';
import { ApiService, HealthResponse, TestResponse } from '../../services/api.service';

@Component({
  selector: 'app-api-test',
  standalone: true,
  imports: [CommonModule],
  template: `
    <div class="container mx-auto px-4 py-8">
      <div class="card max-w-2xl mx-auto">
        <h2 class="text-2xl font-bold text-gray-900 mb-6">API Connection Test</h2>
        
        <!-- Health Check -->
        <div class="mb-6">
          <div class="flex items-center justify-between mb-3">
            <h3 class="text-lg font-semibold text-gray-900">Health Check</h3>
            <button (click)="testHealth()" 
                    [disabled]="loading"
                    class="btn-primary text-sm">
              {{ loading ? 'Testing...' : 'Test Health' }}
            </button>
          </div>
          
          <div *ngIf="healthResult" class="bg-gray-50 rounded-lg p-4">
            <div class="flex items-center mb-2">
              <div [class]="healthResult.status === 'healthy' ? 'w-3 h-3 bg-green-500 rounded-full mr-2' : 'w-3 h-3 bg-red-500 rounded-full mr-2'"></div>
              <span class="font-medium">{{ healthResult.status }}</span>
            </div>
            <p class="text-sm text-gray-600">{{ healthResult.message }}</p>
            <p class="text-xs text-gray-500 mt-1">{{ healthResult.timestamp }}</p>
          </div>
        </div>

        <!-- API Tests -->
        <div class="mb-6">
          <div class="flex items-center justify-between mb-3">
            <h3 class="text-lg font-semibold text-gray-900">API Tests</h3>
            <div class="space-x-2">
              <button (click)="testGetRequest()" 
                      [disabled]="loading"
                      class="btn-secondary text-sm">
                Test GET
              </button>
              <button (click)="testPostRequest()" 
                      [disabled]="loading"
                      class="btn-primary text-sm">
                Test POST
              </button>
            </div>
          </div>
          
          <div *ngIf="testResult" class="bg-gray-50 rounded-lg p-4">
            <pre class="text-sm text-gray-700 whitespace-pre-wrap">{{ formatJson(testResult) }}</pre>
          </div>
        </div>

        <!-- Error Display -->
        <div *ngIf="error" class="bg-red-50 border border-red-200 rounded-lg p-4">
          <div class="flex items-center">
            <span class="text-red-800 font-medium">Error: </span>
          </div>
          <p class="text-red-700 text-sm mt-1">{{ error }}</p>
        </div>
      </div>
    </div>
  `
})
export class ApiTestComponent implements OnInit {
  healthResult: HealthResponse | null = null;
  testResult: TestResponse | null = null;
  error: string | null = null;
  loading = false;

  constructor(private apiService: ApiService) {}

  ngOnInit() {
    this.testHealth();
  }

  testHealth() {
    this.loading = true;
    this.error = null;
    
    this.apiService.checkHealth().subscribe({
      next: (result) => {
        this.healthResult = result;
        this.loading = false;
      },
      error: (err) => {
        this.error = `Health check failed: ${err.message || 'Unknown error'}`;
        this.loading = false;
      }
    });
  }

  testGetRequest() {
    this.loading = true;
    this.error = null;
    
    this.apiService.testGet({ param1: 'test', param2: 'value' }).subscribe({
      next: (result) => {
        this.testResult = result;
        this.loading = false;
      },
      error: (err) => {
        this.error = `GET request failed: ${err.message || 'Unknown error'}`;
        this.loading = false;
      }
    });
  }

  testPostRequest() {
    this.loading = true;
    this.error = null;
    
    const testData = {
      message: 'Hello from Angular!',
      timestamp: new Date().toISOString(),
      testValue: 123
    };

    this.apiService.testPost(testData).subscribe({
      next: (result) => {
        this.testResult = result;
        this.loading = false;
      },
      error: (err) => {
        this.error = `POST request failed: ${err.message || 'Unknown error'}`;
        this.loading = false;
      }
    });
  }

  formatJson(obj: any): string {
    return JSON.stringify(obj, null, 2);
  }
}

[END OF FILE: frontend\src\app\components\api-test\api-test.component.ts]

--------------------------------------------------------------------------------
FILE: frontend\src\app\components\cv-wizard\cv-wizard.component.ts
SIZE: 26221 bytes (25.6 KB)
--------------------------------------------------------------------------------
// File: frontend/src/app/components/cv-wizard/cv-wizard.component.ts
import { Component, OnInit, OnDestroy } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { HttpClient } from '@angular/common/http';  // ADD this import
import { CVProcessingService, ProcessingProgress } from '../../services/cv-processing.service';
import { LandingPageService } from '../../services/landing-page.service';
import { PreviewModalComponent } from '../preview-modal/preview-modal.component';
import { Subscription } from 'rxjs';

interface WizardStep {
    id: number;
    title: string;
    description: string;
    completed: boolean;
    active: boolean;
    icon: string;
}

interface CVSection {
    id: string;
    title: string;
    content: string;
    placeholder: string;
    rows: number;
    icon: string;
}

@Component({
    selector: 'app-cv-wizard',
    standalone: true,
    imports: [CommonModule, FormsModule, PreviewModalComponent],
    templateUrl: 'cv-wizard.component.html',
    styleUrls: ['cv-wizard.component.scss']
})
export class CVWizardComponent implements OnInit, OnDestroy {
    currentStep = 1;
    uploadedFile: File | null = null;
    profilePicture: string | null = null;
    isProcessing = false;
    cvData: any = null;
    isGeneratingWebsite = false;
    websiteGenerated = false;
    isDragOver = false;
    private progressSubscription?: Subscription;

    showPreviewModal = false;
    generationId: string | null = null;
    isDownloading = false;
    generationResult: any = null;

    isDeploying = false;
    deployedUrl: string | null = null;
    githubConnected = false;
    deploymentError: string | null = null;

    wizardSteps: WizardStep[] = [
        {
            id: 1,
            title: 'Upload CV',
            description: 'Select your CV file',
            completed: false,
            active: true,
            icon: 'M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12'
        },
        {
            id: 2,
            title: 'Add Photo',
            description: 'Upload profile picture',
            completed: false,
            active: false,
            icon: 'M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z'
        },
        {
            id: 3,
            title: 'AI Processing',
            description: 'Generate content',
            completed: false,
            active: false,
            icon: 'M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a9 9 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z'
        },
        {
            id: 4,
            title: 'Edit Content',
            description: 'Review and customize',
            completed: false,
            active: false,
            icon: 'M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2.5 2.5 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z'
        },
        {
            id: 5,
            title: 'Create Website',
            description: 'Generate landing page',
            completed: false,
            active: false,
            icon: 'M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9'
        }
    ];

    processingPhases = [
        { name: 'Extracting personal information', status: 'pending' },
        { name: 'Generating professional summary', status: 'pending' },
        { name: 'Processing work experience', status: 'pending' },
        { name: 'Organizing skills and expertise', status: 'pending' },
        { name: 'Processing education background', status: 'pending' },
        { name: 'Extracting projects and achievements', status: 'pending' },
        { name: 'Finding certifications', status: 'pending' }
    ];

    cvSections: CVSection[] = [
        {
            id: 'summary',
            title: 'Professional Summary',
            content: '',
            placeholder: 'A compelling professional summary that highlights your key strengths and experience...',
            rows: 3,
            icon: 'M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z'
        },
        {
            id: 'aboutMe',
            title: 'About Me',
            content: '',
            placeholder: 'Tell your professional story in first person. What drives you? What makes you unique?',
            rows: 4,
            icon: 'M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z'
        },
        {
            id: 'experience',
            title: 'Work Experience',
            content: '',
            placeholder: 'Your professional experience, achievements, and career highlights...',
            rows: 8,
            icon: 'M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z'
        },
        {
            id: 'skills',
            title: 'Skills & Expertise',
            content: '',
            placeholder: 'Your technical skills, professional competencies, and areas of expertise...',
            rows: 4,
            icon: 'M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a9 9 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z'
        },
        {
            id: 'education',
            title: 'Education',
            content: '',
            placeholder: 'Your educational background, degrees, and academic achievements...',
            rows: 4,
            icon: 'M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253'
        },
        {
            id: 'projects',
            title: 'Projects',
            content: '',
            placeholder: 'Notable projects, portfolio work, and significant accomplishments...',
            rows: 6,
            icon: 'M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10'
        },
        {
            id: 'certifications',
            title: 'Certifications',
            content: '',
            placeholder: 'Professional certifications, licenses, and credentials...',
            rows: 4,
            icon: 'M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z'
        }
    ];

    constructor(
        private cvProcessingService: CVProcessingService,
        private landingPageService: LandingPageService,
        private http: HttpClient  // ADD HttpClient import
    ) { }

    ngOnInit() {
        this.progressSubscription = this.cvProcessingService.progress$.subscribe(
            (progress: ProcessingProgress) => {
                this.processingPhases = progress.phases;

                if (progress.completed && !progress.error) {
                    this.isProcessing = false;
                    this.wizardSteps[2].completed = true;
                    this.nextStep();
                } else if (progress.error) {
                    this.isProcessing = false;
                    alert('Processing failed: ' + progress.error);
                }
            }
        );

        // ADD: Check GitHub connection status
        this.checkGitHubConnection();

        // ADD: Handle GitHub OAuth callback
        this.handleGitHubCallback();
    }

    ngOnDestroy() {
        this.progressSubscription?.unsubscribe();
    }

    // File handling methods
    onDragOver(event: DragEvent) {
        event.preventDefault();
        event.stopPropagation();
        this.isDragOver = true;
    }

    onDragLeave(event: DragEvent) {
        event.preventDefault();
        event.stopPropagation();
        this.isDragOver = false;
    }

    onDrop(event: DragEvent) {
        event.preventDefault();
        event.stopPropagation();
        this.isDragOver = false;

        const files = event.dataTransfer?.files;
        if (files && files.length > 0) {
            this.handleFileSelection(files[0]);
        }
    }

    onFileSelected(event: Event) {
        const input = event.target as HTMLInputElement;
        if (input.files && input.files.length > 0) {
            this.handleFileSelection(input.files[0]);
        }
    }

    handleFileSelection(file: File) {
        if (this.validateFile(file)) {
            this.uploadedFile = file;
        }
    }

    validateFile(file: File): boolean {
        const allowedTypes = ['application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document'];
        const maxSize = 10 * 1024 * 1024; // 10MB

        if (!allowedTypes.includes(file.type)) {
            alert('Please select a PDF, DOC, or DOCX file');
            return false;
        }

        if (file.size > maxSize) {
            alert('File size must be less than 10MB');
            return false;
        }

        return true;
    }

    removeFile() {
        this.uploadedFile = null;
    }

    formatFileSize(bytes: number): string {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const sizes = ['Bytes', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    // Profile picture methods
    onProfileSelected(event: Event) {
        const input = event.target as HTMLInputElement;
        if (input.files && input.files.length > 0) {
            this.compressAndConvertImage(input.files[0]);
        }
    }

    compressAndConvertImage(file: File) {
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        const img = new Image();

        img.onload = () => {
            const maxSize = 300;
            let { width, height } = img;

            if (width > height) {
                if (width > maxSize) {
                    height = (height * maxSize) / width;
                    width = maxSize;
                }
            } else {
                if (height > maxSize) {
                    width = (width * maxSize) / height;
                    height = maxSize;
                }
            }

            canvas.width = width;
            canvas.height = height;
            ctx?.drawImage(img, 0, 0, width, height);
            this.profilePicture = canvas.toDataURL('image/jpeg', 0.8);
        };

        img.src = URL.createObjectURL(file);
    }

    skipProfilePicture() {
        this.nextStep();
    }

    removeProfilePicture() {
        this.profilePicture = null;
    }

    // CV Processing methods
    async startProcessing() {
        if (!this.uploadedFile) return;

        this.isProcessing = true;

        try {
            const result = await this.cvProcessingService.processCV(this.uploadedFile, this.profilePicture || undefined);

            if (result.success) {
                this.cvData = result.data;
                this.populateCVSections();
            } else {
                this.isProcessing = false;
                alert('Failed to process CV: ' + result.message);
            }

        } catch (error) {
            this.isProcessing = false;
            alert('Failed to process CV: ' + (error as any).message);
        }
    }

    populateCVSections() {
        if (!this.cvData) return;

        const editableSections = this.cvProcessingService.convertToEditableSections(this.cvData);

        editableSections.forEach(editableSection => {
            const section = this.cvSections.find(s => s.id === editableSection.id);
            if (section) {
                section.content = editableSection.content;
            }
        });

        console.log('CV sections populated for editing:', this.cvSections.map(s => ({ id: s.id, length: s.content?.length })));
    }

    resetSection(section: CVSection) {
        // Reset to original AI-generated content
        if (this.cvData) {
            const originalSections = this.cvProcessingService.convertToEditableSections(this.cvData);
            const originalSection = originalSections.find(s => s.id === section.id);
            if (originalSection) {
                section.content = originalSection.content;
            }
        }
    }

    async generateWebsite() {
        this.isGeneratingWebsite = true;

        try {
            const finalData = this.buildFinalCVDataFromEditedSections();

            console.log('Generating website with edited content:', finalData);

            this.landingPageService.generateLandingPage(finalData).subscribe({
                next: (result) => {
                    this.isGeneratingWebsite = false;
                    if (result.success) {
                        this.websiteGenerated = true;
                        this.generationResult = result;
                        this.generationId = result.generation?.id || null;

                        console.log('Website generated successfully:', result);
                        console.log('Generation ID for preview:', this.generationId);
                    } else {
                        throw new Error(result.message || 'Generation failed');
                    }
                },
                error: (error) => {
                    this.isGeneratingWebsite = false;
                    console.error('Website generation failed:', error);
                    alert('Failed to generate website: ' + (error.error?.message || error.message));
                }
            });

        } catch (error) {
            this.isGeneratingWebsite = false;
            alert('Failed to generate website: ' + (error as any).message);
        }
    }

    // Open preview modal
    openPreview() {
        if (this.generationId) {
            console.log('Opening preview for generation ID:', this.generationId);
            this.showPreviewModal = true;
        } else {
            alert('No generation ID available for preview');
        }
    }

    // Close preview modal
    closePreview() {
        this.showPreviewModal = false;
    }

    async downloadWebsite() {
        if (!this.generationId || this.isDownloading) return;

        this.isDownloading = true;

        try {
            const downloadUrl = `http://localhost:3000/api/cv/download?generationId=${this.generationId}`;

            // Create download link
            const link = document.createElement('a');
            link.href = downloadUrl;
            link.download = `${this.cvData?.personalInfo?.name || 'landing-page'}-website.zip`;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);

            console.log('Download initiated for generation:', this.generationId);
        } catch (error) {
            console.error('Download failed:', error);
            alert('Download failed. Please try again.');
        } finally {
            this.isDownloading = false;
        }
    }

    onDownloadFromPreview(generationId: string) {
        console.log('Download completed from preview:', generationId);
        // Optional: Show success message or update UI
    }

    buildFinalCVDataFromEditedSections() {
        console.log('Building final CV data from edited sections...');

        const finalData = {
            ...this.cvData,
            personalInfo: {
                ...this.cvData.personalInfo
            }
        };

        this.cvSections.forEach(section => {
            if (section.content && section.content.trim()) {
                switch (section.id) {
                    case 'summary':
                        finalData.personalInfo.summary = section.content.trim();
                        break;
                    case 'aboutMe':
                        finalData.personalInfo.aboutMe = section.content.trim();
                        break;
                    case 'experience':
                        finalData.experienceText = section.content.trim();
                        break;
                    case 'skills':
                        finalData.skillsText = section.content.trim();
                        break;
                    case 'education':
                        finalData.educationText = section.content.trim();
                        break;
                    case 'projects':
                        finalData.projectsText = section.content.trim();
                        break;
                    case 'certifications':
                        finalData.certificationsText = section.content.trim();
                        break;
                }
            }
        });

        if (this.profilePicture) {
            finalData.personalInfo.profilePicture = this.profilePicture;
        }

        finalData._hasEditedContent = true;

        console.log('Final data built with edited content:', {
            name: finalData.personalInfo.name,
            summaryLength: finalData.personalInfo.summary?.length,
            aboutMeLength: finalData.personalInfo.aboutMe?.length,
            hasExperienceText: !!finalData.experienceText,
            hasSkillsText: !!finalData.skillsText,
            hasEducationText: !!finalData.educationText,
            hasProjectsText: !!finalData.projectsText,
            hasCertificationsText: !!finalData.certificationsText
        });

        return finalData;
    }

    // Navigation methods
    canProceed(): boolean {
        switch (this.currentStep) {
            case 1: return !!this.uploadedFile;
            case 2: return true; // Profile picture is optional
            case 3: return !!this.cvData && !this.isProcessing;
            case 4: return true; // Can always proceed from editing
            case 5: return false; // No next step
            default: return false;
        }
    }

    nextStep() {
        if (this.canProceed() && this.currentStep < 5) {
            // Mark current step as completed and inactive
            this.wizardSteps[this.currentStep - 1].completed = true;
            this.wizardSteps[this.currentStep - 1].active = false;

            // Move to next step
            this.currentStep++;

            // Mark new step as active
            this.wizardSteps[this.currentStep - 1].active = true;
        }
    }

    previousStep() {
        if (this.currentStep > 1) {
            // Mark current step as inactive
            this.wizardSteps[this.currentStep - 1].active = false;

            // Move to previous step
            this.currentStep--;

            // Mark previous step as active and not completed
            this.wizardSteps[this.currentStep - 1].active = true;
            this.wizardSteps[this.currentStep - 1].completed = false;
        }
    }

    getNextButtonText(): string {
        switch (this.currentStep) {
            case 1: return 'Continue';
            case 2: return 'Process CV';
            case 3: return 'Review Content';
            case 4: return 'Create Website';
            default: return 'Next';
        }
    }

    delay(ms: number): Promise<void> {
        return new Promise(resolve => setTimeout(resolve, ms));
    }

        async checkGitHubConnection() {
        try {
            const userId = this.getCurrentUserId();
            
            // Call the Express router endpoint
            const response = await this.http.get<any>(`http://localhost:3000/api/sites/list?userId=${userId}`).toPromise();
            
            console.log('✅ Sites API response:', response);
            
            this.githubConnected = response.hasGitHubConnection;
            
            console.log('✅ GitHub connection check:', {
                connected: this.githubConnected,
                userId: userId
            });
            
        } catch (error: any) {
            console.error('❌ Failed to check GitHub connection:', error);
            console.error('Error details:', {
                status: error.status,
                statusText: error.statusText,
                url: error.url,
                message: error.message
            });
            this.githubConnected = false;
        }
    }

    async deployToGitHub() {
        try {
            console.log('🚀 Deploy button clicked');
            
            // Check if GitHub is connected first
            if (!this.githubConnected) {
                await this.connectGitHub();
                return;
            }

            // Get site name from user
            const siteName = prompt('Enter a name for your website:') || 'my-portfolio';
            
            // Start deployment
            this.isDeploying = true;
            this.deployedUrl = null;
            this.deploymentError = null;

            const userId = this.getCurrentUserId();
            const finalCvData = this.buildFinalCVDataFromEditedSections();

            console.log('🚀 Starting GitHub deployment:', {
                userId: userId,
                siteName: siteName,
                hasGenerationId: !!this.generationId,
                cvDataKeys: Object.keys(finalCvData)
            });

            // Call deploy API
            const response = await this.http.post<any>('http://localhost:3000/api/cv/deploy', {
                userId: userId,
                cvData: finalCvData,
                siteName: siteName
            }).toPromise();

            console.log('✅ GitHub deployment succeeded:', {
                githubUrl: response.githubUrl,
                pagesUrl: response.pagesUrl,
                repoName: response.repoName
            });

            this.deployedUrl = response.pagesUrl;
            
            // Show success message
            alert(`🎉 Website deployed successfully!\n\nLive URL: ${response.pagesUrl}\nRepository: ${response.githubUrl}\n\nNote: GitHub Pages may take 2-3 minutes to become available.`);

        } catch (error: any) {
            console.error('❌ GitHub deployment failed:', error);
            
            const errorMessage = error.error?.error || error.message || 'Deployment failed';
            this.deploymentError = errorMessage;
            alert(`❌ Deployment failed: ${errorMessage}`);
            
        } finally {
            this.isDeploying = false;
        }
    }

    async connectGitHub() {
        try {
            const userId = this.getCurrentUserId();
            
            console.log('🔗 Connecting to GitHub for user:', userId);
            
            const response = await this.http.post<any>('http://localhost:3000/api/github/connect', { userId }).toPromise();
            
            console.log('✅ GitHub OAuth URL generated:', {
                hasOAuthUrl: !!response.oauthUrl,
                clientIdFound: response.oauthUrl?.includes('client_id='),
                redirectUriFound: response.oauthUrl?.includes('redirect_uri=')
            });

            if (response.oauthUrl) {
                // Store current data before redirect
                localStorage.setItem('pendingCvData', JSON.stringify(this.buildFinalCVDataFromEditedSections()));
                localStorage.setItem('pendingGenerationId', this.generationId || '');
                
                // Redirect to GitHub OAuth
                window.location.href = response.oauthUrl;
            }

        } catch (error: any) {
            console.error('❌ Failed to connect GitHub:', error);
            alert('Failed to connect to GitHub. Please try again.');
        }
    }

    private handleGitHubCallback() {
        const urlParams = new URLSearchParams(window.location.search);
        const githubConnected = urlParams.get('github_connected');
        
        if (githubConnected === 'true') {
            console.log('✅ GitHub OAuth callback successful');
            
            // Restore data
            const savedCvData = localStorage.getItem('pendingCvData');
            const savedGenerationId = localStorage.getItem('pendingGenerationId');
            
            if (savedCvData) {
                // Restore CV data and update sections
                const restoredData = JSON.parse(savedCvData);
                this.cvData = restoredData;
                this.generationId = savedGenerationId;
                
                // Clean up
                localStorage.removeItem('pendingCvData');
                localStorage.removeItem('pendingGenerationId');
            }
            
            // Update connection status
            this.githubConnected = true;
            
            // Clean URL
            window.history.replaceState({}, document.title, window.location.pathname);
            
            alert('✅ GitHub connected successfully! You can now deploy your website.');
        }
    }

    private getCurrentUserId(): string {
        // Replace with your actual user ID method
        return localStorage.getItem('userId') || '1';
    }
}

[END OF FILE: frontend\src\app\components\cv-wizard\cv-wizard.component.ts]

--------------------------------------------------------------------------------
FILE: frontend\src\app\components\deploy-website\deploy-website.component.ts
SIZE: 5719 bytes (5.6 KB)
--------------------------------------------------------------------------------
import { Component, Input, Output, EventEmitter } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FormsModule } from '@angular/forms';
import { HttpClient } from '@angular/common/http';

@Component({
  selector: 'app-deploy-website',
  standalone: true,
  imports: [CommonModule, FormsModule],
  templateUrl: 'deploy-website.component.html',
  styleUrls: ['deploy-website.component.scss']
})
export class DeployWebsiteComponent {
  @Input() cvData: any = null;
  @Input() userId: string = '';
  @Output() deploymentComplete = new EventEmitter<any>();

  siteName: string = '';
  isDeploying: boolean = false;
  deploymentStatus: string = '';
  deploymentError: string = '';
  deployedUrls: any = null;
  hasGitHubConnection: boolean = false;
  showDeployForm: boolean = false;

  constructor(private http: HttpClient) {}

  async ngOnInit() {
    await this.checkGitHubConnection();
    this.generateSiteName();
  }

  async checkGitHubConnection() {
    try {
      const response = await this.http.get<any>(`/api/sites/list?userId=${this.userId}`).toPromise();
      this.hasGitHubConnection = response.hasGitHubConnection;
    } catch (error) {
      console.error('Failed to check GitHub connection:', error);
      this.hasGitHubConnection = false;
    }
  }

  generateSiteName() {
    if (this.cvData?.personalInfo?.name) {
      // Generate a clean site name from the user's name
      this.siteName = this.cvData.personalInfo.name
        .toLowerCase()
        .replace(/[^a-z0-9\s]/g, '')
        .replace(/\s+/g, '-')
        .substring(0, 30) + '-portfolio';
    } else {
      this.siteName = 'my-portfolio';
    }
  }

  async connectGitHub() {
    try {
      const response = await this.http.post<any>('/api/github/connect', { userId: this.userId }).toPromise();
      
      if (response.oauthUrl) {
        // Store current state before redirect
        localStorage.setItem('pendingDeployment', JSON.stringify({
          cvData: this.cvData,
          siteName: this.siteName
        }));
        
        // Redirect to GitHub OAuth
        window.location.href = response.oauthUrl;
      }
    } catch (error: any) {
      console.error('Failed to connect GitHub:', error);
      this.deploymentError = 'Failed to connect to GitHub. Please try again.';
    }
  }

  showDeploymentForm() {
    this.showDeployForm = true;
    this.deploymentError = '';
    this.deploymentStatus = '';
  }

  async deployWebsite() {
    if (!this.siteName.trim()) {
      this.deploymentError = 'Please enter a site name';
      return;
    }

    if (!this.cvData) {
      this.deploymentError = 'No CV data available for deployment';
      return;
    }

    this.isDeploying = true;
    this.deploymentError = '';
    this.deploymentStatus = 'Starting deployment...';

    try {
      // Step 1: Deploy to GitHub
      this.deploymentStatus = 'Creating GitHub repository...';
      
      const deployResponse = await this.http.post<any>('/api/cv/deploy', {
        userId: this.userId,
        cvData: this.cvData,
        siteName: this.siteName.trim()
      }).toPromise();

      this.deploymentStatus = 'Enabling GitHub Pages...';
      
      // Step 2: Wait a moment for GitHub Pages to process
      await this.delay(3000);
      
      this.deploymentStatus = 'Deployment complete!';
      
      this.deployedUrls = {
        github: deployResponse.githubUrl,
        pages: deployResponse.pagesUrl,
        siteId: deployResponse.siteId
      };

      // Emit success event
      this.deploymentComplete.emit({
        success: true,
        urls: this.deployedUrls,
        siteName: this.siteName
      });

    } catch (error: any) {
      console.error('Deployment failed:', error);
      this.deploymentError = error.error?.error || 'Deployment failed. Please try again.';
      this.deploymentStatus = '';
    } finally {
      this.isDeploying = false;
    }
  }

  async deleteDeployment() {
    if (!this.deployedUrls?.siteId) return;

    if (!confirm('Are you sure you want to delete this deployment? This will remove the GitHub repository.')) {
      return;
    }

    try {
      await this.http.delete('/api/sites/delete', {
        body: { 
          siteId: this.deployedUrls.siteId, 
          userId: this.userId 
        }
      }).toPromise();

      // Reset state
      this.deployedUrls = null;
      this.showDeployForm = false;
      this.deploymentStatus = '';
      
      alert('Deployment deleted successfully!');

    } catch (error: any) {
      console.error('Failed to delete deployment:', error);
      alert('Failed to delete deployment. Please try again.');
    }
  }

  resetForm() {
    this.showDeployForm = false;
    this.deploymentError = '';
    this.deploymentStatus = '';
    this.deployedUrls = null;
  }

  private delay(ms: number): Promise<void> {
    return new Promise(resolve => setTimeout(resolve, ms));
  }

  // Check for pending deployment after GitHub OAuth return
  checkPendingDeployment() {
    const pending = localStorage.getItem('pendingDeployment');
    if (pending) {
      const data = JSON.parse(pending);
      this.cvData = data.cvData;
      this.siteName = data.siteName;
      localStorage.removeItem('pendingDeployment');
      
      // Auto-show deployment form if user just connected GitHub
      setTimeout(() => {
        this.checkGitHubConnection().then(() => {
          if (this.hasGitHubConnection) {
            this.showDeploymentForm();
          }
        });
      }, 1000);
    }
  }
}

[END OF FILE: frontend\src\app\components\deploy-website\deploy-website.component.ts]

--------------------------------------------------------------------------------
FILE: frontend\src\app\components\file-upload\file-upload.component.ts
SIZE: 15707 bytes (15.3 KB)
--------------------------------------------------------------------------------
import { Component, OnInit, OnDestroy } from '@angular/core';
import { CommonModule } from '@angular/common';
import { FileUploadService, UploadProgress } from '../../services/file-upload.service';
import { Subscription } from 'rxjs';
import { LandingPageService } from '../../services/landing-page.service';

@Component({
    selector: 'app-file-upload',
    standalone: true,
    imports: [CommonModule],
    template: `
    <div class="max-w-4xl mx-auto">
      <!-- Upload Area -->
      <div *ngIf="!uploadProgress || uploadProgress.status === 'error'" 
           class="border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-gray-400 transition-colors"
           [class.border-red-300]="uploadProgress?.status === 'error'"
           (dragover)="onDragOver($event)"
           (dragleave)="onDragLeave($event)"
           (drop)="onDrop($event)">
        
        <div class="space-y-4">
          <div class="mx-auto w-16 h-16 bg-primary-100 rounded-full flex items-center justify-center">
            <svg class="w-8 h-8 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                    d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
            </svg>
          </div>
          
          <div>
            <h3 class="text-lg font-medium text-gray-900">Upload your CV</h3>
            <p class="text-gray-600">Drag and drop your CV file here, or click to browse</p>
            <p class="text-sm text-gray-500 mt-2">Supports PDF, DOC, and DOCX files (max 10MB)</p>
          </div>
          
          <div>
            <input type="file" 
                   id="file-input"
                   class="hidden"
                   accept=".pdf,.doc,.docx,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document"
                   (change)="onFileSelected($event)">
            <label for="file-input" class="btn-primary cursor-pointer inline-block">
              Choose File
            </label>
          </div>
        </div>
      </div>

      <!-- Profile Picture Upload (show after CV is processed) -->
        <div *ngIf="uploadProgress?.status === 'completed' && !profilePicture" 
            class="border-2 border-dashed border-blue-300 rounded-lg p-6 text-center mt-6">
        <div class="space-y-4">
            <div class="mx-auto w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center">
            <svg class="w-8 h-8 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                    d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
            </svg>
            </div>
            
            <div>
            <h3 class="text-lg font-medium text-gray-900">Add Your Profile Picture</h3>
            <p class="text-gray-600">Upload a professional headshot for your landing page</p>
            <p class="text-sm text-gray-500 mt-2">Supports JPG, PNG files (max 5MB)</p>
            </div>
            
            <div>
            <input type="file" 
                    id="profile-input"
                    class="hidden"
                    accept=".jpg,.jpeg,.png,image/jpeg,image/png"
                    (change)="onProfilePictureSelected($event)">
            <label for="profile-input" class="btn-secondary cursor-pointer inline-block">
                Choose Profile Picture
            </label>
            </div>
        </div>
        </div>

        <!-- Profile Picture Preview -->
        <div *ngIf="profilePicture" class="bg-white rounded-lg border border-gray-200 p-6 mt-6">
        <h4 class="text-lg font-medium text-gray-900 mb-4">Profile Picture</h4>
        <div class="flex items-center space-x-4">
            <img [src]="profilePicture" alt="Profile Picture" class="w-20 h-20 rounded-full object-cover">
            <div class="flex-1">
            <p class="text-sm text-gray-600">Profile picture ready!</p>
            <button (click)="removeProfilePicture()" class="text-red-600 hover:text-red-700 text-sm mt-1">
                Remove Picture
            </button>
            </div>
        </div>
        </div>

      <!-- Upload Progress -->
      <div *ngIf="uploadProgress && uploadProgress.status !== 'error'" class="space-y-4">
        <!-- Progress Bar -->
        <div class="bg-white rounded-lg border border-gray-200 p-6">
          <div class="flex items-center justify-between mb-4">
            <h3 class="text-lg font-medium text-gray-900">
              {{ uploadProgress.status === 'uploading' ? 'Uploading CV...' : 
                 uploadProgress.status === 'processing' ? 'Processing CV...' : 
                 'CV Processed Successfully!' }}
            </h3>
            <span class="text-sm font-medium text-gray-700">{{ uploadProgress.percentage }}%</span>
          </div>
          
          <div class="w-full bg-gray-200 rounded-full h-2 mb-4">
            <div class="bg-primary-600 h-2 rounded-full transition-all duration-300" 
                 [style.width.%]="uploadProgress.percentage"></div>
          </div>
          
          <p class="text-sm text-gray-600">{{ uploadProgress.message }}</p>
          
          <!-- File Info -->
          <div *ngIf="uploadProgress.file" class="mt-4 p-3 bg-gray-50 rounded border">
            <div class="flex items-center space-x-3">
              <svg class="w-5 h-5 text-gray-500" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
              </svg>
              <div>
                <p class="text-sm font-medium text-gray-900">{{ uploadProgress.file.originalName }}</p>
                <p class="text-xs text-gray-500">{{ formatFileSize(uploadProgress.file.size) }}</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Extracted Text Preview -->
        <div *ngIf="uploadProgress.status === 'completed' && uploadProgress.extractedText" 
             class="bg-white rounded-lg border border-gray-200 p-6">
          <h4 class="text-lg font-medium text-gray-900 mb-4">Extracted CV Content</h4>
          <div class="bg-gray-50 rounded border p-4 max-h-96 overflow-y-auto">
            <pre class="text-sm text-gray-700 whitespace-pre-wrap font-mono">{{ uploadProgress.extractedText }}</pre>
          </div>
          
          <div class="mt-6 flex space-x-4">
            <button class="btn-primary">Continue to Preview</button>
            <button (click)="startOver()" class="btn-secondary">Upload Another CV</button>
          </div>
        </div>

        <!-- Continue to Generation -->
        <div *ngIf="uploadProgress.status === 'completed' && uploadProgress.extractedText" 
            class="bg-white rounded-lg border border-gray-200 p-6">
        <h4 class="text-lg font-medium text-gray-900 mb-4">Extracted CV Content</h4>
        <div class="bg-gray-50 rounded border p-4 max-h-96 overflow-y-auto">
            <pre class="text-sm text-gray-700 whitespace-pre-wrap font-mono">{{ uploadProgress.extractedText }}</pre>
        </div>
        
        <div class="mt-6 flex space-x-4">
            <button (click)="generateLandingPage()" 
                    [disabled]="generatingPage"
                    class="btn-primary">
            {{ generatingPage ? 'Generating...' : 'Generate Landing Page' }}
            </button>
            <button (click)="startOver()" class="btn-secondary">Upload Another CV</button>
        </div>
        </div>

        <!-- Generation Result -->
        <div *ngIf="generationResult" class="bg-white rounded-lg border border-gray-200 p-6 mt-4">
        <div class="flex items-center mb-4">
            <svg class="w-6 h-6 text-green-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
            </svg>
            <h4 class="text-lg font-medium text-gray-900">Landing Page Generated!</h4>
        </div>
        
        <p class="text-gray-600 mb-4">{{ generationResult.message }}</p>
        
        <div class="bg-gray-50 rounded border p-4 mb-4">
            <h5 class="font-medium text-gray-900 mb-2">Generated Files:</h5>
            <ul class="text-sm text-gray-600 list-disc list-inside">
            <li *ngFor="let file of generationResult.generation.files">{{ file }}</li>
            </ul>
        </div>
        
        <div class="flex space-x-4">
            <button class="btn-primary">Deploy to GitHub</button>
            <button (click)="previewLandingPage()" class="btn-secondary">Preview</button>
            <button (click)="startOver()" class="btn-secondary">Create Another</button>
        </div>
        </div>
      </div>

      <!-- Error State -->
      <div *ngIf="uploadProgress?.status === 'error'" 
           class="bg-red-50 border border-red-200 rounded-lg p-6">
        <div class="flex items-center">
          <svg class="w-5 h-5 text-red-500 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                  d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
          </svg>
          <span class="text-red-800 font-medium">Upload Failed</span>
        </div>
        <p class="text-red-700 text-sm mt-1">{{ uploadProgress?.message }}</p>
        <button (click)="startOver()" class="btn-primary mt-4">Try Again</button>
      </div>
    </div>
  `
})
export class FileUploadComponent implements OnInit, OnDestroy {
    uploadProgress: UploadProgress | null = null;
    profilePicture: string | null = null;
    private subscription?: Subscription;

    generatingPage = false;
    generationResult: any = null;

    constructor(
        private fileUploadService: FileUploadService,
        private landingPageService: LandingPageService
    ) { }

    ngOnInit() {
        this.subscription = this.fileUploadService.uploadProgress$.subscribe(
            progress => this.uploadProgress = progress
        );
    }

    ngOnDestroy() {
        this.subscription?.unsubscribe();
    }

    onDragOver(event: DragEvent) {
        event.preventDefault();
        event.stopPropagation();
    }

    onDragLeave(event: DragEvent) {
        event.preventDefault();
        event.stopPropagation();
    }

    onDrop(event: DragEvent) {
        event.preventDefault();
        event.stopPropagation();

        const files = event.dataTransfer?.files;
        if (files && files.length > 0) {
            this.uploadFile(files[0]);
        }
    }

    onFileSelected(event: Event) {
        const input = event.target as HTMLInputElement;
        if (input.files && input.files.length > 0) {
            this.uploadFile(input.files[0]);
        }
    }

    private uploadFile(file: File) {
        this.fileUploadService.uploadFile(file).subscribe();
    }

    formatFileSize(bytes: number): string {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const sizes = ['Bytes', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    startOver() {
        this.fileUploadService.clearProgress();
        this.uploadProgress = null;
        this.profilePicture = null; // Add this line
        this.generationResult = null; // Add this line
    }

    onProfilePictureSelected(event: Event) {
        const input = event.target as HTMLInputElement;
        if (input.files && input.files.length > 0) {
            const file = input.files[0];

            // Validate file
            if (!this.validateImageFile(file)) {
                alert('Please select a valid image file (JPG or PNG, max 5MB)');
                return;
            }

            // Compress and convert to base64
            this.compressAndConvertImage(file);
        }
    }

    private compressAndConvertImage(file: File) {
        const canvas = document.createElement('canvas');
        const ctx = canvas.getContext('2d');
        const img = new Image();

        img.onload = () => {
            // Set canvas size (max 400x400 for profile pictures)
            const maxSize = 400;
            let { width, height } = img;

            if (width > height) {
                if (width > maxSize) {
                    height = (height * maxSize) / width;
                    width = maxSize;
                }
            } else {
                if (height > maxSize) {
                    width = (width * maxSize) / height;
                    height = maxSize;
                }
            }

            canvas.width = width;
            canvas.height = height;

            // Draw and compress
            ctx?.drawImage(img, 0, 0, width, height);

            // Convert to base64 with compression (0.8 quality)
            this.profilePicture = canvas.toDataURL('image/jpeg', 0.8);

            console.log('Compressed image size:', this.profilePicture.length);
        };

        img.src = URL.createObjectURL(file);
    }

    removeProfilePicture() {
        this.profilePicture = null;
    }

    private validateImageFile(file: File): boolean {
        const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png'];
        const maxSize = 5 * 1024 * 1024; // 5MB

        return allowedTypes.includes(file.type) && file.size <= maxSize;
    }

    generateLandingPage() {
        if (!this.uploadProgress?.extractedText) return;

        this.generatingPage = true;

        // Get structured data from upload progress
        let structuredData = (this.uploadProgress as any).structuredData;

        if (!structuredData) {
            alert('No structured data available. Please process the CV first.');
            this.generatingPage = false;
            return;
        }

        // Add profile picture to structured data
        if (this.profilePicture) {
            structuredData = {
                ...structuredData,
                personalInfo: {
                    ...structuredData.personalInfo,
                    profilePicture: this.profilePicture
                }
            };
        }

        this.landingPageService.generateLandingPage(structuredData).subscribe({
            next: (result) => {
                this.generatingPage = false;
                this.generationResult = result;
                console.log('Landing page generated:', result);
            },
            error: (error) => {
                this.generatingPage = false;
                console.error('Generation failed:', error);
                alert('Failed to generate landing page: ' + (error.error?.message || error.message));
            }
        });
    }

    previewLandingPage() {
        if (!this.generationResult) return;

        // For now, just show an alert
        alert('Preview functionality will be implemented with GitHub integration');
    }
}

[END OF FILE: frontend\src\app\components\file-upload\file-upload.component.ts]

--------------------------------------------------------------------------------
FILE: frontend\src\app\components\footer\footer.component.ts
SIZE: 7962 bytes (7.8 KB)
--------------------------------------------------------------------------------
// File: frontend/src/app/components/footer/footer.component.ts
import { Component } from '@angular/core';
import { CommonModule } from '@angular/common';
import { RouterModule } from '@angular/router';

@Component({
  selector: 'app-footer',
  standalone: true,
  imports: [CommonModule, RouterModule],
  template: `
    <footer class="bg-white border-t border-gray-200 mt-auto">
      <div class="container py-12">
        <div class="grid grid-cols-1 md:grid-cols-4 gap-8">
          <!-- Brand -->
          <div class="col-span-1 md:col-span-2">
            <div class="flex items-center space-x-3 mb-4">
              <div class="w-10 h-10 bg-gradient rounded-lg flex items-center justify-center">
                <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                        d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
                </svg>
              </div>
              <div>
                <h3 class="text-xl font-bold text-gradient">CVLanding</h3>
                <p class="text-xs text-gray-500 -mt-1">Generate • Share • Shine</p>
              </div>
            </div>
            <p class="text-gray-600 max-w-md leading-relaxed">
              Transform your CV into a stunning, professional landing page in minutes. 
              AI-powered content generation for the modern professional.
            </p>
            <div class="flex space-x-4 mt-6">
              <a href="#" class="text-gray-400 hover:text-gray-600 transition-colors">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z"/>
                </svg>
              </a>
              <a href="#" class="text-gray-400 hover:text-gray-600 transition-colors">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
                </svg>
              </a>
              <a href="#" class="text-gray-400 hover:text-gray-600 transition-colors">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.174-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.347-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.165-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.748-1.378 0 0-.599 2.282-.744 2.840-.282 1.084-1.064 2.456-1.549 3.235C9.584 23.815 10.77 24.001 12.017 24.001c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001 12.017.001z"/>
                </svg>
              </a>
            </div>
          </div>

          <!-- Quick Links -->
          <div>
            <h4 class="text-lg font-semibold text-gray-900 mb-4">Quick Links</h4>
            <ul class="space-y-3">
              <li>
                <a routerLink="/home" class="text-gray-600 hover:text-gray-900 transition-colors text-sm">
                  Home
                </a>
              </li>
              <li>
                <a routerLink="/upload" class="text-gray-600 hover:text-gray-900 transition-colors text-sm">
                  Create Landing Page
                </a>
              </li>
              <li>
                <a href="#" class="text-gray-600 hover:text-gray-900 transition-colors text-sm">
                  Examples
                </a>
              </li>
              <li>
                <a href="#" class="text-gray-600 hover:text-gray-900 transition-colors text-sm">
                  Templates
                </a>
              </li>
              <li>
                <a href="#" class="text-gray-600 hover:text-gray-900 transition-colors text-sm">
                  Pricing
                </a>
              </li>
            </ul>
          </div>

          <!-- Support -->
          <div>
            <h4 class="text-lg font-semibold text-gray-900 mb-4">Support</h4>
            <ul class="space-y-3">
              <li>
                <a href="#" class="text-gray-600 hover:text-gray-900 transition-colors text-sm">
                  Help Center
                </a>
              </li>
              <li>
                <a href="#" class="text-gray-600 hover:text-gray-900 transition-colors text-sm">
                  Contact Us
                </a>
              </li>
              <li>
                <a href="#" class="text-gray-600 hover:text-gray-900 transition-colors text-sm">
                  FAQ
                </a>
              </li>
              <li>
                <a href="#" class="text-gray-600 hover:text-gray-900 transition-colors text-sm">
                  Privacy Policy
                </a>
              </li>
              <li>
                <a href="#" class="text-gray-600 hover:text-gray-900 transition-colors text-sm">
                  Terms of Service
                </a>
              </li>
            </ul>
          </div>
        </div>

        <!-- Bottom Bar -->
        <div class="flex flex-col md:flex-row justify-between items-center pt-8 mt-8 border-t border-gray-200">
          <div class="flex items-center space-x-4 mb-4 md:mb-0">
            <p class="text-sm text-gray-500">
              © 2025 CVLanding. All rights reserved.
            </p>
            <div class="hidden md:flex items-center space-x-1">
              <span class="text-xs text-gray-400">•</span>
              <span class="text-xs text-gray-400">Made with</span>
              <svg class="w-3 h-3 text-red-500" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M3.172 5.172a4 4 0 015.656 0L10 6.343l1.172-1.171a4 4 0 115.656 5.656L10 17.657l-6.828-6.829a4 4 0 010-5.656z" clip-rule="evenodd"/>
              </svg>
              <span class="text-xs text-gray-400">for professionals</span>
            </div>
          </div>
          
          <div class="flex items-center space-x-4">
            <span class="text-xs text-gray-400">Powered by AI</span>
            <div class="flex items-center space-x-2">
              <div class="w-2 h-2 bg-green-500 rounded-full"></div>
              <span class="text-xs text-gray-500">All systems operational</span>
            </div>
          </div>
        </div>
      </div>
    </footer>
  `
})
export class FooterComponent {
}

[END OF FILE: frontend\src\app\components\footer\footer.component.ts]

--------------------------------------------------------------------------------
FILE: frontend\src\app\components\github-test\github-test.ts
SIZE: 11349 bytes (11.1 KB)
--------------------------------------------------------------------------------
// frontend/src/app/components/github-test/github-test.component.ts
import { Component, OnInit } from '@angular/core';
import { CommonModule } from '@angular/common';
import { HttpClient } from '@angular/common/http';

@Component({
  selector: 'app-github-test',
  standalone: true,
  imports: [CommonModule],
  template: `
    <div class="container mx-auto px-4 py-8">
      <div class="card max-w-4xl mx-auto">
        <h2 class="text-3xl font-bold text-gray-900 mb-8">GitHub Integration Test</h2>
        
        <!-- Console Messages -->
        <div class="mb-8 p-4 bg-gray-900 rounded-lg">
          <h3 class="text-white font-semibold mb-4">Console Messages:</h3>
          <div class="bg-black text-green-400 p-4 rounded font-mono text-sm max-h-64 overflow-y-auto">
            <div *ngFor="let log of logs">
              <span [ngClass]="{
                'text-red-400': log.type === 'error',
                'text-yellow-400': log.type === 'warning', 
                'text-green-400': log.type === 'success',
                'text-blue-400': log.type === 'info'
              }">
                [{{ log.timestamp }}] {{ log.message }}
              </span>
            </div>
          </div>
        </div>

        <!-- Connection Status -->
        <div class="mb-8 p-4 border rounded-lg" [ngClass]="{
          'bg-green-50 border-green-200': githubConnected,
          'bg-gray-50 border-gray-200': !githubConnected
        }">
          <div class="flex items-center justify-between">
            <div class="flex items-center">
              <div class="w-3 h-3 rounded-full mr-3" [ngClass]="{
                'bg-green-500': githubConnected,
                'bg-gray-400': !githubConnected
              }"></div>
              <span class="font-medium">
                {{ githubConnected ? 'GitHub Connected' : 'GitHub Not Connected' }}
              </span>
            </div>
            <span *ngIf="githubUsername" class="text-sm text-gray-600">
              {{ githubUsername }}
            </span>
          </div>
        </div>

        <!-- OAuth URL Display -->
        <div *ngIf="oauthUrl && !githubConnected" class="mb-8 p-4 bg-blue-50 border border-blue-200 rounded-lg">
          <h4 class="font-semibold text-blue-900 mb-2">GitHub Authentication Required</h4>
          <p class="text-blue-800 text-sm mb-4">
            Click the link below to authenticate with GitHub (opens in new tab):
          </p>
          <a [href]="oauthUrl" 
             target="_blank"
             class="inline-block px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 mb-4">
            Authenticate with GitHub
          </a>
          <p class="text-xs text-blue-600 mb-3">
            After authentication, return here and click "Check Connection"
          </p>
          <button (click)="checkConnection()"
                  class="px-3 py-1 bg-blue-100 text-blue-800 rounded text-sm hover:bg-blue-200">
            Check Connection
          </button>
        </div>

        <!-- URL Parameters Debug -->
        <div *ngIf="urlParams.code || urlParams.github_connected" class="mb-8 p-4 bg-yellow-50 border border-yellow-200 rounded-lg">
          <h4 class="font-semibold text-yellow-800 mb-2">OAuth Callback Detected</h4>
          <pre class="text-xs text-yellow-700">{{ formatJson(urlParams) }}</pre>
        </div>

        <!-- Test Buttons -->
        <div class="space-y-4">
          <h3 class="font-semibold text-gray-900 mb-4">Quick Tests:</h3>
          
          <button (click)="testEnvironment()"
                  [disabled]="loading"
                  class="w-full px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50">
            {{ loading ? 'Testing...' : '1. Test Environment Variables' }}
          </button>
          
          <button (click)="generateAuthUrl()"
                  [disabled]="loading"
                  class="w-full px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50">
            {{ loading ? 'Generating...' : '2. Generate GitHub Auth URL' }}
          </button>
          
          <button (click)="testRepoCreation()"
                  [disabled]="loading || !githubConnected"
                  class="w-full px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50">
            {{ loading ? 'Creating Repository...' : '3. Test Repository Creation' }}
          </button>

          <button (click)="clearLogs()"
                  class="w-full px-6 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600">
            Clear Console
          </button>
        </div>

        <!-- Error Display -->
        <div *ngIf="error" class="mt-6 p-4 bg-red-50 border border-red-200 rounded-lg">
          <h4 class="font-semibold text-red-800 mb-2">Error:</h4>
          <p class="text-red-700">{{ error }}</p>
        </div>
      </div>
    </div>
  `
})
export class GithubTestComponent implements OnInit {
  logs: Array<{timestamp: string, message: string, type: string}> = [];
  githubConnected = false;
  githubUsername = '';
  loading = false;
  oauthUrl = '';
  error = '';
  urlParams: any = {};

  constructor(private http: HttpClient) {}

  ngOnInit() {
    this.log('GitHub Test Component initialized', 'info');
    this.checkUrlParams();
    this.checkConnection();
  }

  private log(message: string, type: 'info' | 'success' | 'warning' | 'error' = 'info') {
    const timestamp = new Date().toLocaleTimeString();
    this.logs.push({ timestamp, message, type });
    console.log(`[${timestamp}] ${message}`);
    
    setTimeout(() => {
      const consoleDiv = document.querySelector('.max-h-64');
      if (consoleDiv) {
        consoleDiv.scrollTop = consoleDiv.scrollHeight;
      }
    }, 100);
  }

  private checkUrlParams() {
    const urlParams = new URLSearchParams(window.location.search);
    this.urlParams = {
      github_connected: urlParams.get('github_connected'),
      github_error: urlParams.get('github_error'),
      code: urlParams.get('code'),
      state: urlParams.get('state'),
      username: urlParams.get('username')
    };

    if (this.urlParams.github_connected === 'true') {
      this.githubConnected = true;
      this.githubUsername = this.urlParams.username || '';
      this.log('GitHub OAuth callback successful!', 'success');
      if (this.urlParams.username) {
        this.log('Connected as: ' + this.urlParams.username, 'info');
      }
    } else if (this.urlParams.github_error === 'true') {
      this.log('GitHub OAuth callback failed!', 'error');
    } else if (this.urlParams.code) {
      this.log('GitHub OAuth code received, processing...', 'info');
    }
  }

  async testEnvironment() {
    this.loading = true;
    this.error = '';
    this.log('Testing environment variables...', 'info');

    try {
      const response = await this.http.get<any>('http://localhost:3000/api/github/test?userId=1').toPromise();
      
      if (response && response.success) {
        this.log('Environment variables configured correctly', 'success');
        this.log('Client ID: ' + (response.environment?.clientId || 'Not found'), 'info');
        this.log('Redirect URI: ' + (response.environment?.redirectUri || 'Not found'), 'info');
        this.log('GitHub API accessible: ' + (response.githubApi?.accessible || false), 'info');
      } else {
        this.log('Environment test failed', 'error');
        this.error = response?.error || 'Environment test failed';
      }
    } catch (error: any) {
      this.log('Environment test request failed', 'error');
      this.error = error.message || 'Request failed';
      this.log('Error details: ' + this.error, 'error');
    } finally {
      this.loading = false;
    }
  }

  async generateAuthUrl() {
    this.loading = true;
    this.error = '';
    this.log('Generating GitHub authentication URL...', 'info');

    try {
      const response = await this.http.post<any>('http://localhost:3000/api/github/connect', { 
        userId: '1' 
      }).toPromise();
      
      if (response && response.success && response.oauthUrl) {
        this.oauthUrl = response.oauthUrl;
        this.log('GitHub OAuth URL generated successfully', 'success');
        this.log('OAuth URL ready - click the link above to authenticate', 'info');
        this.log('Important: Return to this page after GitHub authentication', 'warning');
      } else {
        this.log('Failed to generate OAuth URL', 'error');
        this.error = response?.error || 'OAuth URL generation failed';
      }
    } catch (error: any) {
      this.log('OAuth URL generation request failed', 'error');
      this.error = error.message || 'Request failed';
      this.log('Error details: ' + this.error, 'error');
    } finally {
      this.loading = false;
    }
  }

  async checkConnection() {
    this.log('Checking GitHub connection status...', 'info');

    try {
      const response = await this.http.get<any>('http://localhost:3000/api/sites/list?userId=1').toPromise();
      
      if (response && response.hasGitHubConnection) {
        this.githubConnected = true;
        this.log('GitHub connection verified!', 'success');
      } else {
        this.githubConnected = false;
        this.log('No GitHub connection found', 'warning');
      }
    } catch (error: any) {
      this.log('Failed to check GitHub connection', 'error');
      this.log('Connection check error: ' + error.message, 'error');
    }
  }

  async testRepoCreation() {
    this.loading = true;
    this.error = '';
    this.log('Testing GitHub repository creation...', 'info');

    try {
      const testRepoName = 'test-repo-' + Date.now();
      this.log('Creating repository: ' + testRepoName, 'info');
      
      const response = await this.http.post<any>('http://localhost:3000/api/cv/deploy', {
        userId: '1',
        siteName: testRepoName,
        cvData: {
          personalInfo: { name: 'Test User', email: 'test@example.com' },
          summary: 'This is a test deployment',
          experience: [],
          education: [],
          skills: ['Testing'],
          projects: [],
          certifications: []
        }
      }).toPromise();
      
      if (response && response.githubUrl) {
        this.log('Test repository created successfully!', 'success');
        this.log('Repository URL: ' + response.githubUrl, 'info');
        this.log('Live URL: ' + response.pagesUrl, 'info');
      } else {
        this.log('Repository creation failed', 'error');
        this.error = 'No repository URL returned';
      }
    } catch (error: any) {
      this.log('Repository creation test failed', 'error');
      this.error = error.error?.error || error.message || 'Repository creation failed';
      this.log('Error details: ' + this.error, 'error');
    } finally {
      this.loading = false;
    }
  }

  clearLogs() {
    this.logs = [];
    this.error = '';
    this.log('Console cleared', 'info');
  }

  formatJson(obj: any): string {
    return JSON.stringify(obj, null, 2);
  }
}

[END OF FILE: frontend\src\app\components\github-test\github-test.ts]

--------------------------------------------------------------------------------
FILE: frontend\src\app\components\header\header.component.ts
SIZE: 10655 bytes (10.4 KB)
--------------------------------------------------------------------------------
// File: frontend/src/app/components/header/header.component.ts
import { Component, OnInit } from '@angular/core';
import { CommonModule } from '@angular/common';
import { RouterModule } from '@angular/router';
import { AuthService, User } from '../../services/auth.service';

@Component({
  selector: 'app-header',
  standalone: true,
  imports: [CommonModule, RouterModule],
  template: `
    <header class="warm-header sticky top-0 z-50 fade-in">
      <nav class="container">
        <div class="flex justify-between items-center py-4">
          <!-- Logo - Warm and friendly -->
          <div class="flex items-center space-x-3">
            <div class="w-12 h-12 bg-gradient rounded-xl flex items-center justify-center shadow-lg warm-logo">
              <div class="w-6 h-6 bg-white rounded-sm flex items-center justify-center">
                <span class="text-warm-orange font-bold text-sm">CV</span>
              </div>
            </div>
            <div>
              <h1 class="text-xl font-bold warm-text-primary">CVLanding</h1>
              <p class="text-sm warm-text-secondary -mt-1">Create • Share • Shine</p>
            </div>
          </div>

          <!-- Navigation - Clean and readable -->
          <div class="hidden md:flex items-center space-x-2">
            <a routerLink="/home" 
               routerLinkActive="active" 
               [routerLinkActiveOptions]="{exact: true}"
               class="warm-nav-link">
              Home
            </a>
            
            <a *ngIf="user" 
               routerLink="/dashboard" 
               routerLinkActive="active"
               class="warm-nav-link">
              Dashboard
            </a>

            <a *ngIf="user" 
               routerLink="/upload" 
               routerLinkActive="active"
               class="warm-nav-link">
              Create
            </a>

            <a *ngIf="!user" 
               routerLink="/test" 
               routerLinkActive="active"
               class="warm-nav-link">
              Test API
            </a>
          </div>

          <!-- User Actions - Warm styling -->
          <div class="flex items-center space-x-3">
            <!-- Mobile Menu Button -->
            <button *ngIf="!user" 
                    (click)="toggleMobileMenu()" 
                    class="md:hidden warm-btn-ghost p-2">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
              </svg>
            </button>

            <!-- Auth Buttons -->
            <div *ngIf="!user" class="hidden md:flex items-center space-x-3">
              <a routerLink="/login" class="warm-btn-secondary">
                Sign In
              </a>
              <a routerLink="/login" class="warm-btn-primary">
                Get Started
              </a>
            </div>

            <!-- User Menu -->
            <div *ngIf="user" class="flex items-center space-x-3">
              <div class="hidden md:flex items-center space-x-3">
                <div class="w-10 h-10 rounded-full overflow-hidden ring-2 ring-warm-coral shadow-md">
                  <img [src]="user.picture" [alt]="user.name" class="w-full h-full object-cover">
                </div>
                <div class="hidden lg:block">
                  <p class="text-sm font-semibold warm-text-primary">{{ getFirstName(user.name) }}</p>
                  <p class="text-xs warm-text-secondary">{{ user.email }}</p>
                </div>
              </div>
              
              <div class="relative">
                <button (click)="toggleUserMenu()" 
                        class="warm-btn-ghost p-2"
                        [class.warm-btn-active]="showUserMenu">
                  <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/>
                  </svg>
                </button>
                
                <!-- Dropdown Menu -->
                <div *ngIf="showUserMenu" 
                     class="absolute right-0 mt-2 w-48 warm-dropdown scale-in z-50">
                  <div class="py-2">
                    <a routerLink="/dashboard" 
                       (click)="closeUserMenu()"
                       class="warm-dropdown-item">
                      Dashboard
                    </a>
                    <a routerLink="/upload" 
                       (click)="closeUserMenu()"
                       class="warm-dropdown-item">
                      Create Landing Page
                    </a>
                    <hr class="my-2 border-warm-peach">
                    <button (click)="logout()" 
                            class="warm-dropdown-item text-red-600 hover:bg-red-50 w-full text-left">
                      Sign Out
                    </button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Mobile Menu -->
        <div *ngIf="showMobileMenu && !user" 
             class="md:hidden py-4 border-t border-warm-peach mt-4 slide-up">
          <div class="flex flex-col space-y-2">
            <a routerLink="/home" 
               (click)="closeMobileMenu()"
               class="warm-nav-link">
              Home
            </a>
            <a routerLink="/test" 
               (click)="closeMobileMenu()"
               class="warm-nav-link">
              Test API
            </a>
            <div class="pt-4 flex flex-col space-y-3">
              <a routerLink="/login" 
                 (click)="closeMobileMenu()"
                 class="warm-btn-secondary text-center">
                Sign In
              </a>
              <a routerLink="/login" 
                 (click)="closeMobileMenu()"
                 class="warm-btn-primary text-center">
                Get Started
              </a>
            </div>
          </div>
        </div>
      </nav>
    </header>
  `,
  styles: [`
    /* Component-specific warm styling */
    .warm-header {
      background: linear-gradient(135deg, #ffffff 0%, #fff4f1 100%);
      border-bottom: 3px solid #ff8a65;
      box-shadow: 0 4px 20px rgba(255, 107, 53, 0.1);
    }

    .warm-logo {
      background: linear-gradient(135deg, #ff6b35 0%, #ff8a65 50%, #ffa726 100%);
    }

    .warm-text-primary {
      color: #3e2723;
      background: linear-gradient(135deg, #ff6b35 0%, #ff8a65 100%);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .warm-text-secondary {
      color: #5d4037;
    }

    .warm-nav-link {
      color: #5d4037;
      font-weight: 500;
      padding: 0.75rem 1.25rem;
      border-radius: 12px;
      transition: all 0.3s ease;
      text-decoration: none;
      font-size: 0.9rem;
    }

    .warm-nav-link:hover {
      color: #ff6b35;
      background: rgba(255, 244, 241, 0.8);
      transform: translateY(-1px);
    }

    .warm-nav-link.active {
      color: white;
      background: linear-gradient(135deg, #ff6b35 0%, #ff8a65 100%);
      box-shadow: 0 4px 15px rgba(255, 107, 53, 0.25);
    }

    .warm-btn-primary {
      background: linear-gradient(135deg, #ff6b35 0%, #ff8a65 100%);
      color: white;
      font-weight: 600;
      padding: 0.75rem 1.5rem;
      border-radius: 12px;
      border: none;
      text-decoration: none;
      font-size: 0.9rem;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(255, 107, 53, 0.15);
      display: inline-block;
      text-align: center;
    }

    .warm-btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(255, 107, 53, 0.25);
      filter: brightness(1.05);
    }

    .warm-btn-secondary {
      background: white;
      color: #ff6b35;
      font-weight: 500;
      padding: 0.75rem 1.5rem;
      border: 2px solid #ff8a65;
      border-radius: 12px;
      text-decoration: none;
      font-size: 0.9rem;
      transition: all 0.3s ease;
      display: inline-block;
      text-align: center;
    }

    .warm-btn-secondary:hover {
      background: #fff4f1;
      border-color: #ff6b35;
      transform: translateY(-1px);
    }

    .warm-btn-ghost {
      background: transparent;
      color: #5d4037;
      font-weight: 500;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .warm-btn-ghost:hover {
      background: rgba(255, 244, 241, 0.8);
      color: #ff6b35;
    }

    .warm-btn-active {
      background: rgba(255, 244, 241, 0.8);
      color: #ff6b35;
    }

    .warm-dropdown {
      background: white;
      border: 1px solid rgba(255, 138, 101, 0.2);
      border-radius: 16px;
      box-shadow: 0 8px 30px rgba(255, 107, 53, 0.15);
      backdrop-filter: blur(20px);
    }

    .warm-dropdown-item {
      display: block;
      padding: 0.75rem 1rem;
      color: #5d4037;
      text-decoration: none;
      transition: all 0.3s ease;
      border-radius: 8px;
      margin: 0 0.5rem;
      font-size: 0.9rem;
    }

    .warm-dropdown-item:hover {
      background: #fff4f1;
      color: #ff6b35;
    }

    .ring-warm-coral {
      --tw-ring-color: #ff8a65;
    }

    .border-warm-peach {
      border-color: #ffb4a2;
    }
  `]
})
export class HeaderComponent implements OnInit {
  user: User | null = null;
  showUserMenu = false;
  showMobileMenu = false;

  constructor(private authService: AuthService) {}

  ngOnInit() {
    this.authService.user$.subscribe(user => {
      this.user = user;
      if (user) {
        this.showMobileMenu = false;
      }
    });
  }

  getFirstName(fullName: string): string {
    return fullName?.split(' ')[0] || 'User';
  }

  toggleUserMenu() {
    this.showUserMenu = !this.showUserMenu;
    this.showMobileMenu = false;
  }

  toggleMobileMenu() {
    this.showMobileMenu = !this.showMobileMenu;
    this.showUserMenu = false;
  }

  closeUserMenu() {
    this.showUserMenu = false;
  }

  closeMobileMenu() {
    this.showMobileMenu = false;
  }

  logout() {
    this.authService.logout().subscribe(() => {
      this.showUserMenu = false;
    });
  }
}

[END OF FILE: frontend\src\app\components\header\header.component.ts]

--------------------------------------------------------------------------------
FILE: frontend\src\app\components\login\login.component.ts
SIZE: 9171 bytes (9 KB)
--------------------------------------------------------------------------------
// File: frontend/src/app/components/login/login.component.ts
import { Component, OnInit } from '@angular/core';
import { CommonModule } from '@angular/common';
import { Router } from '@angular/router';
import { AuthService } from '../../services/auth.service';

declare global {
  interface Window {
    google: any;
  }
}

@Component({
  selector: 'app-login',
  standalone: true,
  imports: [CommonModule],
  template: `
    <div class="min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50 py-12 px-4">
      <!-- Background decoration -->
      <div class="absolute inset-0 overflow-hidden -z-10">
        <div class="absolute top-20 left-20 w-72 h-72 bg-blue-300 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse"></div>
        <div class="absolute top-40 right-20 w-72 h-72 bg-purple-300 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse" style="animation-delay: 2s"></div>
        <div class="absolute -bottom-32 left-40 w-72 h-72 bg-pink-300 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse" style="animation-delay: 4s"></div>
      </div>

      <div class="max-w-md w-full">
        <!-- Header -->
        <div class="text-center mb-8 fade-in">
          <div class="w-16 h-16 bg-gradient rounded-xl flex items-center justify-center mx-auto mb-6 shadow-lg">
            <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                    d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
            </svg>
          </div>
          <h1 class="text-3xl font-bold text-gray-900 mb-2">Welcome Back</h1>
          <p class="text-gray-600">
            Sign in to create and manage your professional landing pages
          </p>
        </div>

        <!-- Login Card -->
        <div class="card scale-in">
          <div class="space-y-6">
            <!-- Google Sign In Button -->
            <div>
              <div id="google-signin-button" class="w-full"></div>
            </div>

            <!-- Divider -->
            <div class="relative">
              <div class="absolute inset-0 flex items-center">
                <div class="w-full border-t border-gray-300"></div>
              </div>
              <div class="relative flex justify-center text-sm">
                <span class="px-2 bg-white text-gray-500">Fast & Secure</span>
              </div>
            </div>

            <!-- Features -->
            <div class="space-y-3">
              <div class="flex items-center text-sm text-gray-600">
                <svg class="w-4 h-4 text-green-500 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                </svg>
                Create unlimited landing pages
              </div>
              <div class="flex items-center text-sm text-gray-600">
                <svg class="w-4 h-4 text-green-500 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                </svg>
                AI-powered content generation
              </div>
              <div class="flex items-center text-sm text-gray-600">
                <svg class="w-4 h-4 text-green-500 mr-3 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"/>
                </svg>
                Mobile-responsive designs
              </div>
            </div>

            <!-- Loading State -->
            <div *ngIf="loading" class="text-center py-4">
              <div class="flex items-center justify-center space-x-3">
                <div class="loading-spinner"></div>
                <span class="text-gray-600">Signing you in...</span>
              </div>
            </div>

            <!-- Error Message -->
            <div *ngIf="error" class="status-error">
              <svg class="w-5 h-5 mr-2 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z" clip-rule="evenodd"/>
              </svg>
              <div>
                <h3 class="font-medium">Authentication Error</h3>
                <p class="text-sm mt-1">{{ error }}</p>
              </div>
            </div>
          </div>
        </div>

        <!-- Footer -->
        <div class="text-center mt-8 space-y-4 fade-in">
          <p class="text-sm text-gray-500">
            By signing in, you agree to our 
            <a href="#" class="text-blue-600 hover:text-blue-700 font-medium">Terms of Service</a>
            and 
            <a href="#" class="text-blue-600 hover:text-blue-700 font-medium">Privacy Policy</a>
          </p>
          
          <div class="flex items-center justify-center space-x-6 text-xs text-gray-400">
            <div class="flex items-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd"/>
              </svg>
              256-bit SSL
            </div>
            <div class="flex items-center">
              <svg class="w-3 h-3 mr-1" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
              </svg>
              Privacy Protected
            </div>
            <div class="flex items-center">
              <div class="w-2 h-2 bg-green-500 rounded-full mr-2"></div>
              Secure
            </div>
          </div>
        </div>
      </div>
    </div>
  `
})
export class LoginComponent implements OnInit {
  loading = false;
  error: string | null = null;

  constructor(
    private authService: AuthService,
    private router: Router
  ) {}

  ngOnInit() {
    this.loadGoogleSignIn();
  }

  private loadGoogleSignIn() {
    this.createMockGoogleButton();
  }

  private createMockGoogleButton() {
    const button = document.getElementById('google-signin-button');
    if (button) {
      button.innerHTML = `
        <button class="w-full flex justify-center items-center px-4 py-3 border border-gray-300 rounded-lg shadow-sm bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all duration-200 hover:shadow-md">
          <svg class="w-5 h-5 mr-3" viewBox="0 0 24 24">
            <path fill="#4285f4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
            <path fill="#34a853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
            <path fill="#fbbc05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
            <path fill="#ea4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
          </svg>
          Continue with Google
        </button>
      `;
      
      const btn = button.querySelector('button');
      if (btn) {
        btn.addEventListener('click', () => this.mockGoogleLogin());
      }
    }
  }

  private mockGoogleLogin() {
    this.loading = true;
    this.error = null;

    const mockCredential = 'mock_google_jwt_token_for_testing';
    
    setTimeout(() => {
      this.authService.login(mockCredential).subscribe({
        next: (response) => {
          this.loading = false;
          if (response.success) {
            this.router.navigate(['/dashboard']);
          } else {
            this.error = 'Login failed. Please try again.';
          }
        },
        error: (error) => {
          this.loading = false;
          this.error = error.error?.message || 'An error occurred during login.';
        }
      });
    }, 1500);
  }
}

[END OF FILE: frontend\src\app\components\login\login.component.ts]

--------------------------------------------------------------------------------
FILE: frontend\src\app\components\preview-modal\preview-modal.component.ts
SIZE: 8393 bytes (8.2 KB)
--------------------------------------------------------------------------------
// File: frontend/src/app/components/preview-modal/preview-modal.component.ts
// Complete preview modal component from scratch

import { Component, Input, Output, EventEmitter, OnInit, OnChanges } from '@angular/core';
import { CommonModule } from '@angular/common';
import { DomSanitizer, SafeResourceUrl } from '@angular/platform-browser';

@Component({
  selector: 'app-preview-modal',
  standalone: true,
  imports: [CommonModule],
  template: `
    <!-- Modal Overlay -->
    <div *ngIf="isOpen" class="fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-50">
      
      <!-- Modal Content -->
      <div class="relative w-full max-w-6xl bg-white rounded-lg shadow-xl max-h-[90vh] overflow-hidden">
        
        <!-- Header -->
        <div class="flex items-center justify-between p-4 border-b border-gray-200">
          <h3 class="text-lg font-semibold text-gray-900">Website Preview</h3>
          
          <!-- Device Toggle -->
          <div class="flex items-center space-x-2 bg-gray-100 rounded-lg p-1">
            <button
              (click)="setDevice('desktop')"
              [class.bg-white]="device === 'desktop'"
              [class.shadow-sm]="device === 'desktop'"
              class="px-3 py-1 rounded text-sm font-medium text-gray-700">
              Desktop
            </button>
            <button
              (click)="setDevice('tablet')"
              [class.bg-white]="device === 'tablet'"
              [class.shadow-sm]="device === 'tablet'"
              class="px-3 py-1 rounded text-sm font-medium text-gray-700">
              Tablet
            </button>
            <button
              (click)="setDevice('mobile')"
              [class.bg-white]="device === 'mobile'"
              [class.shadow-sm]="device === 'mobile'"
              class="px-3 py-1 rounded text-sm font-medium text-gray-700">
              Mobile
            </button>
          </div>
          
          <!-- Actions -->
          <div class="flex items-center space-x-3">
            <button
              (click)="downloadWebsite()"
              [disabled]="isDownloading"
              class="px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded hover:bg-blue-700 disabled:opacity-50">
              {{ isDownloading ? 'Downloading...' : 'Download' }}
            </button>
            <button
              (click)="closeModal()"
              class="p-2 text-gray-400 hover:text-gray-600 rounded">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
              </svg>
            </button>
          </div>
        </div>
        
        <!-- Preview Area -->
        <div class="p-4 bg-gray-50">
          
          <!-- Loading State -->
          <div *ngIf="isLoading" class="flex items-center justify-center h-96">
            <div class="text-center">
              <div class="animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto mb-4"></div>
              <p class="text-gray-600">Loading preview...</p>
            </div>
          </div>
          
          <!-- Error State -->
          <div *ngIf="error" class="flex items-center justify-center h-96">
            <div class="text-center text-red-600">
              <p class="font-medium">Preview Error</p>
              <p class="text-sm mt-1">{{ error }}</p>
              <button 
                (click)="loadPreview()" 
                class="mt-3 px-4 py-2 bg-red-600 text-white text-sm rounded hover:bg-red-700">
                Try Again
              </button>
            </div>
          </div>
          
          <!-- Preview Content -->
          <div *ngIf="!isLoading && !error" class="flex justify-center">
            <div [ngClass]="getDeviceClasses()" class="bg-white rounded-lg shadow-lg overflow-hidden">
              <iframe
                [src]="previewUrl"
                class="w-full border-0"
                [style.height]="getDeviceHeight()"
                frameborder="0">
              </iframe>
            </div>
          </div>
          
        </div>
        
        <!-- Footer -->
        <div class="px-4 py-3 bg-gray-50 border-t border-gray-200">
          <div class="flex items-center justify-between">
            <p class="text-sm text-gray-600">Your landing page is ready to download and deploy</p>
            <div class="flex space-x-3">
              <button 
                (click)="closeModal()" 
                class="px-4 py-2 border border-gray-300 text-gray-700 text-sm font-medium rounded hover:bg-gray-50">
                Close
              </button>
              <button 
                (click)="downloadWebsite()" 
                [disabled]="isDownloading"
                class="px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded hover:bg-blue-700 disabled:opacity-50">
                Download Files
              </button>
            </div>
          </div>
        </div>
        
      </div>
    </div>
  `,
  styles: [`
    /* Modal specific styles */
    .fixed {
      position: fixed;
    }
    
    .inset-0 {
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
    }
    
    .z-50 {
      z-index: 50;
    }
    
    .bg-black {
      background-color: rgb(0 0 0);
    }
    
    .bg-opacity-50 {
      background-color: rgb(0 0 0 / 0.5);
    }
    
    .animate-spin {
      animation: spin 1s linear infinite;
    }
    
    @keyframes spin {
      from {
        transform: rotate(0deg);
      }
      to {
        transform: rotate(360deg);
      }
    }
  `]
})
export class PreviewModalComponent implements OnInit, OnChanges {
  @Input() isOpen = false;
  @Input() generationId: string | null = null;
  @Output() closeEvent = new EventEmitter<void>();
  @Output() downloadEvent = new EventEmitter<string>();

  isLoading = false;
  error: string | null = null;
  previewUrl: SafeResourceUrl | null = null;
  device: 'desktop' | 'tablet' | 'mobile' = 'desktop';
  isDownloading = false;

  constructor(private sanitizer: DomSanitizer) {}

  ngOnInit() {
    if (this.isOpen && this.generationId) {
      this.loadPreview();
    }
  }

  ngOnChanges() {
    if (this.isOpen && this.generationId) {
      this.loadPreview();
    }
  }

  loadPreview() {
    if (!this.generationId) {
      this.error = 'No generation ID provided';
      return;
    }

    this.isLoading = true;
    this.error = null;

    // Create preview URL
    const url = `http://localhost:3000/api/cv/preview?previewId=${this.generationId}`;
    this.previewUrl = this.sanitizer.bypassSecurityTrustResourceUrl(url);

    // Simulate loading time
    setTimeout(() => {
      this.isLoading = false;
    }, 1000);
  }

  setDevice(device: 'desktop' | 'tablet' | 'mobile') {
    this.device = device;
  }

  getDeviceClasses(): string {
    switch (this.device) {
      case 'desktop':
        return 'w-full max-w-5xl';
      case 'tablet':
        return 'w-full max-w-2xl';
      case 'mobile':
        return 'w-full max-w-sm';
      default:
        return 'w-full';
    }
  }

  getDeviceHeight(): string {
    switch (this.device) {
      case 'desktop':
        return '600px';
      case 'tablet':
        return '700px';
      case 'mobile':
        return '500px';
      default:
        return '600px';
    }
  }

  closeModal() {
    this.closeEvent.emit();
  }

  downloadWebsite() {
    if (!this.generationId || this.isDownloading) return;

    this.isDownloading = true;

    // Create download URL
    const downloadUrl = `http://localhost:3000/api/cv/download?generationId=${this.generationId}`;
    
    // Trigger download
    const link = document.createElement('a');
    link.href = downloadUrl;
    link.download = 'landing-page.zip';
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);

    // Emit download event
    this.downloadEvent.emit(this.generationId);

    // Reset downloading state
    setTimeout(() => {
      this.isDownloading = false;
    }, 2000);
  }
}

[END OF FILE: frontend\src\app\components\preview-modal\preview-modal.component.ts]

--------------------------------------------------------------------------------
FILE: frontend\src\app\pages\dashboard\dashboard.component.ts
SIZE: 14716 bytes (14.4 KB)
--------------------------------------------------------------------------------
// File: frontend/src/app/pages/dashboard/dashboard.component.ts
import { Component, OnInit } from '@angular/core';
import { CommonModule } from '@angular/common';
import { RouterModule } from '@angular/router';
import { AuthService, User } from '../../services/auth.service';

interface ProjectStats {
  total: number;
  published: number;
  drafts: number;
  views: number;
}

interface RecentProject {
  id: string;
  name: string;
  status: 'published' | 'draft' | 'processing';
  createdAt: string;
  views: number;
  url?: string;
}

@Component({
  selector: 'app-dashboard',
  standalone: true,
  imports: [CommonModule, RouterModule],
  template: `
    <div class="container section-padding">
      <!-- Welcome Section -->
      <div class="mb-8 fade-in">
        <div class="flex flex-col md:flex-row md:items-center md:justify-between">
          <div>
            <h1 class="text-3xl font-bold text-gray-900 mb-2">
              Welcome back, {{ getFirstName() }}! 👋
            </h1>
            <p class="text-gray-600">
              Manage your CV landing pages and track their performance
            </p>
          </div>
          <div class="mt-4 md:mt-0">
            <a routerLink="/upload" class="btn-primary">
              <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4"/>
              </svg>
              Create New
            </a>
          </div>
        </div>
      </div>

      <!-- Stats Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
        <div class="card-minimal slide-up" style="animation-delay: 0.1s">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-sm font-medium text-gray-600">Total Projects</p>
              <p class="text-2xl font-bold text-gray-900">{{ stats.total }}</p>
            </div>
            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
              <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
              </svg>
            </div>
          </div>
        </div>

        <div class="card-minimal slide-up" style="animation-delay: 0.2s">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-sm font-medium text-gray-600">Published</p>
              <p class="text-2xl font-bold text-green-600">{{ stats.published }}</p>
            </div>
            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
              <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M5 13l4 4L19 7"/>
              </svg>
            </div>
          </div>
        </div>

        <div class="card-minimal slide-up" style="animation-delay: 0.3s">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-sm font-medium text-gray-600">Drafts</p>
              <p class="text-2xl font-bold text-yellow-600">{{ stats.drafts }}</p>
            </div>
            <div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center">
              <svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/>
              </svg>
            </div>
          </div>
        </div>

        <div class="card-minimal slide-up" style="animation-delay: 0.4s">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-sm font-medium text-gray-600">Total Views</p>
              <p class="text-2xl font-bold text-purple-600">{{ stats.views }}</p>
            </div>
            <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
              <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/>
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>
              </svg>
            </div>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
        <div class="card slide-up" style="animation-delay: 0.5s">
          <div class="text-center">
            <div class="w-16 h-16 bg-gradient rounded-xl flex items-center justify-center mx-auto mb-4">
              <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
              </svg>
            </div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">Upload New CV</h3>
            <p class="text-gray-600 text-sm mb-4">
              Generate a professional landing page from your latest CV
            </p>
            <a routerLink="/upload" class="btn-primary w-full">
              Get Started
            </a>
          </div>
        </div>

        <div class="card slide-up" style="animation-delay: 0.6s">
          <div class="text-center">
            <div class="w-16 h-16 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-4">
              <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
              </svg>
            </div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">View Analytics</h3>
            <p class="text-gray-600 text-sm mb-4">
              Track views, clicks, and engagement on your landing pages
            </p>
            <button class="btn-secondary w-full" disabled>
              Coming Soon
            </button>
          </div>
        </div>

        <div class="card slide-up" style="animation-delay: 0.7s">
          <div class="text-center">
            <div class="w-16 h-16 bg-purple-100 rounded-xl flex items-center justify-center mx-auto mb-4">
              <svg class="w-8 h-8 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"/>
              </svg>
            </div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">Browse Templates</h3>
            <p class="text-gray-600 text-sm mb-4">
              Explore different design templates for your landing page
            </p>
            <button class="btn-secondary w-full" disabled>
              Coming Soon
            </button>
          </div>
        </div>
      </div>

      <!-- Recent Projects -->
      <div class="card slide-up" style="animation-delay: 0.8s">
        <div class="flex items-center justify-between mb-6">
          <h2 class="text-xl font-semibold text-gray-900">Recent Projects</h2>
          <button class="btn-ghost text-sm">View All</button>
        </div>

        <div *ngIf="recentProjects.length === 0" class="text-center py-12">
          <div class="w-16 h-16 bg-gray-100 rounded-xl flex items-center justify-center mx-auto mb-4">
            <svg class="w-8 h-8 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                    d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
            </svg>
          </div>
          <h3 class="text-lg font-medium text-gray-900 mb-2">No projects yet</h3>
          <p class="text-gray-600 mb-4">Create your first CV landing page to get started</p>
          <a routerLink="/upload" class="btn-primary">
            Create Your First Project
          </a>
        </div>

        <div *ngIf="recentProjects.length > 0" class="space-y-4">
          <div *ngFor="let project of recentProjects; trackBy: trackByProjectId" 
               class="flex items-center justify-between p-4 rounded-lg border border-gray-200 hover:border-gray-300 transition-colors">
            <div class="flex items-center space-x-4">
              <div class="w-10 h-10 rounded-lg flex items-center justify-center"
                   [class.bg-green-100]="project.status === 'published'"
                   [class.bg-yellow-100]="project.status === 'draft'"
                   [class.bg-blue-100]="project.status === 'processing'">
                <svg class="w-5 h-5"
                     [class.text-green-600]="project.status === 'published'"
                     [class.text-yellow-600]="project.status === 'draft'"
                     [class.text-blue-600]="project.status === 'processing'"
                     fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path *ngIf="project.status === 'published'" 
                        stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                        d="M5 13l4 4L19 7"/>
                  <path *ngIf="project.status === 'draft'" 
                        stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                        d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/>
                  <path *ngIf="project.status === 'processing'" 
                        stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                        d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"/>
                </svg>
              </div>
              <div>
                <h4 class="font-medium text-gray-900">{{ project.name }}</h4>
                <div class="flex items-center space-x-4 text-sm text-gray-500">
                  <span class="capitalize">{{ project.status }}</span>
                  <span>•</span>
                  <span>{{ formatDate(project.createdAt) }}</span>
                  <span>•</span>
                  <span>{{ project.views }} views</span>
                </div>
              </div>
            </div>
            <div class="flex items-center space-x-2">
              <button *ngIf="project.status === 'published' && project.url" 
                      class="btn-ghost p-2"
                      title="View Live">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                        d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
                </svg>
              </button>
              <button class="btn-ghost p-2" title="Edit">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                        d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/>
                </svg>
              </button>
              <button class="btn-ghost p-2 text-red-600" title="Delete">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                        d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/>
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  `
})
export class DashboardComponent implements OnInit {
  user: User | null = null;
  stats: ProjectStats = {
    total: 0,
    published: 0,
    drafts: 0,
    views: 0
  };
  recentProjects: RecentProject[] = [];

  constructor(private authService: AuthService) {}

  ngOnInit() {
    this.authService.user$.subscribe(user => {
      this.user = user;
    });
    
    // Load dashboard data
    this.loadDashboardData();
  }

  getFirstName(): string {
    return this.user?.name?.split(' ')[0] || 'User';
  }

  loadDashboardData() {
    // Mock data for now - replace with actual API calls
    this.stats = {
      total: 0,
      published: 0,
      drafts: 0,
      views: 0
    };
    
    this.recentProjects = [];
  }

  trackByProjectId(index: number, project: RecentProject): string {
    return project.id;
  }

  formatDate(dateString: string): string {
    const date = new Date(dateString);
    const now = new Date();
    const diffTime = Math.abs(now.getTime() - date.getTime());
    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
    
    if (diffDays === 1) {
      return 'Yesterday';
    } else if (diffDays < 7) {
      return `${diffDays} days ago`;
    } else {
      return date.toLocaleDateString();
    }
  }
}

[END OF FILE: frontend\src\app\pages\dashboard\dashboard.component.ts]

--------------------------------------------------------------------------------
FILE: frontend\src\app\pages\home\home.component.ts
SIZE: 14389 bytes (14.1 KB)
--------------------------------------------------------------------------------
// File: frontend/src/app/pages/home/home.component.ts
import { Component } from '@angular/core';
import { CommonModule } from '@angular/common';
import { RouterModule } from '@angular/router';

@Component({
  selector: 'app-home',
  standalone: true,
  imports: [CommonModule, RouterModule],
  template: `
    <!-- Hero Section -->
    <section class="relative overflow-hidden bg-gradient-to-br from-blue-50 via-white to-purple-50 py-20">
      <div class="container">
        <div class="max-w-4xl mx-auto text-center fade-in">
          <div class="mb-8">
            <div class="inline-flex items-center px-4 py-2 bg-white/80 rounded-full shadow-sm border border-gray-200 mb-6">
              <span class="w-2 h-2 bg-green-500 rounded-full mr-2"></span>
              <span class="text-sm font-medium text-gray-700">AI-Powered • Fast • Professional</span>
            </div>
            
            <h1 class="text-5xl md:text-6xl font-bold mb-6">
              <span class="text-gray-900">Transform Your</span>
              <br>
              <span class="text-gradient">CV into a Stunning</span>
              <br>
              <span class="text-gray-900">Landing Page</span>
            </h1>
            
            <p class="text-xl text-gray-600 max-w-2xl mx-auto mb-8 leading-relaxed">
              Upload your CV and let our AI create a beautiful, responsive landing page that showcases your professional story in minutes.
            </p>
            
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
              <a routerLink="/upload" class="btn-primary text-lg px-8 py-4">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                </svg>
                Create Your Landing Page
              </a>
              <button class="btn-secondary text-lg px-8 py-4">
                <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
                See Examples
              </button>
            </div>
          </div>
          
          <!-- Stats -->
          <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mt-16">
            <div class="text-center slide-up" style="animation-delay: 0.2s">
              <div class="text-3xl font-bold text-gradient mb-2">< 2 min</div>
              <div class="text-gray-600">Average Creation Time</div>
            </div>
            <div class="text-center slide-up" style="animation-delay: 0.4s">
              <div class="text-3xl font-bold text-gradient mb-2">100%</div>
              <div class="text-gray-600">Mobile Responsive</div>
            </div>
            <div class="text-center slide-up" style="animation-delay: 0.6s">
              <div class="text-3xl font-bold text-gradient mb-2">AI</div>
              <div class="text-gray-600">Powered Content</div>
            </div>
          </div>
        </div>
      </div>
      
      <!-- Background decoration -->
      <div class="absolute top-0 left-0 w-full h-full overflow-hidden -z-10">
        <div class="absolute top-20 left-20 w-72 h-72 bg-blue-300 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse"></div>
        <div class="absolute top-40 right-20 w-72 h-72 bg-purple-300 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse" style="animation-delay: 2s"></div>
        <div class="absolute -bottom-32 left-40 w-72 h-72 bg-pink-300 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-pulse" style="animation-delay: 4s"></div>
      </div>
    </section>

    <!-- How It Works -->
    <section class="section-padding bg-white">
      <div class="container">
        <div class="text-center mb-16 fade-in">
          <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
            How It Works
          </h2>
          <p class="text-xl text-gray-600 max-w-2xl mx-auto">
            Create your professional landing page in just three simple steps
          </p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-8 lg:gap-12">
          <!-- Step 1 -->
          <div class="text-center slide-up" style="animation-delay: 0.1s">
            <div class="w-20 h-20 bg-gradient rounded-xl flex items-center justify-center mx-auto mb-6 shadow-lg">
              <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"/>
              </svg>
            </div>
            <h3 class="text-xl font-semibold text-gray-900 mb-3">1. Upload Your CV</h3>
            <p class="text-gray-600 leading-relaxed">
              Simply drag and drop your CV file (PDF, DOC, or DOCX) and optionally add a professional photo
            </p>
          </div>
          
          <!-- Step 2 -->
          <div class="text-center slide-up" style="animation-delay: 0.3s">
            <div class="w-20 h-20 bg-gradient rounded-xl flex items-center justify-center mx-auto mb-6 shadow-lg">
              <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a9 9 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
              </svg>
            </div>
            <h3 class="text-xl font-semibold text-gray-900 mb-3">2. AI Magic</h3>
            <p class="text-gray-600 leading-relaxed">
              Our AI analyzes your CV and generates compelling, professional content optimized for web presentation
            </p>
          </div>
          
          <!-- Step 3 -->
          <div class="text-center slide-up" style="animation-delay: 0.5s">
            <div class="w-20 h-20 bg-gradient rounded-xl flex items-center justify-center mx-auto mb-6 shadow-lg">
              <svg class="w-10 h-10 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9"/>
              </svg>
            </div>
            <h3 class="text-xl font-semibold text-gray-900 mb-3">3. Customize & Launch</h3>
            <p class="text-gray-600 leading-relaxed">
              Review, edit your content, and launch your beautiful, mobile-responsive professional landing page
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Features -->
    <section class="section-padding bg-gray-50">
      <div class="container">
        <div class="text-center mb-16 fade-in">
          <h2 class="text-3xl md:text-4xl font-bold text-gray-900 mb-4">
            Why Choose CVLanding?
          </h2>
          <p class="text-xl text-gray-600 max-w-2xl mx-auto">
            Professional features designed to make you stand out
          </p>
        </div>
        
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
          <!-- Feature 1 -->
          <div class="card-compact text-center slide-up" style="animation-delay: 0.1s">
            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-4">
              <svg class="w-6 h-6 text-blue-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"/>
              </svg>
            </div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">Mobile Responsive</h3>
            <p class="text-gray-600 text-sm">Perfect on any device - desktop, tablet, or mobile</p>
          </div>
          
          <!-- Feature 2 -->
          <div class="card-compact text-center slide-up" style="animation-delay: 0.2s">
            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-4">
              <svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M13 10V3L4 14h7v7l9-11h-7z"/>
              </svg>
            </div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">Lightning Fast</h3>
            <p class="text-gray-600 text-sm">Generate your landing page in under 2 minutes</p>
          </div>
          
          <!-- Feature 3 -->
          <div class="card-compact text-center slide-up" style="animation-delay: 0.3s">
            <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-4">
              <svg class="w-6 h-6 text-purple-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a9 9 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
              </svg>
            </div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">AI-Powered</h3>
            <p class="text-gray-600 text-sm">Smart content generation that understands your career</p>
          </div>
          
          <!-- Feature 4 -->
          <div class="card-compact text-center slide-up" style="animation-delay: 0.4s">
            <div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center mx-auto mb-4">
              <svg class="w-6 h-6 text-yellow-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2.5 2.5 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
              </svg>
            </div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">Fully Customizable</h3>
            <p class="text-gray-600 text-sm">Edit and personalize every section to match your style</p>
          </div>
          
          <!-- Feature 5 -->
          <div class="card-compact text-center slide-up" style="animation-delay: 0.5s">
            <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center mx-auto mb-4">
              <svg class="w-6 h-6 text-red-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
              </svg>
            </div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">Professional Design</h3>
            <p class="text-gray-600 text-sm">Clean, modern templates that impress employers</p>
          </div>
          
          <!-- Feature 6 -->
          <div class="card-compact text-center slide-up" style="animation-delay: 0.6s">
            <div class="w-12 h-12 bg-indigo-100 rounded-lg flex items-center justify-center mx-auto mb-4">
              <svg class="w-6 h-6 text-indigo-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                      d="M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"/>
              </svg>
            </div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">Easy Sharing</h3>
            <p class="text-gray-600 text-sm">Share your landing page with a simple, clean URL</p>
          </div>
        </div>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="section-padding bg-gradient-to-r from-blue-600 to-purple-600">
      <div class="container">
        <div class="text-center text-white fade-in">
          <h2 class="text-3xl md:text-4xl font-bold mb-4">
            Ready to Create Your Professional Landing Page?
          </h2>
          <p class="text-xl text-blue-100 max-w-2xl mx-auto mb-8">
            Join thousands of professionals who have transformed their careers with stunning landing pages
          </p>
          <div class="flex flex-col sm:flex-row gap-4 justify-center">
            <a routerLink="/upload" class="bg-white text-blue-600 hover:bg-gray-50 font-semibold py-4 px-8 rounded-lg transition-colors text-lg">
              Get Started Free
            </a>
            <a routerLink="/login" class="border-2 border-white text-white hover:bg-white hover:text-blue-600 font-semibold py-4 px-8 rounded-lg transition-colors text-lg">
              Sign In
            </a>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer CTA -->
    <section class="py-12 bg-white border-t border-gray-200">
      <div class="container">
        <div class="text-center">
          <p class="text-gray-600 mb-4">
            Transform your CV into a stunning landing page in minutes
          </p>
          <a routerLink="/upload" class="btn-primary">
            Start Creating Now
          </a>
        </div>
      </div>
    </section>
  `
})
export class HomeComponent {
}

[END OF FILE: frontend\src\app\pages\home\home.component.ts]

--------------------------------------------------------------------------------
FILE: frontend\src\app\pages\sites\sites.component.ts
SIZE: 3829 bytes (3.7 KB)
--------------------------------------------------------------------------------
import { Component, OnInit } from '@angular/core';
import { CommonModule } from '@angular/common';
import { HttpClient } from '@angular/common/http';
import { Router } from '@angular/router';

interface Site {
  id: number;
  site_name: string;
  repo_name: string;
  github_url: string;
  pages_url: string;
  vercel_url: string;
  deployment_status: 'pending' | 'deploying' | 'deployed' | 'failed';
  created_at: string;
  updated_at: string;
}

@Component({
  selector: 'app-sites',
  standalone: true,
  imports: [CommonModule],
  templateUrl: 'sites.component.html',
  styleUrls: ['sites.component.scss']
})
export class SitesComponent implements OnInit {
  sites: Site[] = [];
  loading = true;
  hasGitHubConnection = false;
  error: string | null = null;

  constructor(
    private http: HttpClient,
    private router: Router
  ) {}

  ngOnInit() {
    this.loadSites();
  }

  async loadSites() {
    try {
      this.loading = true;
      this.error = null;

      // Get current user ID (you'll need to implement this based on your auth system)
      const userId = this.getCurrentUserId();
      
      const response = await this.http.get<any>(`/api/sites/list?userId=${userId}`).toPromise();
      
      this.sites = response.sites;
      this.hasGitHubConnection = response.hasGitHubConnection;

    } catch (error: any) {
      console.error('Failed to load sites:', error);
      this.error = 'Failed to load your sites. Please try again.';
    } finally {
      this.loading = false;
    }
  }

  async connectGitHub() {
    try {
      const userId = this.getCurrentUserId();
      
      const response = await this.http.post<any>('/api/github/connect', { userId }).toPromise();
      
      if (response.oauthUrl) {
        // Redirect to GitHub OAuth
        window.location.href = response.oauthUrl;
      }

    } catch (error: any) {
      console.error('Failed to initiate GitHub connection:', error);
      alert('Failed to connect to GitHub. Please try again.');
    }
  }

  async deleteSite(site: Site) {
    if (!confirm(`Are you sure you want to delete "${site.site_name}"? This will also delete the GitHub repository.`)) {
      return;
    }

    try {
      const userId = this.getCurrentUserId();
      
      await this.http.delete('/api/sites/delete', {
        body: { siteId: site.id, userId }
      }).toPromise();

      // Remove from local list
      this.sites = this.sites.filter(s => s.id !== site.id);
      
      alert('Site deleted successfully!');

    } catch (error: any) {
      console.error('Failed to delete site:', error);
      alert('Failed to delete site. Please try again.');
    }
  }

  createNewSite() {
    // Navigate to CV upload/processing page
    this.router.navigate(['/cv-wizard']);
  }

  getStatusClass(status: string): string {
    switch (status) {
      case 'deployed': return 'text-green-600 bg-green-100';
      case 'deploying': return 'text-blue-600 bg-blue-100';
      case 'pending': return 'text-yellow-600 bg-yellow-100';
      case 'failed': return 'text-red-600 bg-red-100';
      default: return 'text-gray-600 bg-gray-100';
    }
  }

  getStatusText(status: string): string {
    switch (status) {
      case 'deployed': return 'Live';
      case 'deploying': return 'Deploying...';
      case 'pending': return 'Pending';
      case 'failed': return 'Failed';
      default: return 'Unknown';
    }
  }

  formatDate(dateString: string): string {
    return new Date(dateString).toLocaleDateString();
  }

  private getCurrentUserId(): string {
    // Implement this based on your authentication system
    // For now, returning a placeholder
    return localStorage.getItem('userId') || '1';
  }
}

[END OF FILE: frontend\src\app\pages\sites\sites.component.ts]

--------------------------------------------------------------------------------
FILE: frontend\src\app\pages\upload\upload.component.ts
SIZE: 1606 bytes (1.6 KB)
--------------------------------------------------------------------------------
// File: frontend/src/app/pages/upload/upload.component.ts
import { Component, OnInit } from '@angular/core';
import { Router } from '@angular/router';
import { AuthService } from '../../services/auth.service';
import { CommonModule } from '@angular/common';
import { CVWizardComponent } from '../../components/cv-wizard/cv-wizard.component';

@Component({
  selector: 'app-upload',
  standalone: true,
  imports: [CommonModule, CVWizardComponent],
  template: `
    <div class="min-h-screen bg-gray-50 py-8">
      <div class="container mx-auto px-4">
        <!-- Authentication Check -->
        <div *ngIf="!isAuthenticated" class="max-w-md mx-auto">
          <div class="card text-center">
            <h1 class="text-2xl font-bold text-gray-900 mb-4">Login Required</h1>
            <p class="text-gray-600 mb-6">
              Please log in to upload your CV and generate a landing page.
            </p>
            <button (click)="goToLogin()" class="btn-primary">
              Sign In to Continue
            </button>
          </div>
        </div>

        <!-- CV Wizard -->
        <div *ngIf="isAuthenticated">
          <app-cv-wizard></app-cv-wizard>
        </div>
      </div>
    </div>
  `
})
export class UploadComponent implements OnInit {
  isAuthenticated = false;

  constructor(
    private authService: AuthService,
    private router: Router
  ) {}

  ngOnInit() {
    this.authService.user$.subscribe(user => {
      this.isAuthenticated = !!user;
    });
  }

  goToLogin() {
    this.router.navigate(['/login']);
  }
}

[END OF FILE: frontend\src\app\pages\upload\upload.component.ts]

--------------------------------------------------------------------------------
FILE: frontend\src\app\services\api.service.ts
SIZE: 955 bytes (0.9 KB)
--------------------------------------------------------------------------------
import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';
import { Observable } from 'rxjs';

export interface HealthResponse {
  status: string;
  message: string;
  timestamp: string;
  version: string;
}

export interface TestResponse {
  message: string;
  requestMethod: string;
  queryParams: any;
  requestBody: any;
  timestamp: string;
}

@Injectable({
  providedIn: 'root'
})
export class ApiService {
  private apiUrl = 'http://localhost:3000/api';

  constructor(private http: HttpClient) {}

  checkHealth(): Observable<HealthResponse> {
    return this.http.get<HealthResponse>(`${this.apiUrl}/health`);
  }

  testGet(params?: any): Observable<TestResponse> {
    return this.http.get<TestResponse>(`${this.apiUrl}/test`, { params });
  }

  testPost(data: any): Observable<TestResponse> {
    return this.http.post<TestResponse>(`${this.apiUrl}/test`, data);
  }
}

[END OF FILE: frontend\src\app\services\api.service.ts]

--------------------------------------------------------------------------------
FILE: frontend\src\app\services\auth.service.ts
SIZE: 3043 bytes (3 KB)
--------------------------------------------------------------------------------
import { Injectable } from '@angular/core';
import { HttpClient, HttpHeaders } from '@angular/common/http';
import { BehaviorSubject, Observable } from 'rxjs';

export interface User {
  id: string;
  email: string;
  name: string;
  picture: string;
  verified?: boolean;
}

export interface LoginResponse {
  success: boolean;
  user: User;
  token: string;
  message: string;
}

@Injectable({
  providedIn: 'root'
})
export class AuthService {
  private apiUrl = 'http://localhost:3000/api';
  private tokenKey = 'cv_generator_token';
  private userSubject = new BehaviorSubject<User | null>(null);
  
  public user$ = this.userSubject.asObservable();

  constructor(private http: HttpClient) {
    this.checkExistingLogin();
  }

  private checkExistingLogin() {
    const token = localStorage.getItem(this.tokenKey);
    if (token) {
      this.getCurrentUser().subscribe({
        next: (response) => {
          if (response.success) {
            this.userSubject.next(response.user);
          } else {
            this.logout();
          }
        },
        error: () => {
          this.logout();
        }
      });
    }
  }

  login(credential: string): Observable<LoginResponse> {
    return new Observable(observer => {
      this.http.post<LoginResponse>(`${this.apiUrl}/auth/login`, { credential }).subscribe({
        next: (response) => {
          if (response.success) {
            localStorage.setItem(this.tokenKey, response.token);
            this.userSubject.next(response.user);
          }
          observer.next(response);
          observer.complete();
        },
        error: (error) => {
          observer.error(error);
        }
      });
    });
  }

  logout(): Observable<any> {
    return new Observable(observer => {
      this.http.post(`${this.apiUrl}/auth/logout`, {}).subscribe({
        next: (response) => {
          localStorage.removeItem(this.tokenKey);
          this.userSubject.next(null);
          observer.next(response);
          observer.complete();
        },
        error: (error) => {
          localStorage.removeItem(this.tokenKey);
          this.userSubject.next(null);
          observer.next(true);
          observer.complete();
        }
      });
    });
  }

  getCurrentUser(): Observable<any> {
    const token = localStorage.getItem(this.tokenKey);
    
    if (!token) {
      return new Observable(observer => {
        observer.next({ success: false, error: 'No token' });
        observer.complete();
      });
    }

    const headers = new HttpHeaders({
      'Authorization': `Bearer ${token}`
    });
    
    return this.http.get(`${this.apiUrl}/auth/user`, { headers });
  }

  isLoggedIn(): boolean {
    return !!localStorage.getItem(this.tokenKey) && !!this.userSubject.value;
  }

  getUser(): User | null {
    return this.userSubject.value;
  }

  getToken(): string | null {
    return localStorage.getItem(this.tokenKey);
  }
}

[END OF FILE: frontend\src\app\services\auth.service.ts]

--------------------------------------------------------------------------------
FILE: frontend\src\app\services\cv-processing.service.ts
SIZE: 13104 bytes (12.8 KB)
--------------------------------------------------------------------------------
// File: frontend/src/app/services/cv-processing.service.ts
import { Injectable } from '@angular/core';
import { HttpClient, HttpHeaders } from '@angular/common/http';
import { Observable, Subject } from 'rxjs';
import { AuthService } from './auth.service';

export interface ProcessingPhase {
    name: string;
    status: 'pending' | 'processing' | 'completed' | 'error';
}

export interface CVProcessingResult {
    success: boolean;
    data: any;
    message?: string;
}

export interface ProcessingProgress {
    currentPhase: number;
    totalPhases: number;
    phases: ProcessingPhase[];
    completed: boolean;
    error?: string;
}

@Injectable({
    providedIn: 'root'
})
export class CVProcessingService {
    private apiUrl = 'http://localhost:3000/api';
    private progressSubject = new Subject<ProcessingProgress>();

    public progress$ = this.progressSubject.asObservable();

    private phases: ProcessingPhase[] = [
        { name: 'Uploading CV file', status: 'pending' },
        { name: 'Extracting text content', status: 'pending' },
        { name: 'Processing personal information', status: 'pending' },
        { name: 'Generating about me content', status: 'pending' },
        { name: 'Extracting work experience', status: 'pending' },
        { name: 'Organizing skills and expertise', status: 'pending' },
        { name: 'Processing education background', status: 'pending' },
        { name: 'Finding projects and portfolio', status: 'pending' },
        { name: 'Extracting certifications', status: 'pending' }
    ];

    constructor(
        private http: HttpClient,
        private authService: AuthService
    ) { }

    async processCV(file: File, profilePicture?: string): Promise<CVProcessingResult> {
        try {
            // Reset phases
            this.resetPhases();

            // Phase 1: Upload file
            this.updatePhase(0, 'processing');
            await this.delay(300);
            const uploadResult = await this.uploadFile(file);
            this.updatePhase(0, 'completed');

            if (!uploadResult.success) {
                throw new Error(uploadResult.message || 'Upload failed');
            }

            // Phase 2: Start actual processing
            this.updatePhase(1, 'processing');
            await this.delay(500);
            this.updatePhase(1, 'completed');

            // Simulate individual processing phases
            const phaseNames = [
                'Processing personal information',
                'Generating about me content',
                'Extracting work experience',
                'Organizing skills and expertise',
                'Processing education background',
                'Finding projects and portfolio',
                'Extracting certifications'
            ];

            // Start actual backend processing (non-blocking)
            const processPromise = this.processCVFile(uploadResult.file.id);

            // Simulate phases with realistic timing
            for (let i = 2; i < this.phases.length; i++) {
                this.updatePhase(i, 'processing');
                await this.delay(800 + Math.random() * 400); // Random 800-1200ms
                this.updatePhase(i, 'completed');
            }

            // Wait for actual processing to complete
            const processResult = await processPromise;

            if (!processResult.success) {
                throw new Error(processResult.message || 'Processing failed');
            }

            // Add profile picture if provided
            if (profilePicture && processResult.structuredData) {
                processResult.structuredData.personalInfo = {
                    ...processResult.structuredData.personalInfo,
                    profilePicture: profilePicture
                };
            }

            // Mark as completed
            this.progressSubject.next({
                currentPhase: this.phases.length,
                totalPhases: this.phases.length,
                phases: [...this.phases],
                completed: true
            });

            return {
                success: true,
                data: processResult.structuredData
            };

        } catch (error) {
            const currentPhase = this.phases.findIndex(p => p.status === 'processing');
            if (currentPhase >= 0) {
                this.phases[currentPhase].status = 'error';
            }

            this.progressSubject.next({
                currentPhase: currentPhase,
                totalPhases: this.phases.length,
                phases: [...this.phases],
                completed: false,
                error: (error as Error).message
            });

            return {
                success: false,
                data: null,
                message: (error as Error).message
            };
        }
    }

    private resetPhases() {
        this.phases.forEach(phase => phase.status = 'pending');
        this.progressSubject.next({
            currentPhase: 0,
            totalPhases: this.phases.length,
            phases: [...this.phases],
            completed: false
        });
    }

    private updatePhase(index: number, status: ProcessingPhase['status']) {
        if (index >= 0 && index < this.phases.length) {
            this.phases[index].status = status;
            this.progressSubject.next({
                currentPhase: index,
                totalPhases: this.phases.length,
                phases: [...this.phases],
                completed: false
            });
        }
    }

    private uploadFile(file: File): Promise<any> {
        return new Promise((resolve, reject) => {
            const formData = new FormData();
            formData.append('cvFile', file);

            // Get auth headers but don't set Content-Type for file uploads
            const token = this.authService.getToken();
            const headers = new HttpHeaders({
                'Authorization': `Bearer ${token}`
                // Don't set Content-Type - let browser set it with boundary
            });

            this.http.post(`${this.apiUrl}/cv/upload`, formData, { headers }).subscribe({
                next: (response) => resolve(response),
                error: (error) => reject(new Error(error.error?.message || 'Upload failed'))
            });
        });
    }

    private processCVFile(fileId: string): Promise<any> {
        return new Promise((resolve, reject) => {
            const headers = this.getAuthHeaders();

            this.http.post(`${this.apiUrl}/cv/process`, { fileId }, { headers }).subscribe({
                next: (response) => resolve(response),
                error: (error) => reject(new Error(error.error?.message || 'Processing failed'))
            });
        });
    }

    private getAuthHeaders(): HttpHeaders {
        const token = this.authService.getToken();
        return new HttpHeaders({
            'Authorization': `Bearer ${token}`,
            'Content-Type': 'application/json'
        });
    }

    private delay(ms: number): Promise<void> {
        return new Promise(resolve => setTimeout(resolve, ms));
    }

    // Updated method to convert CV data to editable sections
    convertToEditableSections(cvData: any): { id: string, title: string, content: string }[] {
        const sections = [];

        // Summary section
        if (cvData.personalInfo?.summary) {
            sections.push({
                id: 'summary',
                title: 'Professional Summary',
                content: cvData.personalInfo.summary
            });
        }

        // About Me section  
        if (cvData.personalInfo?.aboutMe) {
            sections.push({
                id: 'aboutMe',
                title: 'About Me',
                content: cvData.personalInfo.aboutMe
            });
        }

        // Experience section - convert array to editable text
        if (cvData.experience?.length > 0) {
            const experienceText = this.convertExperienceToText(cvData.experience);
            sections.push({
                id: 'experience',
                title: 'Work Experience',
                content: experienceText
            });
        }

        // Skills section - convert object to editable text
        if (cvData.skills) {
            const skillsText = this.convertSkillsToText(cvData.skills);
            sections.push({
                id: 'skills',
                title: 'Skills & Expertise',
                content: skillsText
            });
        }

        // Education section - convert array to editable text
        if (cvData.education?.length > 0) {
            const educationText = this.convertEducationToText(cvData.education);
            sections.push({
                id: 'education',
                title: 'Education',
                content: educationText
            });
        }

        // Projects section - convert array to editable text
        if (cvData.projects?.length > 0) {
            const projectsText = this.convertProjectsToText(cvData.projects);
            sections.push({
                id: 'projects',
                title: 'Projects',
                content: projectsText
            });
        }

        // Certifications section - convert array to editable text
        if (cvData.certifications?.length > 0) {
            const certificationsText = this.convertCertificationsToText(cvData.certifications);
            sections.push({
                id: 'certifications',
                title: 'Certifications',
                content: certificationsText
            });
        }

        console.log('Converted CV data to editable sections:', sections.map(s => ({ id: s.id, contentLength: s.content.length })));
        return sections;
    }

    // Helper methods to convert structured data to editable text
    private convertExperienceToText(experience: any[]): string {
        return experience.map(exp => {
            let text = `${exp.title} at ${exp.company}`;
            if (exp.location) text += ` (${exp.location})`;
            text += `\n${exp.startDate} - ${exp.endDate}\n`;
            text += `${exp.description}\n`;
            
            if (exp.achievements && exp.achievements.length > 0) {
                text += '\nKey Achievements:\n';
                exp.achievements.forEach((achievement: string) => {
                    text += `• ${achievement}\n`;
                });
            }
            
            return text;
        }).join('\n\n');
    }

    private convertSkillsToText(skills: any): string {
        let text = '';
        
        if (skills.technical && skills.technical.length > 0) {
            text += `Technical Skills:\n${skills.technical.join(', ')}\n\n`;
        }
        
        if (skills.soft && skills.soft.length > 0) {
            text += `Professional Skills:\n${skills.soft.join(', ')}\n\n`;
        }
        
        if (skills.languages && skills.languages.length > 0) {
            text += `Languages:\n${skills.languages.join(', ')}\n\n`;
        }
        
        return text.trim();
    }

    private convertEducationToText(education: any[]): string {
        return education.map(edu => {
            let text = `${edu.degree} from ${edu.institution}`;
            if (edu.location) text += ` (${edu.location})`;
            if (edu.graduationDate) text += `\nGraduated: ${edu.graduationDate}`;
            if (edu.gpa) text += `\nGPA: ${edu.gpa}`;
            
            if (edu.achievements && edu.achievements.length > 0) {
                text += '\nAchievements:\n';
                edu.achievements.forEach((achievement: string) => {
                    text += `• ${achievement}\n`;
                });
            }
            
            return text;
        }).join('\n\n');
    }

    private convertProjectsToText(projects: any[]): string {
        return projects.map(proj => {
            let text = `${proj.name}\n${proj.description}`;
            
            if (proj.technologies && proj.technologies.length > 0) {
                text += `\nTechnologies: ${proj.technologies.join(', ')}`;
            }
            
            if (proj.url) {
                text += `\nURL: ${proj.url}`;
            }
            
            return text;
        }).join('\n\n');
    }

    private convertCertificationsToText(certifications: any[]): string {
        return certifications.map(cert => {
            let text = `${cert.name} - ${cert.issuer}`;
            if (cert.date) text += ` (${cert.date})`;
            if (cert.url) text += `\nID/URL: ${cert.url}`;
            if (cert.description) text += `\n${cert.description}`;
            
            return text;
        }).join('\n\n');
    }
}

[END OF FILE: frontend\src\app\services\cv-processing.service.ts]

--------------------------------------------------------------------------------
FILE: frontend\src\app\services\file-upload.service.ts
SIZE: 7396 bytes (7.2 KB)
--------------------------------------------------------------------------------
import { Injectable } from '@angular/core';
import { HttpClient, HttpHeaders, HttpEventType } from '@angular/common/http';
import { Observable, BehaviorSubject } from 'rxjs';
import { AuthService } from './auth.service';

export interface FileInfo {
    id: string;
    originalName: string;
    filename: string;
    path: string;
    size: number;
    mimetype: string;
    uploadedAt: string;
    userId: string;
    status: string;
}

export interface UploadResponse {
    success: boolean;
    message: string;
    file: FileInfo;
}

export interface ProcessResponse {
    success: boolean;
    message: string;
    extractedText: string;
    fileId: string;
    processedAt: string;
    structuredData: any;
}

export interface UploadProgress {
    percentage: number;
    status: 'uploading' | 'processing' | 'completed' | 'error';
    message: string;
    file?: FileInfo;
    extractedText?: string;
    structuredData?: any;
}


@Injectable({
    providedIn: 'root'
})
export class FileUploadService {
    private apiUrl = 'http://localhost:3000/api';
    private uploadProgressSubject = new BehaviorSubject<UploadProgress | null>(null);

    public uploadProgress$ = this.uploadProgressSubject.asObservable();

    constructor(
        private http: HttpClient,
        private authService: AuthService
    ) { }

    private getAuthHeaders(): HttpHeaders {
        const token = this.authService.getToken();
        return new HttpHeaders({
            'Authorization': `Bearer ${token}`
        });
    }

    uploadFile(file: File): Observable<UploadProgress> {
        return new Observable(observer => {
            // Validate file
            if (!this.validateFile(file)) {
                const error: UploadProgress = {
                    percentage: 0,
                    status: 'error',
                    message: 'Invalid file type. Please upload PDF, DOC, or DOCX files only.'
                };
                observer.next(error);
                observer.complete();
                return;
            }

            // Create form data
            const formData = new FormData();
            formData.append('cvFile', file);

            const headers = this.getAuthHeaders();
            // Remove Content-Type header to let browser set it with boundary
            headers.delete('Content-Type');

            // Upload file
            this.http.post<UploadResponse>(`${this.apiUrl}/cv/upload`, formData, {
                headers,
                reportProgress: true,
                observe: 'events'
            }).subscribe({
                next: (event) => {
                    if (event.type === HttpEventType.UploadProgress) {
                        const percentage = Math.round(100 * event.loaded / (event.total || 1));
                        const progress: UploadProgress = {
                            percentage,
                            status: 'uploading',
                            message: `Uploading... ${percentage}%`
                        };
                        this.uploadProgressSubject.next(progress);
                        observer.next(progress);
                    } else if (event.type === HttpEventType.Response) {
                        if (event.body?.success) {
                            // File uploaded, now process it
                            const uploadedProgress: UploadProgress = {
                                percentage: 100,
                                status: 'processing',
                                message: 'Processing CV...',
                                file: event.body.file
                            };
                            this.uploadProgressSubject.next(uploadedProgress);
                            observer.next(uploadedProgress);

                            // Process the file
                            this.processFile(event.body.file.id).subscribe({
                                next: (processResponse) => {
                                    const completedProgress: UploadProgress = {
                                        percentage: 100,
                                        status: 'completed',
                                        message: 'CV processed successfully!',
                                        file: event.body!.file,
                                        extractedText: processResponse.extractedText,
                                        structuredData: processResponse.structuredData // Add this line
                                    };
                                    this.uploadProgressSubject.next(completedProgress);
                                    observer.next(completedProgress);
                                    observer.complete();
                                },
                                error: (processError) => {
                                    const errorProgress: UploadProgress = {
                                        percentage: 100,
                                        status: 'error',
                                        message: 'Failed to process CV: ' + (processError.error?.message || processError.message)
                                    };
                                    this.uploadProgressSubject.next(errorProgress);
                                    observer.next(errorProgress);
                                    observer.complete();
                                }
                            });
                        } else {
                            const errorProgress: UploadProgress = {
                                percentage: 0,
                                status: 'error',
                                message: event.body?.message || 'Upload failed'
                            };
                            this.uploadProgressSubject.next(errorProgress);
                            observer.next(errorProgress);
                            observer.complete();
                        }
                    }
                },
                error: (error) => {
                    const errorProgress: UploadProgress = {
                        percentage: 0,
                        status: 'error',
                        message: 'Upload failed: ' + (error.error?.message || error.message)
                    };
                    this.uploadProgressSubject.next(errorProgress);
                    observer.next(errorProgress);
                    observer.complete();
                }
            });
        });
    }

    private processFile(fileId: string): Observable<ProcessResponse> {
        const headers = this.getAuthHeaders();
        return this.http.post<ProcessResponse>(`${this.apiUrl}/cv/process`, { fileId }, { headers });
    }

    private validateFile(file: File): boolean {
        const allowedTypes = [
            'application/pdf',
            'application/msword',
            'application/vnd.openxmlformats-officedocument.wordprocessingml.document'
        ];

        const maxSize = 10 * 1024 * 1024; // 10MB

        return allowedTypes.includes(file.type) && file.size <= maxSize;
    }

    clearProgress() {
        this.uploadProgressSubject.next(null);
    }
}

[END OF FILE: frontend\src\app\services\file-upload.service.ts]

--------------------------------------------------------------------------------
FILE: frontend\src\app\services\landing-page.service.ts
SIZE: 2829 bytes (2.8 KB)
--------------------------------------------------------------------------------
// File: frontend/src/app/services/landing-page.service.ts
import { Injectable } from '@angular/core';
import { HttpClient, HttpHeaders } from '@angular/common/http';
import { Observable } from 'rxjs';
import { AuthService } from './auth.service';

export interface GenerationResult {
  success: boolean;
  message: string;
  generation: {
    id: string;
    userId: string;
    outputDir: string;
    generatedAt: string;
    files: string[];
    cvData: any;
  };
  previewUrl: string;
}

export interface PreviewResult {
  success: boolean;
  message: string;
  previewId: string;
}

@Injectable({
  providedIn: 'root'
})
export class LandingPageService {
  private apiUrl = 'http://localhost:3000/api';

  constructor(
    private http: HttpClient,
    private authService: AuthService
  ) {}

  private getAuthHeaders(): HttpHeaders {
    const token = this.authService.getToken();
    return new HttpHeaders({
      'Authorization': `Bearer ${token}`,
      'Content-Type': 'application/json'
    });
  }

  generateLandingPage(structuredData: any): Observable<GenerationResult> {
    const headers = this.getAuthHeaders();
    
    // Prepare the data - prioritize edited content over original structured data
    const dataForGeneration = this.prepareDataForGeneration(structuredData);
    
    console.log('Sending to API - Data includes edited content:', {
      hasEditedExperience: !!dataForGeneration.experienceText,
      hasEditedSkills: !!dataForGeneration.skillsText,
      hasEditedEducation: !!dataForGeneration.educationText,
      hasEditedProjects: !!dataForGeneration.projectsText,
      hasEditedCertifications: !!dataForGeneration.certificationsText,
      summaryLength: dataForGeneration.personalInfo?.summary?.length,
      aboutMeLength: dataForGeneration.personalInfo?.aboutMe?.length
    });
    
    return this.http.post<GenerationResult>(`${this.apiUrl}/cv/generate`, 
      { structuredData: dataForGeneration }, 
      { headers }
    );
  }

  private prepareDataForGeneration(originalData: any) {
    // Start with original data structure
    const preparedData = {
      ...originalData,
      personalInfo: {
        ...originalData.personalInfo
      }
    };

    // Add flags to indicate we have edited content that should override structured data
    preparedData._hasEditedContent = true;
    
    // The text fields (experienceText, skillsText, etc.) are already in the data
    // from buildFinalCVDataFromEditedSections()
    
    console.log('Data prepared for generation with edited content flags');
    return preparedData;
  }

  getPreview(previewId: string): Observable<PreviewResult> {
    return this.http.get<PreviewResult>(`${this.apiUrl}/cv/preview?previewId=${previewId}`);
  }
}

[END OF FILE: frontend\src\app\services\landing-page.service.ts]

--------------------------------------------------------------------------------
FILE: frontend\src\app\services\preview.service.ts
SIZE: 1342 bytes (1.3 KB)
--------------------------------------------------------------------------------
import { Injectable } from '@angular/core';
import { HttpClient, HttpHeaders } from '@angular/common/http';
import { Observable } from 'rxjs';
import { AuthService } from './auth.service';

export interface PreviewResponse {
  success: boolean;
  message: string;
  previewId: string;
  generatedAt: string;
  files: string[];
}

@Injectable({
  providedIn: 'root'
})
export class PreviewService {
  private apiUrl = 'http://localhost:3000/api';

  constructor(
    private http: HttpClient,
    private authService: AuthService
  ) {}

  private getAuthHeaders(): HttpHeaders {
    const token = this.authService.getToken();
    return new HttpHeaders({
      'Authorization': `Bearer ${token}`,
      'Content-Type': 'application/json'
    });
  }

  getPreview(previewId: string): Observable<PreviewResponse> {
    const headers = this.getAuthHeaders();
    return this.http.get<PreviewResponse>(`${this.apiUrl}/cv/preview?previewId=${previewId}`, { headers });
  }

  downloadWebsite(generationId: string): Observable<Blob> {
    const headers = this.getAuthHeaders();
    headers.delete('Content-Type'); // Remove content-type for blob response
    
    return this.http.get(`${this.apiUrl}/cv/download?generationId=${generationId}`, {
      headers,
      responseType: 'blob'
    });
  }
}

[END OF FILE: frontend\src\app\services\preview.service.ts]

--------------------------------------------------------------------------------
FILE: frontend\postcss.config.js
SIZE: 81 bytes (0.1 KB)
--------------------------------------------------------------------------------
module.exports = {
  plugins: {
    tailwindcss: {},
    autoprefixer: {},
  },
}

[END OF FILE: frontend\postcss.config.js]

--------------------------------------------------------------------------------
FILE: frontend\tailwind.config.js
SIZE: 474 bytes (0.5 KB)
--------------------------------------------------------------------------------
/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [
    "./src/**/*.{html,ts}",
  ],
  theme: {
    extend: {
      colors: {
        primary: {
          50: '#eff6ff',
          100: '#dbeafe',
          200: '#bfdbfe',
          300: '#93c5fd',
          400: '#60a5fa',
          500: '#3b82f6',
          600: '#2563eb',
          700: '#1d4ed8',
          800: '#1e40af',
          900: '#1e3a8a',
        }
      }
    },
  },
  plugins: [],
}

[END OF FILE: frontend\tailwind.config.js]

--------------------------------------------------------------------------------
FILE: frontend\src\index.html
SIZE: 307 bytes (0.3 KB)
--------------------------------------------------------------------------------
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Frontend</title>
  <base href="/">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" type="image/x-icon" href="favicon.ico">
</head>
<body>
  <app-root></app-root>
</body>
</html>

[END OF FILE: frontend\src\index.html]

--------------------------------------------------------------------------------
FILE: frontend\src\app\app.html
SIZE: 587 bytes (0.6 KB)
--------------------------------------------------------------------------------
<div class="min-h-screen bg-gray-50">
  <!-- Test Tailwind Classes -->
  <div class="container mx-auto py-8">
    <div class="card max-w-md mx-auto">
      <h1 class="text-3xl font-bold text-gray-900 mb-4">
        CV Landing Generator
      </h1>
      <p class="text-gray-600 mb-6">
        Tailwind CSS 3.4 is working correctly!
      </p>
      <div class="space-x-4">
        <button class="btn-primary">Primary Button</button>
        <button class="btn-secondary">Secondary Button</button>
      </div>
    </div>
  </div>
</div>

<router-outlet></router-outlet>

[END OF FILE: frontend\src\app\app.html]

--------------------------------------------------------------------------------
FILE: frontend\src\app\components\cv-wizard\cv-wizard.component.html
SIZE: 21987 bytes (21.5 KB)
--------------------------------------------------------------------------------
<!-- File: frontend/src/app/components/cv-wizard/cv-wizard.component.html -->
<div class="container max-w-5xl mx-auto section-padding cv-wizard">
  <!-- Wizard Header -->
  <div class="text-center mb-12 fade-in">
    <div class="inline-flex items-center px-4 py-2 bg-white rounded-full shadow-sm border border-warm-coral mb-6">
      <span class="w-2 h-2 bg-green-500 rounded-full mr-2"></span>
      <span class="text-sm font-medium warm-text-primary">AI-Powered • Fast • Professional</span>
    </div>

    <h1 class="text-4xl md:text-5xl font-bold mb-6">
      <span class="warm-text-primary">Transform Your</span>
      <br>
      <span class="text-gradient">CV into a Stunning</span>
      <br>
      <span class="warm-text-primary">Landing Page</span>
    </h1>

    <p class="text-xl warm-text-secondary max-w-2xl mx-auto leading-relaxed">
      Upload your CV and let our AI create a beautiful, responsive landing page that showcases your professional story
      in minutes.
    </p>
  </div>

  <!-- Progress Steps -->
  <div class="mb-12 slide-up">
    <div class="wizard-steps">
      <div class="flex items-center justify-between max-w-4xl mx-auto">
        <div *ngFor="let step of wizardSteps; let i = index" class="flex items-center"
          [class.flex-1]="i < wizardSteps.length - 1">

          <!-- Step Circle -->
          <div class="step-indicator" [class.completed]="step.completed" [class.active]="step.active"
            [class.pending]="!step.completed && !step.active">
            <svg *ngIf="step.completed" class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <span *ngIf="!step.completed">{{ step.id }}</span>
          </div>

          <!-- Step Info -->
          <div class="ml-4 hidden md:block step-text">
            <p class="font-medium text-sm mb-1" [class.warm-text-primary]="step.completed || step.active"
              [class.warm-text-light]="!step.completed && !step.active">
              {{ step.title }}
            </p>
            <p class="text-xs warm-text-light">{{ step.description }}</p>
          </div>

          <!-- Connector Line -->
          <div *ngIf="i < wizardSteps.length - 1" class="flex-1 h-1 mx-6 step-line" [class.completed]="step.completed">
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Step Content -->
  <div class="card max-w-4xl mx-auto scale-in">

    <!-- Step 1: Upload CV -->
    <div *ngIf="currentStep === 1" class="text-center">
      <div class="w-16 h-16 bg-gradient rounded-xl flex items-center justify-center mx-auto mb-6 shadow-lg">
        <div class="w-8 h-8 bg-white rounded-lg flex items-center justify-center">
          <span class="text-warm-orange font-bold text-xs">CV</span>
        </div>
      </div>

      <h2 class="text-2xl font-bold warm-text-primary mb-4">Upload Your CV</h2>
      <p class="warm-text-secondary mb-8 max-w-md mx-auto">
        Upload your CV in PDF, DOC, or DOCX format and we'll extract your information automatically
      </p>

      <div *ngIf="!uploadedFile" class="upload-zone" (dragover)="onDragOver($event)" (dragleave)="onDragLeave($event)"
        (drop)="onDrop($event)" [class.dragover]="isDragOver">

        <div class="space-y-6 relative z-10">
          <div class="w-20 h-20 bg-warm-cream rounded-xl flex items-center justify-center mx-auto">
            <div class="w-10 h-10 bg-warm-orange rounded-lg flex items-center justify-center">
              <span class="text-white font-bold">CV</span>
            </div>
          </div>

          <div>
            <p class="text-lg font-medium warm-text-primary mb-2">
              Drag and drop your CV here
            </p>
            <p class="warm-text-secondary mb-4">
              or click to browse your files
            </p>
            <p class="text-sm warm-text-light">
              Supports PDF, DOC, DOCX • Max size 10MB
            </p>
          </div>

          <div>
            <input type="file" id="cv-file-input" class="hidden" accept=".pdf,.doc,.docx"
              (change)="onFileSelected($event)">
            <label for="cv-file-input" class="btn-primary cursor-pointer inline-flex items-center">
              <span class="mr-2">+</span>
              Choose File
            </label>
          </div>
        </div>
      </div>

      <div *ngIf="uploadedFile" class="file-upload-card max-w-md mx-auto p-6">
        <div class="flex items-center space-x-4">
          <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center border-2 border-green-300">
            <span class="text-green-600 font-bold text-lg">✓</span>
          </div>
          <div class="flex-1 text-left">
            <p class="file-name font-semibold">{{ uploadedFile.name }}</p>
            <p class="file-size text-sm">{{ formatFileSize(uploadedFile.size) }}</p>
          </div>
          <button (click)="removeFile()"
            class="p-2 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors">
            <span class="text-lg">×</span>
          </button>
        </div>
      </div>
    </div>

    <!-- Step 2: Upload Profile Picture -->
    <div *ngIf="currentStep === 2" class="text-center">
      <div class="w-16 h-16 bg-purple-100 rounded-xl flex items-center justify-center mx-auto mb-6">
        <div class="w-8 h-8 bg-purple-500 rounded-full"></div>
      </div>

      <h2 class="text-2xl font-bold warm-text-primary mb-4">Add Your Photo</h2>
      <p class="warm-text-secondary mb-8 max-w-md mx-auto">
        Upload a professional headshot to personalize your landing page (optional)
      </p>

      <div *ngIf="!profilePicture" class="upload-zone max-w-md mx-auto">
        <div class="space-y-6 relative z-10">
          <div class="w-20 h-20 bg-purple-50 rounded-full flex items-center justify-center mx-auto">
            <div class="w-10 h-10 bg-purple-500 rounded-full"></div>
          </div>

          <div>
            <p class="text-lg font-medium warm-text-primary mb-2">
              Upload your photo
            </p>
            <p class="text-sm warm-text-light mb-4">
              JPG, PNG • Max size 5MB
            </p>
          </div>

          <div class="space-x-4">
            <input type="file" id="profile-file-input" class="hidden" accept=".jpg,.jpeg,.png"
              (change)="onProfileSelected($event)">
            <label for="profile-file-input" class="btn-primary cursor-pointer inline-flex items-center">
              <span class="mr-2">+</span>
              Choose Photo
            </label>
          </div>
        </div>
      </div>

      <div *ngIf="profilePicture" class="card max-w-sm mx-auto p-6">
        <div class="text-center space-y-4">
          <div class="w-24 h-24 rounded-full overflow-hidden mx-auto ring-4 ring-warm-coral shadow-lg">
            <img [src]="profilePicture" alt="Profile Picture" class="w-full h-full object-cover">
          </div>
          <div>
            <p class="font-semibold warm-text-primary">Looking great! 🎉</p>
            <p class="text-sm warm-text-secondary">Your photo is ready</p>
          </div>
          <button (click)="removeProfilePicture()" class="btn-ghost text-red-600 hover:bg-red-50">
            Change Photo
          </button>
        </div>
      </div>
    </div>

    <!-- Step 3: Generate CV Data -->
    <div *ngIf="currentStep === 3" class="text-center">
      <div class="w-16 h-16 bg-green-100 rounded-xl flex items-center justify-center mx-auto mb-6">
        <div class="w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center">
          <span class="text-white font-bold">AI</span>
        </div>
      </div>

      <h2 class="text-2xl font-bold warm-text-primary mb-4">Generate Content</h2>
      <p class="warm-text-secondary mb-8 max-w-md mx-auto">
        Our AI will analyze your CV and create professional content for your landing page
      </p>

      <div *ngIf="!isProcessing && !cvData" class="space-y-6">
        <div class="card max-w-md mx-auto p-8 bg-gradient-to-br from-warm-cream to-warm-yellow">
          <div class="space-y-6">
            <div class="w-16 h-16 bg-gradient rounded-xl flex items-center justify-center mx-auto shadow-lg">
              <span class="text-white font-bold text-2xl">⚡</span>
            </div>
            <div>
              <h3 class="text-lg font-semibold warm-text-primary mb-2">Ready to Process</h3>
              <p class="warm-text-secondary text-sm">
                We'll extract your information and generate compelling content
              </p>
            </div>
            <button (click)="startProcessing()" class="btn-primary w-full text-lg py-4">
              Generate My Content
            </button>
          </div>
        </div>
      </div>

      <div *ngIf="isProcessing" class="space-y-6">
        <div class="card max-w-lg mx-auto p-8 bg-gradient-to-br from-warm-cream to-warm-beige">
          <div class="text-center space-y-6">
            <div class="loading-spinner w-8 h-8 mx-auto"></div>
            <div>
              <h3 class="text-lg font-semibold warm-text-primary mb-2">Processing Your CV</h3>
              <p class="warm-text-secondary text-sm">
                This may take a few moments while we analyze your information
              </p>
            </div>
          </div>

          <div class="mt-8 space-y-3">
            <div *ngFor="let phase of processingPhases" class="flex items-center justify-between text-sm">
              <span class="warm-text-secondary">{{ phase.name }}</span>
              <div class="flex items-center space-x-2">
                <div *ngIf="phase.status === 'completed'" class="w-4 h-4 text-green-500">
                  <span class="font-bold">✓</span>
                </div>
                <div *ngIf="phase.status === 'processing'" class="loading-spinner w-4 h-4"></div>
                <div *ngIf="phase.status === 'pending'" class="w-4 h-4 bg-warm-taupe rounded-full"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="cvData && !isProcessing" class="text-center">
        <div class="status-success max-w-md mx-auto mb-6">
          <span class="font-bold mr-2">✓</span>
          Content generated successfully!
        </div>
        <p class="warm-text-secondary mb-6">
          Your CV has been processed and content is ready for review
        </p>
      </div>
    </div>

    <!-- Step 4: Edit Content -->
    <div *ngIf="currentStep === 4">
      <div class="text-center mb-8">
        <div class="w-16 h-16 bg-yellow-100 rounded-xl flex items-center justify-center mx-auto mb-6">
          <div class="w-8 h-8 bg-yellow-500 rounded-lg flex items-center justify-center">
            <span class="text-white font-bold">✎</span>
          </div>
        </div>
        <h2 class="text-2xl font-bold warm-text-primary mb-4">Review & Edit</h2>
        <p class="warm-text-secondary max-w-md mx-auto">
          Review the generated content and make any adjustments before creating your landing page
        </p>
      </div>

      <div class="space-y-6">
        <div *ngFor="let section of cvSections" class="card p-6">
          <div class="flex items-center mb-4">
            <div class="w-8 h-8 bg-warm-orange rounded-lg flex items-center justify-center mr-3">
              <span class="text-white font-bold text-xs">{{ section.id.substring(0, 2).toUpperCase() }}</span>
            </div>
            <h3 class="text-lg font-semibold warm-text-primary">{{ section.title }}</h3>
          </div>

          <textarea [(ngModel)]="section.content" [placeholder]="section.placeholder" [rows]="section.rows"
            class="textarea-field">
          </textarea>

          <div class="flex items-center justify-between mt-2">
            <span class="text-xs warm-text-light">{{ section.content.length || 0 }} characters</span>
            <button class="btn-ghost text-xs" (click)="resetSection(section)">
              Reset to Original
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Step 5: Generate Website - Updated with preview -->
    <div *ngIf="currentStep === 5" class="text-center">
      <div class="w-16 h-16 bg-purple-100 rounded-xl flex items-center justify-center mx-auto mb-6">
        <div class="w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center">
          <span class="text-white font-bold">🌐</span>
        </div>
      </div>

      <h2 class="text-2xl font-bold warm-text-primary mb-4">Create Your Website</h2>
      <p class="warm-text-secondary mb-8 max-w-md mx-auto">
        Generate your professional landing page with all your customized content
      </p>

      <!-- Before Generation -->
      <div *ngIf="!isGeneratingWebsite && !websiteGenerated" class="space-y-6">
        <div class="card max-w-md mx-auto p-8 bg-gradient-to-br from-purple-50 to-pink-50">
          <div class="space-y-6">
            <div class="w-16 h-16 bg-gradient rounded-xl flex items-center justify-center mx-auto shadow-lg">
              <span class="text-white font-bold text-2xl">🚀</span>
            </div>
            <div>
              <h3 class="text-lg font-semibold warm-text-primary mb-2">Ready to Launch</h3>
              <p class="warm-text-secondary text-sm">
                Your content is polished and ready to become a beautiful website
              </p>
            </div>
            <button (click)="generateWebsite()" class="btn-primary w-full text-lg py-4">
              Create My Website
            </button>
          </div>
        </div>
      </div>

      <!-- During Generation -->
      <div *ngIf="isGeneratingWebsite" class="space-y-6">
        <div class="card max-w-lg mx-auto p-8">
          <div class="text-center space-y-6">
            <div class="loading-spinner w-8 h-8 mx-auto"></div>
            <div>
              <h3 class="text-lg font-semibold warm-text-primary mb-2">Building Your Website</h3>
              <p class="warm-text-secondary text-sm">
                Crafting your beautiful landing page...
              </p>
            </div>
          </div>
        </div>
      </div>

      <!-- After Generation - Success with Preview and Download -->
      <div *ngIf="websiteGenerated && generationResult" class="space-y-6">
        <div class="card max-w-lg mx-auto p-8 bg-green-50 border-green-200">
          <div class="text-center space-y-6">
            <div class="w-16 h-16 bg-green-100 rounded-xl flex items-center justify-center mx-auto">
              <span class="text-green-600 font-bold text-2xl">✓</span>
            </div>
            <div>
              <h3 class="text-xl font-bold warm-text-primary mb-2">Website Created!</h3>
              <p class="warm-text-secondary">
                Your professional landing page is ready to share with the world
              </p>
            </div>

            <!-- Action buttons -->
            <div class="flex flex-col sm:flex-row gap-3 justify-center">
              <button (click)="openPreview()" class="btn-primary flex items-center justify-center space-x-2">
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
                </svg>
                <span>Preview Website</span>
              </button>

              <button (click)="downloadWebsite()" [disabled]="isDownloading"
                class="btn-secondary flex items-center justify-center space-x-2">
                <svg *ngIf="!isDownloading" class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                </svg>
                <div *ngIf="isDownloading" class="loading-spinner w-4 h-4"></div>
                <span>{{ isDownloading ? 'Downloading...' : 'Download Files' }}</span>
              </button>

              <button (click)="deployToGitHub()" [disabled]="isDeploying"
                class="btn-primary flex items-center justify-center space-x-2 bg-gray-900 hover:bg-gray-800">

                <svg *ngIf="!isDeploying" class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                  <path
                    d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z" />
                </svg>

                <div *ngIf="isDeploying" class="loading-spinner w-4 h-4"></div>

                <span *ngIf="!isDeploying && !githubConnected">Connect & Deploy</span>
                <span *ngIf="!isDeploying && githubConnected">Deploy to GitHub</span>
                <span *ngIf="isDeploying">Deploying...</span>
              </button>
            </div>

            <!-- Success message after deployment (add this right after the action buttons) -->
            <div *ngIf="deployedUrl" class="mt-6 p-4 bg-green-50 border border-green-200 rounded-lg">
              <div class="flex items-center mb-3">
                <svg class="w-5 h-5 text-green-600 mr-2" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd"
                    d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"
                    clip-rule="evenodd"></path>
                </svg>
                <span class="text-green-800 font-bold">🎉 Website deployed to GitHub Pages!</span>
              </div>
              <div class="space-y-2">
                <a [href]="deployedUrl" target="_blank"
                  class="block text-blue-600 hover:text-blue-800 font-medium underline">
                  🌐 Visit your live website: {{ deployedUrl }}
                </a>
                <p class="text-sm text-green-700">
                  <strong>Note:</strong> GitHub Pages may take 2-3 minutes to become available after deployment.
                </p>
              </div>
            </div>

            <!-- Error message (add this after success message) -->
            <div *ngIf="deploymentError" class="mt-4 p-4 bg-red-50 border border-red-200 rounded-lg">
              <div class="flex items-center">
                <svg class="w-5 h-5 text-red-400 mr-2" fill="currentColor" viewBox="0 0 20 20">
                  <path fill-rule="evenodd"
                    d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z"
                    clip-rule="evenodd"></path>
                </svg>
                <span class="text-red-800">{{ deploymentError }}</span>
              </div>
            </div>

            <!-- Success Info -->
            <div class="bg-white border border-green-200 rounded-lg p-4 mt-6">
              <h4 class="font-semibold text-green-800 mb-2">What's Next?</h4>
              <div class="text-sm text-green-700 space-y-1">
                <p>✓ Preview your website to see how it looks</p>
                <p>✓ Download the complete website files</p>
                <p>✓ Upload to your hosting provider</p>
                <p>✓ Share your professional URL</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Navigation Footer -->
  <div class="flex justify-between items-center mt-8 pt-6 border-t border-warm-peach">
    <button *ngIf="currentStep > 1 && currentStep < 5" (click)="previousStep()" class="btn-secondary">
      <span class="mr-2">←</span>
      Back
    </button>
    <div *ngIf="currentStep === 1 || currentStep === 5"></div>

    <div class="flex items-center space-x-4">
      <span class="text-sm warm-text-secondary">
        Step {{ currentStep }} of {{ wizardSteps.length }}
      </span>
      <button *ngIf="canProceed() && currentStep < 5" (click)="nextStep()" class="btn-primary">
        {{ getNextButtonText() }}
        <span class="ml-2">→</span>
      </button>
    </div>
  </div>
</div>

<!-- Preview Modal -->
<app-preview-modal [isOpen]="showPreviewModal" [generationId]="generationId" (closeEvent)="closePreview()"
  (downloadEvent)="onDownloadFromPreview($event)">
</app-preview-modal>

[END OF FILE: frontend\src\app\components\cv-wizard\cv-wizard.component.html]

--------------------------------------------------------------------------------
FILE: frontend\src\app\components\deploy-website\deploy-website.component.html
SIZE: 13717 bytes (13.4 KB)
--------------------------------------------------------------------------------
<div class="deploy-website-container bg-white rounded-lg shadow-md p-6 mt-6">
  
  <!-- Header -->
  <div class="flex items-center justify-between mb-6">
    <div>
      <h3 class="text-lg font-semibold text-gray-900">Deploy Your Website</h3>
      <p class="text-sm text-gray-600">Publish your CV as a live website on GitHub Pages</p>
    </div>
    <div class="flex items-center space-x-2">
      <svg class="w-5 h-5 text-gray-400" fill="currentColor" viewBox="0 0 20 20">
        <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0 1 1 0 00-1.414 1.414 4 4 0 005.656 0l3-3a4 4 0 00-5.656-5.656l-1.5 1.5a1 1 0 101.414 1.414l1.5-1.5zm-5 5a2 2 0 012.828 0 1 1 0 101.414-1.414 4 4 0 00-5.656 0l-3 3a4 4 0 105.656 5.656l1.5-1.5a1 1 0 10-1.414-1.414l-1.5 1.5a2 2 0 11-2.828-2.828l3-3z" clip-rule="evenodd"></path>
      </svg>
    </div>
  </div>

  <!-- GitHub Connection Required -->
  <div *ngIf="!hasGitHubConnection" class="border-2 border-dashed border-gray-200 rounded-lg p-6 text-center">
    <svg class="mx-auto h-12 w-12 text-gray-400 mb-4" fill="currentColor" viewBox="0 0 24 24">
      <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
    </svg>
    
    <h4 class="text-lg font-medium text-gray-900 mb-2">Connect Your GitHub Account</h4>
    <p class="text-gray-600 mb-4">To deploy your website, you need to connect your GitHub account. This allows us to create a repository and enable GitHub Pages hosting.</p>
    
    <button 
      (click)="connectGitHub()"
      class="inline-flex items-center px-4 py-2 bg-gray-900 text-white rounded-md hover:bg-gray-800 transition-colors">
      <svg class="w-5 h-5 mr-2" fill="currentColor" viewBox="0 0 24 24">
        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
      </svg>
      Connect GitHub
    </button>
  </div>

  <!-- Deploy Form -->
  <div *ngIf="hasGitHubConnection && !showDeployForm && !deployedUrls" class="text-center">
    <div class="inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-full mb-4">
      <svg class="w-8 h-8 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
      </svg>
    </div>
    
    <h4 class="text-lg font-medium text-gray-900 mb-2">Ready to Deploy!</h4>
    <p class="text-gray-600 mb-4">Your GitHub account is connected. You can now deploy your CV as a live website.</p>
    
    <button 
      (click)="showDeploymentForm()"
      class="inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors font-medium">
      <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
      </svg>
      Deploy Website
    </button>
  </div>

  <!-- Deployment Configuration -->
  <div *ngIf="showDeployForm && !deployedUrls" class="space-y-4">
    
    <!-- Site Name Input -->
    <div>
      <label for="siteName" class="block text-sm font-medium text-gray-700 mb-2">
        Website Name
      </label>
      <input
        id="siteName"
        type="text"
        [(ngModel)]="siteName"
        [disabled]="isDeploying"
        placeholder="my-awesome-portfolio"
        class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 disabled:bg-gray-100 disabled:cursor-not-allowed"
      />
      <p class="mt-1 text-xs text-gray-500">
        This will create a GitHub repository named: <span class="font-mono">{{ siteName }}-landing</span>
      </p>
    </div>

    <!-- Preview URLs -->
    <div class="bg-gray-50 rounded-md p-4">
      <h5 class="text-sm font-medium text-gray-700 mb-2">Your website will be available at:</h5>
      <div class="space-y-1 text-sm">
        <div class="flex items-center text-gray-600">
          <svg class="w-4 h-4 mr-2 text-gray-400" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
          </svg>
          <span class="font-mono">username.github.io/{{ siteName }}-landing</span>
        </div>
      </div>
    </div>

    <!-- Error Display -->
    <div *ngIf="deploymentError" class="bg-red-50 border border-red-200 rounded-md p-4">
      <div class="flex items-center">
        <svg class="w-5 h-5 text-red-400 mr-2" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path>
        </svg>
        <span class="text-red-800 text-sm">{{ deploymentError }}</span>
      </div>
    </div>

    <!-- Deploy Button -->
    <div class="flex items-center justify-between pt-4">
      <button
        (click)="resetForm()"
        [disabled]="isDeploying"
        class="px-4 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50 disabled:cursor-not-allowed">
        Cancel
      </button>
      
      <button
        (click)="deployWebsite()"
        [disabled]="isDeploying || !siteName.trim()"
        class="inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium">
        
        <svg *ngIf="isDeploying" class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        
        <svg *ngIf="!isDeploying" class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8"></path>
        </svg>
        
        {{ isDeploying ? 'Deploying...' : 'Deploy Website' }}
      </button>
    </div>
  </div>

  <!-- Deployment Progress -->
  <div *ngIf="isDeploying" class="mt-6">
    <div class="bg-blue-50 border border-blue-200 rounded-md p-4">
      <div class="flex items-center">
        <svg class="animate-spin h-5 w-5 text-blue-600 mr-2" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path class="opacity-75" fill="currentColor" d="m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
        </svg>
        <span class="text-blue-800 text-sm font-medium">{{ deploymentStatus }}</span>
      </div>
    </div>
  </div>

  <!-- Deployment Success -->
  <div *ngIf="deployedUrls" class="space-y-4">
    
    <!-- Success Message -->
    <div class="bg-green-50 border border-green-200 rounded-md p-4">
      <div class="flex items-center">
        <svg class="w-5 h-5 text-green-600 mr-2" fill="currentColor" viewBox="0 0 20 20">
          <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path>
        </svg>
        <span class="text-green-800 font-medium">Website deployed successfully!</span>
      </div>
    </div>

    <!-- Deployed URLs -->
    <div class="bg-gray-50 rounded-md p-4">
      <h5 class="text-sm font-medium text-gray-700 mb-3">Your website is now live:</h5>
      
      <div class="space-y-3">
        <!-- Live Website -->
        <div class="flex items-center justify-between p-3 bg-white rounded border">
          <div class="flex items-center">
            <svg class="w-5 h-5 text-green-600 mr-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 12a9 9 0 01-9 9m9-9a9 9 0 00-9-9m9 9H3m9 9v-9m0-9v9"></path>
            </svg>
            <div>
              <p class="text-sm font-medium text-gray-900">Live Website</p>
              <p class="text-xs text-gray-500">GitHub Pages (may take 2-3 minutes to become available)</p>
            </div>
          </div>
          <a [href]="deployedUrls.pages" target="_blank" 
             class="inline-flex items-center px-3 py-1 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors">
            Visit Site
            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
            </svg>
          </a>
        </div>

        <!-- GitHub Repository -->
        <div class="flex items-center justify-between p-3 bg-white rounded border">
          <div class="flex items-center">
            <svg class="w-5 h-5 text-gray-600 mr-3" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
            </svg>
            <div>
              <p class="text-sm font-medium text-gray-900">Source Code</p>
              <p class="text-xs text-gray-500">GitHub Repository</p>
            </div>
          </div>
          <a [href]="deployedUrls.github" target="_blank" 
             class="inline-flex items-center px-3 py-1 bg-gray-600 text-white text-sm rounded hover:bg-gray-700 transition-colors">
            View Repo
            <svg class="w-4 h-4 ml-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
            </svg>
          </a>
        </div>
      </div>
    </div>

    <!-- Actions -->
    <div class="flex items-center justify-between pt-4">
      <button
        (click)="deleteDeployment()"
        class="text-red-600 hover:text-red-800 text-sm font-medium">
        Delete Deployment
      </button>
      
      <div class="space-x-3">
        <button
          (click)="resetForm()"
          class="px-4 py-2 text-gray-600 hover:text-gray-800">
          Deploy Another
        </button>
        
        <button
          class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors"
          (click)="deploymentComplete.emit({ success: true, urls: deployedUrls })">
          Done
        </button>
      </div>
    </div>
  </div>

</div>

[END OF FILE: frontend\src\app\components\deploy-website\deploy-website.component.html]

--------------------------------------------------------------------------------
FILE: frontend\src\app\components\github-test\github-test.html
SIZE: 27 bytes (0 KB)
--------------------------------------------------------------------------------
<p>github-test works!</p>

[END OF FILE: frontend\src\app\components\github-test\github-test.html]

--------------------------------------------------------------------------------
FILE: frontend\src\app\pages\sites\sites.component.html
SIZE: 6486 bytes (6.3 KB)
--------------------------------------------------------------------------------
<div class="min-h-screen bg-gray-50 py-8">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    
    <!-- Header -->
    <div class="mb-8">
      <h1 class="text-3xl font-bold text-gray-900">My Landing Pages</h1>
      <p class="mt-2 text-gray-600">Manage your deployed CV landing pages</p>
    </div>

    <!-- GitHub Connection Status -->
    <div *ngIf="!hasGitHubConnection" class="mb-6 bg-blue-50 border border-blue-200 rounded-lg p-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center">
          <div class="flex-shrink-0">
            <svg class="h-5 w-5 text-blue-400" fill="currentColor" viewBox="0 0 20 20">
              <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
            </svg>
          </div>
          <div class="ml-3">
            <p class="text-sm text-blue-800">
              Connect your GitHub account to deploy landing pages automatically
            </p>
          </div>
        </div>
        <button
          (click)="connectGitHub()"
          class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors">
          Connect GitHub
        </button>
      </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="text-center py-12">
      <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"></div>
      <p class="mt-4 text-gray-600">Loading your sites...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="error && !loading" class="bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
      <p class="text-red-800">{{ error }}</p>
      <button
        (click)="loadSites()"
        class="mt-2 text-red-600 hover:text-red-800 font-medium">
        Try Again
      </button>
    </div>

    <!-- Empty State -->
    <div *ngIf="!loading && sites.length === 0 && !error" class="text-center py-12">
      <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
      </svg>
      <h3 class="mt-2 text-sm font-medium text-gray-900">No landing pages yet</h3>
      <p class="mt-1 text-sm text-gray-500">Get started by creating your first landing page from your CV.</p>
      <div class="mt-6">
        <button
          (click)="createNewSite()"
          class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors">
          Create Landing Page
        </button>
      </div>
    </div>

    <!-- Sites Grid -->
    <div *ngIf="!loading && sites.length > 0" class="space-y-6">
      
      <!-- Create New Button -->
      <div class="flex justify-end">
        <button
          (click)="createNewSite()"
          class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors">
          + New Landing Page
        </button>
      </div>

      <!-- Sites List -->
      <div class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
        <div *ngFor="let site of sites" class="bg-white rounded-lg shadow-md overflow-hidden">
          
          <!-- Site Header -->
          <div class="p-6">
            <div class="flex items-center justify-between mb-4">
              <h3 class="text-lg font-semibold text-gray-900 truncate">{{ site.site_name }}</h3>
              <span [class]="'px-2 py-1 text-xs font-medium rounded-full ' + getStatusClass(site.deployment_status)">
                {{ getStatusText(site.deployment_status) }}
              </span>
            </div>

            <p class="text-sm text-gray-500 mb-4">{{ site.repo_name }}</p>

            <!-- Site Links -->
            <div class="space-y-2 mb-4">
              <a *ngIf="site.pages_url && site.deployment_status === 'deployed'" 
                 [href]="site.pages_url" 
                 target="_blank"
                 class="flex items-center text-blue-600 hover:text-blue-800 text-sm">
                <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                </svg>
                View Live Site
              </a>

              <a *ngIf="site.github_url" 
                 [href]="site.github_url" 
                 target="_blank"
                 class="flex items-center text-gray-600 hover:text-gray-800 text-sm">
                <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24">
                  <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                </svg>
                View Repository
              </a>
            </div>

            <!-- Site Meta -->
            <div class="text-xs text-gray-500">
              Created {{ formatDate(site.created_at) }}
            </div>
          </div>

          <!-- Site Actions -->
          <div class="bg-gray-50 px-6 py-3 flex justify-between items-center">
            <button class="text-blue-600 hover:text-blue-800 text-sm font-medium">
              Update
            </button>
            <button 
              (click)="deleteSite(site)"
              class="text-red-600 hover:text-red-800 text-sm font-medium">
              Delete
            </button>
          </div>

        </div>
      </div>
    </div>

  </div>
</div>

[END OF FILE: frontend\src\app\pages\sites\sites.component.html]

--------------------------------------------------------------------------------
FILE: frontend\src\styles.scss
SIZE: 13850 bytes (13.5 KB)
--------------------------------------------------------------------------------
// File: frontend/src/styles.scss
// Warm, unique CV Wizard styling - replaces the existing dark theme

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Warm Color Palette */
:root {
  /* Warm primary colors */
  --warm-orange: #ff6b35;
  --warm-coral: #ff8a65;
  --warm-peach: #ffb4a2;
  --warm-cream: #fff4f1;
  
  /* Warm accent colors */
  --warm-gold: #ffa726;
  --warm-amber: #ffcc80;
  --warm-yellow: #fff9c4;
  
  /* Neutral warm tones */
  --warm-brown: #8d6e63;
  --warm-taupe: #a1887f;
  --warm-beige: #f5f5dc;
  
  /* Text colors */
  --text-dark: #3e2723;
  --text-medium: #5d4037;
  --text-light: #8d6e63;
  
  /* Warm gradients */
  --gradient-warm: linear-gradient(135deg, #ff6b35 0%, #ff8a65 50%, #ffa726 100%);
  --gradient-soft: linear-gradient(135deg, #fff4f1 0%, #ffcc80 50%, #fff9c4 100%);
  --gradient-cream: linear-gradient(135deg, #fff4f1 0%, #f5f5dc 100%);
  
  /* Shadows with warm tint */
  --shadow-warm: 0 4px 20px rgba(255, 107, 53, 0.15);
  --shadow-soft: 0 2px 10px rgba(255, 138, 101, 0.1);
  --shadow-strong: 0 8px 30px rgba(255, 107, 53, 0.2);
}

/* Base styling */
* {
  box-sizing: border-box;
}

html {
  scroll-behavior: smooth;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
  line-height: 1.6;
  color: var(--text-dark);
  background: var(--gradient-soft);
  min-height: 100vh;
  background-attachment: fixed;
}

/* CV Wizard specific styles */
.cv-wizard {
  background: transparent;
}

/* Header styles - Warm and inviting */
.glass-card {
  background: rgba(255, 255, 255, 0.98);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(255, 138, 101, 0.2);
  border-radius: 16px;
  box-shadow: var(--shadow-soft);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.glass-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-warm);
  border-color: rgba(255, 107, 53, 0.3);
}

/* Header specific styling for perfect readability */
header.glass-card {
  background: white;
  border-bottom: 2px solid var(--warm-coral);
  border-radius: 0;
  margin: 0;
}

/* Header text improvements */
header h1, header .text-xl {
  color: var(--text-dark) !important;
  font-weight: 700;
}

header p, header .text-sm {
  color: var(--text-medium) !important;
  font-weight: 500;
}

/* Header logo area */
header .bg-gradient {
  background: var(--gradient-warm) !important;
}

/* Wizard header specifically */
.cv-wizard header {
  background: linear-gradient(135deg, white 0%, var(--warm-cream) 100%);
  border-bottom: 3px solid var(--warm-coral);
  box-shadow: 0 4px 20px rgba(255, 107, 53, 0.1);
}

/* Navigation and header improvements */
.nav-link {
  color: var(--text-medium);
  font-weight: 500;
  padding: 0.75rem 1.25rem;
  border-radius: 12px;
  transition: all 0.3s ease;
  text-decoration: none;
  font-size: 0.9rem;
}

.nav-link:hover {
  color: var(--warm-orange);
  background: rgba(255, 244, 241, 0.8);
  transform: translateY(-1px);
}

.nav-link.active {
  color: white;
  background: var(--gradient-warm);
  box-shadow: var(--shadow-warm);
}

/* Button styles - Warm and friendly */
.btn-primary {
  background: var(--gradient-warm);
  color: white;
  font-weight: 600;
  padding: 0.875rem 2rem;
  border-radius: 12px;
  border: none;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: var(--shadow-warm);
  font-size: 0.95rem;
  letter-spacing: 0.025em;
}

.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 25px rgba(255, 107, 53, 0.25);
  filter: brightness(1.05);
}

.btn-secondary {
  background: white;
  color: var(--warm-orange);
  font-weight: 500;
  padding: 0.875rem 2rem;
  border: 2px solid var(--warm-coral);
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: var(--shadow-soft);
  font-size: 0.95rem;
}

.btn-secondary:hover {
  background: var(--warm-cream);
  border-color: var(--warm-orange);
  transform: translateY(-1px);
  box-shadow: var(--shadow-warm);
}

.btn-ghost {
  background: transparent;
  color: var(--text-medium);
  font-weight: 500;
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-size: 0.9rem;
}

.btn-ghost:hover {
  background: rgba(255, 244, 241, 0.8);
  color: var(--warm-orange);
}

/* Card styles - Warm and welcoming */
.card {
  background: white;
  border: 1px solid rgba(255, 138, 101, 0.15);
  border-radius: 20px;
  padding: 2rem;
  box-shadow: var(--shadow-soft);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}

.card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: var(--gradient-warm);
  border-radius: 20px 20px 0 0;
}

.card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-strong);
  border-color: rgba(255, 107, 53, 0.2);
}

.card-compact {
  @extend .card;
  padding: 1.5rem;
}

.card-minimal {
  @extend .card;
  padding: 1rem;
}

/* Progress steps - Enhanced warm visualization */
.wizard-steps {
  background: white;
  border: 2px solid var(--warm-coral);
  border-radius: 20px;
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: var(--shadow-soft);
}

.step-line {
  background: linear-gradient(to right, var(--warm-coral) 0%, var(--warm-peach) 100%);
  height: 3px;
  border-radius: 2px;
}

.step-line.completed {
  background: var(--gradient-warm);
}

/* Step text styling */
.step-text h3 {
  color: var(--text-dark) !important;
  font-weight: 600;
}

.step-text p {
  color: var(--text-medium) !important;
}
/* File: frontend/src/styles.scss (Step indicator fixes) */
/* Fix for issue #2: Consistent circular step indicators */

.step-indicator {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 3rem;
  height: 3rem;
  border-radius: 50%;
  font-weight: 700;
  font-size: 1rem;
  transition: all 0.3s ease;
  position: relative;
  flex-shrink: 0; /* Prevent shrinking */
  min-width: 3rem; /* Ensure minimum width */
  min-height: 3rem; /* Ensure minimum height */
}

.step-indicator.completed {
  background: var(--gradient-warm);
  color: white;
  box-shadow: var(--shadow-warm);
  transform: scale(1.1);
}

.step-indicator.active {
  background: white;
  color: var(--warm-orange);
  border: 3px solid var(--warm-orange);
  box-shadow: 0 0 0 4px rgba(255, 107, 53, 0.1);
}

.step-indicator.pending {
  background: var(--warm-cream);
  color: var(--warm-taupe);
  border: 2px solid rgba(255, 138, 101, 0.2);
}

/* Ensure SVG icons in completed state are properly sized */
.step-indicator.completed svg {
  width: 1.25rem;
  height: 1.25rem;
}

/* Ensure numbers in pending/active state are centered */
.step-indicator span {
  line-height: 1;
  text-align: center;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .step-indicator {
    width: 2.5rem;
    height: 2.5rem;
    min-width: 2.5rem;
    min-height: 2.5rem;
    font-size: 0.9rem;
  }
  
  .step-indicator.completed svg {
    width: 1rem;
    height: 1rem;
  }
}

/* File upload area - Inviting and warm */
.upload-zone {
  border: 3px dashed var(--warm-coral);
  border-radius: 20px;
  padding: 3rem 2rem;
  text-align: center;
  transition: all 0.3s ease;
  background: var(--gradient-cream);
  color: var(--text-dark);
  position: relative;
  overflow: hidden;
}

.upload-zone::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(255, 107, 53, 0.05) 0%, transparent 70%);
  animation: gentle-pulse 4s ease-in-out infinite;
}

@keyframes gentle-pulse {
  0%, 100% { transform: scale(1) rotate(0deg); opacity: 0.5; }
  50% { transform: scale(1.1) rotate(180deg); opacity: 0.8; }
}

.upload-zone:hover {
  border-color: var(--warm-orange);
  background: white;
  transform: scale(1.02);
  box-shadow: var(--shadow-warm);
}

.upload-zone.dragover {
  border-color: var(--warm-gold);
  background: var(--warm-yellow);
  transform: scale(1.05);
  box-shadow: 0 8px 30px rgba(255, 167, 38, 0.2);
}

/* File upload success card */
.file-upload-card {
  background: linear-gradient(135deg, #e8f5e8 0%, #f1f8e9 100%);
  border: 2px solid #81c784;
  border-radius: 16px;
  color: #2e7d32;
  box-shadow: 0 4px 20px rgba(76, 175, 80, 0.15);
}

.file-upload-card .file-name {
  color: #1b5e20;
  font-weight: 600;
}

.file-upload-card .file-size {
  color: #388e3c;
}

/* Section headers - Warm and engaging */
.section-header {
  position: relative;
  display: inline-block;
  font-weight: 800;
  background: var(--gradient-warm);
  background-size: 200% 200%;
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: gradientShift 3s ease infinite;
}

@keyframes gradientShift {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

.section-header::after {
  content: '';
  position: absolute;
  bottom: -8px;
  left: 0;
  width: 100%;
  height: 4px;
  background: var(--gradient-warm);
  border-radius: 2px;
  transform: scaleX(0);
  transform-origin: left;
  animation: lineGrow 1s ease forwards;
}

@keyframes lineGrow {
  to { transform: scaleX(1); }
}

/* Input fields - Warm and accessible */
.input-field, .textarea-field {
  width: 100%;
  padding: 1rem 1.25rem;
  border: 2px solid rgba(255, 138, 101, 0.2);
  border-radius: 12px;
  background: white;
  font-size: 0.95rem;
  transition: all 0.3s ease;
  outline: none;
  color: var(--text-dark);
  font-family: inherit;
}

.input-field:focus, .textarea-field:focus {
  border-color: var(--warm-orange);
  box-shadow: 0 0 0 4px rgba(255, 107, 53, 0.1);
  background: var(--warm-cream);
}

.textarea-field {
  resize: vertical;
  min-height: 120px;
  line-height: 1.6;
}

.input-field::placeholder, .textarea-field::placeholder {
  color: var(--warm-taupe);
}

/* Status indicators - Warm feedback */
.status-success {
  display: flex;
  align-items: center;
  color: #2e7d32;
  background: linear-gradient(135deg, #e8f5e8 0%, #f1f8e9 100%);
  padding: 0.75rem 1rem;
  border-radius: 12px;
  font-size: 0.9rem;
  font-weight: 500;
  border: 1px solid #81c784;
}

.status-error {
  display: flex;
  align-items: center;
  color: #c62828;
  background: linear-gradient(135deg, #ffebee 0%, #fce4ec 100%);
  padding: 0.75rem 1rem;
  border-radius: 12px;
  font-size: 0.9rem;
  font-weight: 500;
  border: 1px solid #e57373;
}

/* Loading spinner - Warm animation */
.loading-spinner {
  display: inline-block;
  width: 1.5rem;
  height: 1.5rem;
  border: 3px solid rgba(255, 138, 101, 0.2);
  border-top: 3px solid var(--warm-orange);
  border-radius: 50%;
  animation: warm-spin 1s linear infinite;
}

@keyframes warm-spin {
  to { transform: rotate(360deg); }
}

/* Animations - Smooth and warm */
.fade-in {
  animation: warmFadeIn 0.6s ease-out;
}

.slide-up {
  animation: warmSlideUp 0.7s cubic-bezier(0.4, 0, 0.2, 1);
}

.scale-in {
  animation: warmScaleIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes warmFadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

@keyframes warmSlideUp {
  from { 
    opacity: 0;
    transform: translateY(30px);
  }
  to { 
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes warmScaleIn {
  from { 
    opacity: 0;
    transform: scale(0.95);
  }
  to { 
    opacity: 1;
    transform: scale(1);
  }
}

/* Utility classes */
.text-gradient {
  background: var(--gradient-warm);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.bg-gradient {
  background: var(--gradient-warm);
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 1rem;
}

.section-padding {
  padding: 3rem 0;
}

/* Text colors - Warm and readable */
.text-white { color: white !important; }
.text-gray-100 { color: var(--warm-cream) !important; }
.text-gray-200 { color: var(--warm-beige) !important; }
.text-gray-300 { color: var(--warm-taupe) !important; }
.text-gray-400 { color: var(--text-light) !important; }
.text-gray-600 { color: var(--text-medium) !important; }
.text-gray-700 { color: var(--text-dark) !important; }
.text-gray-900 { color: var(--text-dark) !important; }

/* Background utilities - Warm tones */
.bg-gray-50 { background: var(--warm-cream) !important; }
.bg-gray-100 { background: var(--warm-beige) !important; }
.bg-white { background: white !important; }

/* Responsive design */
@media (max-width: 768px) {
  .card {
    padding: 1.5rem;
    border-radius: 16px;
  }
  
  .btn-primary,
  .btn-secondary {
    padding: 0.75rem 1.5rem;
    font-size: 0.9rem;
  }
  
  .upload-zone {
    padding: 2rem 1rem;
  }
  
  .step-indicator {
    width: 2.5rem;
    height: 2.5rem;
    font-size: 0.9rem;
  }
}

/* Print styles */
@media print {
  body {
    background: white !important;
    color: #000 !important;
  }
  
  .card {
    background: white !important;
    box-shadow: none !important;
    border: 1px solid #ddd !important;
  }
}

[END OF FILE: frontend\src\styles.scss]

--------------------------------------------------------------------------------
FILE: frontend\src\app\app.scss
SIZE: 0 bytes (0 KB)
--------------------------------------------------------------------------------

[END OF FILE: frontend\src\app\app.scss]

--------------------------------------------------------------------------------
FILE: frontend\src\app\components\cv-wizard\cv-wizard.component.scss
SIZE: 14432 bytes (14.1 KB)
--------------------------------------------------------------------------------
/* Component-specific warm styling */
.cv-wizard {
  min-height: 100vh;
}

.warm-text-primary {
  color: #3e2723;
}

.warm-text-secondary {
  color: #5d4037;
}

.warm-text-light {
  color: #8d6e63;
}

.bg-warm-cream {
  background-color: #fff4f1;
}

.bg-warm-orange {
  background-color: #ff6b35;
}

.bg-warm-coral {
  background-color: #ff8a65;
}

.bg-warm-peach {
  background-color: #ffb4a2;
}

.bg-warm-yellow {
  background-color: #fff9c4;
}

.bg-warm-beige {
  background-color: #f5f5dc;
}

.bg-warm-taupe {
  background-color: #a1887f;
}

.text-warm-orange {
  color: #ff6b35;
}

.border-warm-peach {
  border-color: #ffb4a2;
}

.border-warm-coral {
  border-color: #ff8a65;
}

.ring-warm-coral {
  --tw-ring-color: #ff8a65;
}

/* Wizard specific styling */
.wizard-steps {
  background: white;
  border: 2px solid #ff8a65;
  border-radius: 20px;
  padding: 2rem;
  margin-bottom: 2rem;
  box-shadow: 0 4px 20px rgba(255, 107, 53, 0.1);
}

.step-line {
  background: linear-gradient(to right, #ff8a65 0%, #ffb4a2 100%);
  height: 3px;
  border-radius: 2px;
}

.step-line.completed {
  background: linear-gradient(135deg, #ff6b35 0%, #ff8a65 100%);
}

/* Step indicator fixes */
.step-indicator {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 3rem;
  height: 3rem;
  border-radius: 50%;
  font-weight: 700;
  font-size: 1rem;
  transition: all 0.3s ease;
  position: relative;
  flex-shrink: 0;
  min-width: 3rem;
  min-height: 3rem;
}

.step-indicator.completed {
  background: linear-gradient(135deg, #ff6b35 0%, #ff8a65 100%);
  color: white;
  box-shadow: 0 4px 20px rgba(255, 107, 53, 0.15);
  transform: scale(1.1);
}

.step-indicator.active {
  background: white;
  color: #ff6b35;
  border: 3px solid #ff6b35;
  box-shadow: 0 0 0 4px rgba(255, 107, 53, 0.1);
}

.step-indicator.pending {
  background: #fff4f1;
  color: #a1887f;
  border: 2px solid rgba(255, 138, 101, 0.2);
}

/* Ensure SVG icons in completed state are properly sized */
.step-indicator.completed svg {
  width: 1.25rem;
  height: 1.25rem;
}

/* Ensure numbers in pending/active state are centered */
.step-indicator span {
  line-height: 1;
  text-align: center;
}

/* Step text styling */
.step-text h3 {
  color: #3e2723 !important;
  font-weight: 600;
}

.step-text p {
  color: #5d4037 !important;
}

.upload-zone {
  border: 3px dashed #ff8a65;
  border-radius: 20px;
  padding: 3rem 2rem;
  text-align: center;
  transition: all 0.3s ease;
  background: linear-gradient(135deg, #fff4f1 0%, #f5f5dc 100%);
  color: #3e2723;
  position: relative;
  overflow: hidden;
}

.upload-zone::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: radial-gradient(circle, rgba(255, 107, 53, 0.05) 0%, transparent 70%);
  animation: gentle-pulse 4s ease-in-out infinite;
}

@keyframes gentle-pulse {
  0%, 100% { 
    transform: scale(1) rotate(0deg); 
    opacity: 0.5; 
  }
  50% { 
    transform: scale(1.1) rotate(180deg); 
    opacity: 0.8; 
  }
}

.upload-zone:hover {
  border-color: #ff6b35;
  background: white;
  transform: scale(1.02);
  box-shadow: 0 8px 30px rgba(255, 107, 53, 0.15);
}

.upload-zone.dragover {
  border-color: #ffa726;
  background: #fff9c4;
  transform: scale(1.05);
  box-shadow: 0 8px 30px rgba(255, 167, 38, 0.2);
}

/* File upload success card */
.file-upload-card {
  background: linear-gradient(135deg, #e8f5e8 0%, #f1f8e9 100%);
  border: 2px solid #81c784;
  border-radius: 16px;
  color: #2e7d32;
  box-shadow: 0 4px 20px rgba(76, 175, 80, 0.15);
}

.file-upload-card .file-name {
  color: #1b5e20;
  font-weight: 600;
}

.file-upload-card .file-size {
  color: #388e3c;
}

/* Loading spinner */
.loading-spinner {
  display: inline-block;
  width: 1.5rem;
  height: 1.5rem;
  border: 3px solid rgba(255, 138, 101, 0.2);
  border-top: 3px solid #ff6b35;
  border-radius: 50%;
  animation: warm-spin 1s linear infinite;
}

@keyframes warm-spin {
  to { 
    transform: rotate(360deg); 
  }
}

/* Status indicators */
.status-success {
  display: flex;
  align-items: center;
  color: #2e7d32;
  background: linear-gradient(135deg, #e8f5e8 0%, #f1f8e9 100%);
  padding: 0.75rem 1rem;
  border-radius: 12px;
  font-size: 0.9rem;
  font-weight: 500;
  border: 1px solid #81c784;
}

.status-error {
  display: flex;
  align-items: center;
  color: #c62828;
  background: linear-gradient(135deg, #ffebee 0%, #fce4ec 100%);
  padding: 0.75rem 1rem;
  border-radius: 12px;
  font-size: 0.9rem;
  font-weight: 500;
  border: 1px solid #e57373;
}

/* Input and textarea styling */
.textarea-field {
  width: 100%;
  padding: 1rem 1.25rem;
  border: 2px solid rgba(255, 138, 101, 0.2);
  border-radius: 12px;
  background: white;
  font-size: 0.95rem;
  transition: all 0.3s ease;
  outline: none;
  color: #3e2723;
  font-family: inherit;
  resize: vertical;
  min-height: 120px;
  line-height: 1.6;
}

.textarea-field:focus {
  border-color: #ff6b35;
  box-shadow: 0 0 0 4px rgba(255, 107, 53, 0.1);
  background: #fff4f1;
}

.textarea-field::placeholder {
  color: #a1887f;
}

/* Button styles */
.btn-primary {
  background: linear-gradient(135deg, #ff6b35, #ff8a65);
  color: white;
  font-weight: 600;
  padding: 0.875rem 2rem;
  border-radius: 12px;
  border: none;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(255, 107, 53, 0.3);
  font-size: 0.95rem;
  letter-spacing: 0.025em;
}

.btn-primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 25px rgba(255, 107, 53, 0.4);
  filter: brightness(1.05);
}

.btn-secondary {
  background: white;
  color: #ff6b35;
  font-weight: 500;
  padding: 0.875rem 2rem;
  border: 2px solid #ff8a65;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 2px 10px rgba(255, 107, 53, 0.1);
  font-size: 0.95rem;
}

.btn-secondary:hover {
  background: #fff4f1;
  border-color: #ff6b35;
  transform: translateY(-1px);
  box-shadow: 0 4px 20px rgba(255, 107, 53, 0.15);
}

.btn-ghost {
  background: transparent;
  color: #5d4037;
  font-weight: 500;
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.3s ease;
  font-size: 0.9rem;
}

.btn-ghost:hover {
  background: rgba(255, 244, 241, 0.8);
  color: #ff6b35;
}

/* Card styles */
.card {
  background: white;
  border: 1px solid rgba(255, 138, 101, 0.15);
  border-radius: 20px;
  padding: 2rem;
  box-shadow: 0 2px 10px rgba(255, 107, 53, 0.1);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}

.card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 4px;
  background: linear-gradient(135deg, #ff6b35 0%, #ff8a65 100%);
  border-radius: 20px 20px 0 0;
}

.card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 30px rgba(255, 107, 53, 0.2);
  border-color: rgba(255, 107, 53, 0.2);
}

/* Text gradient */
.text-gradient {
  background: linear-gradient(135deg, #ff6b35 0%, #ff8a65 50%, #ffa726 100%);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

.bg-gradient {
  background: linear-gradient(135deg, #ff6b35 0%, #ff8a65 100%);
}

/* Animations */
.fade-in {
  animation: warmFadeIn 0.6s ease-out;
}

.slide-up {
  animation: warmSlideUp 0.7s cubic-bezier(0.4, 0, 0.2, 1);
}

.scale-in {
  animation: warmScaleIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes warmFadeIn {
  from { 
    opacity: 0; 
    transform: translateY(10px); 
  }
  to { 
    opacity: 1; 
    transform: translateY(0); 
  }
}

@keyframes warmSlideUp {
  from { 
    opacity: 0;
    transform: translateY(30px);
  }
  to { 
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes warmScaleIn {
  from { 
    opacity: 0;
    transform: scale(0.95);
  }
  to { 
    opacity: 1;
    transform: scale(1);
  }
}

/* Responsive design */
@media (max-width: 768px) {
  .wizard-steps {
    padding: 1rem;
  }
  
  .upload-zone {
    padding: 2rem 1rem;
  }
  
  .step-indicator {
    width: 2.5rem;
    height: 2.5rem;
    min-width: 2.5rem;
    min-height: 2.5rem;
    font-size: 0.9rem;
  }
  
  .step-indicator.completed svg {
    width: 1rem;
    height: 1rem;
  }

  .card {
    padding: 1.5rem;
    border-radius: 16px;
  }
  
  .btn-primary,
  .btn-secondary {
    padding: 0.75rem 1.5rem;
    font-size: 0.9rem;
  }
}

/* Additional utility classes for warm theme */
.section-padding {
  padding: 3rem 0;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 1rem;
}

/* Spacing utilities */
.space-y-6 > * + * {
  margin-top: 1.5rem;
}

.space-y-4 > * + * {
  margin-top: 1rem;
}

.space-y-3 > * + * {
  margin-top: 0.75rem;
}

.space-x-4 > * + * {
  margin-left: 1rem;
}

.space-x-3 > * + * {
  margin-left: 0.75rem;
}

.space-x-2 > * + * {
  margin-left: 0.5rem;
}

/* Flexbox utilities */
.flex {
  display: flex;
}

.flex-col {
  flex-direction: column;
}

.flex-1 {
  flex: 1 1 0%;
}

.flex-shrink-0 {
  flex-shrink: 0;
}

.items-center {
  align-items: center;
}

.items-start {
  align-items: flex-start;
}

.justify-center {
  justify-content: center;
}

.justify-between {
  justify-content: space-between;
}

/* Grid utilities */
.grid {
  display: grid;
}

.grid-cols-1 {
  grid-template-columns: repeat(1, minmax(0, 1fr));
}

/* Size utilities */
.w-2 { width: 0.5rem; }
.w-4 { width: 1rem; }
.w-5 { width: 1.25rem; }
.w-8 { width: 2rem; }
.w-10 { width: 2.5rem; }
.w-12 { width: 3rem; }
.w-16 { width: 4rem; }
.w-20 { width: 5rem; }
.w-24 { width: 6rem; }
.w-full { width: 100%; }

.h-1 { height: 0.25rem; }
.h-2 { height: 0.5rem; }
.h-4 { height: 1rem; }
.h-5 { height: 1.25rem; }
.h-8 { height: 2rem; }
.h-10 { height: 2.5rem; }
.h-12 { height: 3rem; }
.h-16 { height: 4rem; }
.h-20 { height: 5rem; }
.h-24 { height: 6rem; }
.h-full { height: 100%; }

/* Margin utilities */
.mb-1 { margin-bottom: 0.25rem; }
.mb-2 { margin-bottom: 0.5rem; }
.mb-3 { margin-bottom: 0.75rem; }
.mb-4 { margin-bottom: 1rem; }
.mb-6 { margin-bottom: 1.5rem; }
.mb-8 { margin-bottom: 2rem; }
.mb-12 { margin-bottom: 3rem; }

.mt-2 { margin-top: 0.5rem; }
.mt-6 { margin-top: 1.5rem; }
.mt-8 { margin-top: 2rem; }

.mr-2 { margin-right: 0.5rem; }
.mr-3 { margin-right: 0.75rem; }

.ml-2 { margin-left: 0.5rem; }
.ml-4 { margin-left: 1rem; }

.mx-auto { 
  margin-left: auto; 
  margin-right: auto; 
}

.mx-6 { 
  margin-left: 1.5rem; 
  margin-right: 1.5rem; 
}

/* Padding utilities */
.p-2 { padding: 0.5rem; }
.p-4 { padding: 1rem; }
.p-6 { padding: 1.5rem; }
.p-8 { padding: 2rem; }

.px-4 { 
  padding-left: 1rem; 
  padding-right: 1rem; 
}

.py-2 { 
  padding-top: 0.5rem; 
  padding-bottom: 0.5rem; 
}

.py-4 { 
  padding-top: 1rem; 
  padding-bottom: 1rem; 
}

.pt-6 { padding-top: 1.5rem; }

/* Border utilities */
.border { border-width: 1px; }
.border-2 { border-width: 2px; }
.border-t { border-top-width: 1px; }

.border-green-200 { border-color: #bbf7d0; }
.border-green-300 { border-color: #86efac; }

/* Background utilities */
.bg-white { background-color: #ffffff; }
.bg-green-50 { background-color: #f0fdf4; }
.bg-green-100 { background-color: #dcfce7; }
.bg-green-500 { background-color: #22c55e; }
.bg-green-600 { background-color: #16a34a; }
.bg-purple-50 { background-color: #faf5ff; }
.bg-purple-100 { background-color: #f3e8ff; }
.bg-purple-500 { background-color: #a855f7; }
.bg-yellow-100 { background-color: #fef3c7; }
.bg-yellow-500 { background-color: #eab308; }

/* Text utilities */
.text-xs { font-size: 0.75rem; }
.text-sm { font-size: 0.875rem; }
.text-lg { font-size: 1.125rem; }
.text-xl { font-size: 1.25rem; }
.text-2xl { font-size: 1.5rem; }
.text-4xl { font-size: 2.25rem; }

.font-medium { font-weight: 500; }
.font-semibold { font-weight: 600; }
.font-bold { font-weight: 700; }

.text-center { text-align: center; }
.text-left { text-align: left; }

.leading-relaxed { line-height: 1.625; }

/* Color utilities */
.text-white { color: #ffffff; }
.text-green-500 { color: #22c55e; }
.text-green-600 { color: #16a34a; }
.text-green-700 { color: #15803d; }
.text-green-800 { color: #166534; }
.text-red-400 { color: #f87171; }
.text-red-600 { color: #dc2626; }

/* Border radius utilities */
.rounded-full { border-radius: 9999px; }
.rounded-lg { border-radius: 0.5rem; }
.rounded-xl { border-radius: 0.75rem; }

/* Shadow utilities */
.shadow-sm { 
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); 
}

.shadow-lg { 
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); 
}

/* Position utilities */
.relative { position: relative; }
.absolute { position: absolute; }

/* Z-index utilities */
.z-10 { z-index: 10; }

/* Overflow utilities */
.overflow-hidden { overflow: hidden; }
.object-cover { object-fit: cover; }

/* Display utilities */
.hidden { display: none; }
.inline-flex { display: inline-flex; }

/* Cursor utilities */
.cursor-pointer { cursor: pointer; }

/* Transition utilities */
.transition-colors { 
  transition-property: color, background-color, border-color; 
  transition-duration: 150ms; 
}

/* Ring utilities */
.ring-4 { 
  box-shadow: 0 0 0 4px var(--tw-ring-color); 
}

/* Max width utilities */
.max-w-sm { max-width: 24rem; }
.max-w-md { max-width: 28rem; }
.max-w-lg { max-width: 32rem; }
.max-w-xl { max-width: 36rem; }
.max-w-2xl { max-width: 42rem; }
.max-w-4xl { max-width: 56rem; }
.max-w-5xl { max-width: 64rem; }

/* Hover states */
.hover\:text-red-600:hover { color: #dc2626; }
.hover\:bg-red-50:hover { background-color: #fef2f2; }

/* Responsive utilities */
@media (min-width: 640px) {
  .sm\:flex-row { flex-direction: row; }
}

@media (min-width: 768px) {
  .md\:text-5xl { font-size: 3rem; }
  .md\:block { display: block; }
}

[END OF FILE: frontend\src\app\components\cv-wizard\cv-wizard.component.scss]

--------------------------------------------------------------------------------
FILE: frontend\src\app\components\deploy-website\deploy-website.component.scss
SIZE: 398 bytes (0.4 KB)
--------------------------------------------------------------------------------
.animate-spin {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.deploy-website-container {
  border: 1px solid #e5e7eb;
  transition: all 0.2s ease-in-out;
}

.deploy-website-container:hover {
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

[END OF FILE: frontend\src\app\components\deploy-website\deploy-website.component.scss]

--------------------------------------------------------------------------------
FILE: frontend\src\app\components\github-test\github-test.scss
SIZE: 0 bytes (0 KB)
--------------------------------------------------------------------------------

[END OF FILE: frontend\src\app\components\github-test\github-test.scss]

--------------------------------------------------------------------------------
FILE: frontend\src\app\pages\sites\sites.component.scss
SIZE: 171 bytes (0.2 KB)
--------------------------------------------------------------------------------
.animate-spin {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

[END OF FILE: frontend\src\app\pages\sites\sites.component.scss]

--------------------------------------------------------------------------------
FILE: frontend\angular.json
SIZE: 2756 bytes (2.7 KB)
--------------------------------------------------------------------------------
{
  "$schema": "./node_modules/@angular/cli/lib/config/schema.json",
  "version": 1,
  "newProjectRoot": "projects",
  "projects": {
    "frontend": {
      "projectType": "application",
      "schematics": {
        "@schematics/angular:component": {
          "style": "scss"
        }
      },
      "root": "",
      "sourceRoot": "src",
      "prefix": "app",
      "architect": {
        "build": {
          "builder": "@angular/build:application",
          "options": {
            "browser": "src/main.ts",
            "polyfills": [
              "zone.js"
            ],
            "tsConfig": "tsconfig.app.json",
            "inlineStyleLanguage": "scss",
            "assets": [
              {
                "glob": "**/*",
                "input": "public"
              }
            ],
            "styles": [
              "src/styles.scss"
            ]
          },
          "configurations": {
            "production": {
              "budgets": [
                {
                  "type": "initial",
                  "maximumWarning": "500kB",
                  "maximumError": "1MB"
                },
                {
                  "type": "anyComponentStyle",
                  "maximumWarning": "4kB",
                  "maximumError": "8kB"
                }
              ],
              "outputHashing": "all"
            },
            "development": {
              "optimization": false,
              "extractLicenses": false,
              "sourceMap": true
            }
          },
          "defaultConfiguration": "production"
        },
        "serve": {
          "builder": "@angular/build:dev-server",
          "options": {
            "proxyConfig": "proxy.conf.json"
          },
          "configurations": {
            "production": {
              "buildTarget": "frontend:build:production"
            },
            "development": {
              "buildTarget": "frontend:build:development"
            }
          },
          "defaultConfiguration": "development"
        },
        "extract-i18n": {
          "builder": "@angular/build:extract-i18n"
        },
        "test": {
          "builder": "@angular/build:karma",
          "options": {
            "polyfills": [
              "zone.js",
              "zone.js/testing"
            ],
            "tsConfig": "tsconfig.spec.json",
            "inlineStyleLanguage": "scss",
            "assets": [
              {
                "glob": "**/*",
                "input": "public"
              }
            ],
            "styles": [
              "src/styles.scss"
            ]
          }
        }
      }
    }
  }
}

[END OF FILE: frontend\angular.json]

--------------------------------------------------------------------------------
FILE: frontend\package.json
SIZE: 1098 bytes (1.1 KB)
--------------------------------------------------------------------------------
{
  "name": "frontend",
  "version": "0.0.0",
  "scripts": {
    "ng": "ng",
    "start": "ng serve",
    "build": "ng build",
    "watch": "ng build --watch --configuration development",
    "test": "ng test"
  },
  "private": true,
  "dependencies": {
    "@angular/animations": "^20.0.6",
    "@angular/common": "^20.0.0",
    "@angular/compiler": "^20.0.0",
    "@angular/core": "^20.0.0",
    "@angular/forms": "^20.0.0",
    "@angular/platform-browser": "^20.0.0",
    "@angular/router": "^20.0.0",
    "rxjs": "~7.8.0",
    "tslib": "^2.3.0",
    "zone.js": "~0.15.0"
  },
  "devDependencies": {
    "@angular/build": "^20.0.0",
    "@angular/cli": "^20.0.0",
    "@angular/compiler-cli": "^20.0.0",
    "@types/jasmine": "~5.1.0",
    "autoprefixer": "^10.4.21",
    "jasmine-core": "~5.7.0",
    "karma": "~6.4.0",
    "karma-chrome-launcher": "~3.2.0",
    "karma-coverage": "~2.2.0",
    "karma-jasmine": "~5.1.0",
    "karma-jasmine-html-reporter": "~2.1.0",
    "postcss": "^8.5.6",
    "tailwindcss": "^3.4.0",
    "typescript": "~5.8.2"
  }
}

[END OF FILE: frontend\package.json]

--------------------------------------------------------------------------------
FILE: frontend\proxy.conf.json
SIZE: 111 bytes (0.1 KB)
--------------------------------------------------------------------------------
{
  "/api/*": {
    "target": "http://localhost:3000",
    "secure": true,
    "changeOrigin": true
  }
}

[END OF FILE: frontend\proxy.conf.json]

--------------------------------------------------------------------------------
FILE: frontend\tsconfig.app.json
SIZE: 444 bytes (0.4 KB)
--------------------------------------------------------------------------------
/* To learn more about Typescript configuration file: https://www.typescriptlang.org/docs/handbook/tsconfig-json.html. */
/* To learn more about Angular compiler options: https://angular.dev/reference/configs/angular-compiler-options. */
{
  "extends": "./tsconfig.json",
  "compilerOptions": {
    "outDir": "./out-tsc/app",
    "types": []
  },
  "include": [
    "src/**/*.ts"
  ],
  "exclude": [
    "src/**/*.spec.ts"
  ]
}

[END OF FILE: frontend\tsconfig.app.json]

--------------------------------------------------------------------------------
FILE: frontend\tsconfig.json
SIZE: 1026 bytes (1 KB)
--------------------------------------------------------------------------------
/* To learn more about Typescript configuration file: https://www.typescriptlang.org/docs/handbook/tsconfig-json.html. */
/* To learn more about Angular compiler options: https://angular.dev/reference/configs/angular-compiler-options. */
{
  "compileOnSave": false,
  "compilerOptions": {
    "strict": true,
    "noImplicitOverride": true,
    "noPropertyAccessFromIndexSignature": true,
    "noImplicitReturns": true,
    "noFallthroughCasesInSwitch": true,
    "skipLibCheck": true,
    "isolatedModules": true,
    "experimentalDecorators": true,
    "importHelpers": true,
    "target": "ES2022",
    "module": "preserve"
  },
  "angularCompilerOptions": {
    "enableI18nLegacyMessageIdFormat": false,
    "strictInjectionParameters": true,
    "strictInputAccessModifiers": true,
    "typeCheckHostBindings": true,
    "strictTemplates": true
  },
  "files": [],
  "references": [
    {
      "path": "./tsconfig.app.json"
    },
    {
      "path": "./tsconfig.spec.json"
    }
  ]
}

[END OF FILE: frontend\tsconfig.json]

--------------------------------------------------------------------------------
FILE: frontend\tsconfig.spec.json
SIZE: 422 bytes (0.4 KB)
--------------------------------------------------------------------------------
/* To learn more about Typescript configuration file: https://www.typescriptlang.org/docs/handbook/tsconfig-json.html. */
/* To learn more about Angular compiler options: https://angular.dev/reference/configs/angular-compiler-options. */
{
  "extends": "./tsconfig.json",
  "compilerOptions": {
    "outDir": "./out-tsc/spec",
    "types": [
      "jasmine"
    ]
  },
  "include": [
    "src/**/*.ts"
  ]
}

[END OF FILE: frontend\tsconfig.spec.json]

--------------------------------------------------------------------------------
FILE: frontend\.vscode\extensions.json
SIZE: 134 bytes (0.1 KB)
--------------------------------------------------------------------------------
{
  // For more information, visit: https://go.microsoft.com/fwlink/?linkid=827846
  "recommendations": ["angular.ng-template"]
}

[END OF FILE: frontend\.vscode\extensions.json]

--------------------------------------------------------------------------------
FILE: frontend\.vscode\launch.json
SIZE: 490 bytes (0.5 KB)
--------------------------------------------------------------------------------
{
  // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387
  "version": "0.2.0",
  "configurations": [
    {
      "name": "ng serve",
      "type": "chrome",
      "request": "launch",
      "preLaunchTask": "npm: start",
      "url": "http://localhost:4200/"
    },
    {
      "name": "ng test",
      "type": "chrome",
      "request": "launch",
      "preLaunchTask": "npm: test",
      "url": "http://localhost:9876/debug.html"
    }
  ]
}

[END OF FILE: frontend\.vscode\launch.json]

--------------------------------------------------------------------------------
FILE: frontend\.vscode\tasks.json
SIZE: 980 bytes (1 KB)
--------------------------------------------------------------------------------
{
  // For more information, visit: https://go.microsoft.com/fwlink/?LinkId=733558
  "version": "2.0.0",
  "tasks": [
    {
      "type": "npm",
      "script": "start",
      "isBackground": true,
      "problemMatcher": {
        "owner": "typescript",
        "pattern": "$tsc",
        "background": {
          "activeOnStart": true,
          "beginsPattern": {
            "regexp": "(.*?)"
          },
          "endsPattern": {
            "regexp": "bundle generation complete"
          }
        }
      }
    },
    {
      "type": "npm",
      "script": "test",
      "isBackground": true,
      "problemMatcher": {
        "owner": "typescript",
        "pattern": "$tsc",
        "background": {
          "activeOnStart": true,
          "beginsPattern": {
            "regexp": "(.*?)"
          },
          "endsPattern": {
            "regexp": "bundle generation complete"
          }
        }
      }
    }
  ]
}

[END OF FILE: frontend\.vscode\tasks.json]

--------------------------------------------------------------------------------
FILE: frontend\README.md
SIZE: 1530 bytes (1.5 KB)
--------------------------------------------------------------------------------
# Frontend

This project was generated using [Angular CLI](https://github.com/angular/angular-cli) version 20.0.0.

## Development server

To start a local development server, run:

```bash
ng serve
```

Once the server is running, open your browser and navigate to `http://localhost:4200/`. The application will automatically reload whenever you modify any of the source files.

## Code scaffolding

Angular CLI includes powerful code scaffolding tools. To generate a new component, run:

```bash
ng generate component component-name
```

For a complete list of available schematics (such as `components`, `directives`, or `pipes`), run:

```bash
ng generate --help
```

## Building

To build the project run:

```bash
ng build
```

This will compile your project and store the build artifacts in the `dist/` directory. By default, the production build optimizes your application for performance and speed.

## Running unit tests

To execute unit tests with the [Karma](https://karma-runner.github.io) test runner, use the following command:

```bash
ng test
```

## Running end-to-end tests

For end-to-end (e2e) testing, run:

```bash
ng e2e
```

Angular CLI does not come with an end-to-end testing framework by default. You can choose one that suits your needs.

## Additional Resources

For more information on using the Angular CLI, including detailed command references, visit the [Angular CLI Overview and Command Reference](https://angular.dev/tools/cli) page.

[END OF FILE: frontend\README.md]

--------------------------------------------------------------------------------
FILE: frontend\.gitignore
SIZE: 588 bytes (0.6 KB)
--------------------------------------------------------------------------------
# See http://help.github.com/ignore-files/ for more about ignoring files.

# Compiled output
/dist
/tmp
/out-tsc
/bazel-out

# Node
/node_modules
npm-debug.log
yarn-error.log

# IDEs and editors
.idea/
.project
.classpath
.c9/
*.launch
.settings/
*.sublime-workspace

# Visual Studio Code
.vscode/*
!.vscode/settings.json
!.vscode/tasks.json
!.vscode/launch.json
!.vscode/extensions.json
.history/*

# Miscellaneous
/.angular/cache
.sass-cache/
/connect.lock
/coverage
/libpeerconnection.log
testem.log
/typings

# System files
.DS_Store
Thumbs.db

[END OF FILE: frontend\.gitignore]

=====================================
DIRECTORY: api
PATH: C:\Coding\cv-landing-generator\api
=====================================

--------------------------------------------------------------------------------
FILE: api\health.js
SIZE: 905 bytes (0.9 KB)
--------------------------------------------------------------------------------
export default function handler(req, res) {
  // Set CORS headers
  res.setHeader('Access-Control-Allow-Origin', '*');
  res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');
  res.setHeader('Access-Control-Allow-Headers', 'Content-Type, Authorization');

  // Handle OPTIONS request for CORS preflight
  if (req.method === 'OPTIONS') {
    res.status(200).end();
    return;
  }

  if (req.method !== 'GET') {
    res.status(405).json({ error: 'Method not allowed' });
    return;
  }

  try {
    res.status(200).json({
      status: 'healthy',
      message: 'CV Landing Generator API is running',
      timestamp: new Date().toISOString(),
      version: '1.0.0'
    });
  } catch (error) {
    console.error('Health check error:', error);
    res.status(500).json({
      status: 'error',
      message: 'Internal server error'
    });
  }
}

[END OF FILE: api\health.js]

--------------------------------------------------------------------------------
FILE: api\test.js
SIZE: 887 bytes (0.9 KB)
--------------------------------------------------------------------------------
export default function handler(req, res) {
  // Set CORS headers
  res.setHeader('Access-Control-Allow-Origin', '*');
  res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');
  res.setHeader('Access-Control-Allow-Headers', 'Content-Type, Authorization');

  // Handle OPTIONS request for CORS preflight
  if (req.method === 'OPTIONS') {
    res.status(200).end();
    return;
  }

  try {
    const { method, query, body } = req;

    res.status(200).json({
      message: 'Test endpoint working!',
      requestMethod: method,
      queryParams: query,
      requestBody: body,
      timestamp: new Date().toISOString()
    });
  } catch (error) {
    console.error('Test endpoint error:', error);
    res.status(500).json({
      status: 'error',
      message: 'Internal server error',
      error: error.message
    });
  }
}

[END OF FILE: api\test.js]

--------------------------------------------------------------------------------
FILE: api\auth\login.js
SIZE: 1835 bytes (1.8 KB)
--------------------------------------------------------------------------------
const { OAuth2Client } = require('google-auth-library');
const jwt = require('jsonwebtoken');

const client = new OAuth2Client(process.env.GOOGLE_CLIENT_ID);

export default async function handler(req, res) {
  // Set CORS headers
  res.setHeader('Access-Control-Allow-Origin', '*');
  res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');
  res.setHeader('Access-Control-Allow-Headers', 'Content-Type, Authorization');

  if (req.method === 'OPTIONS') {
    res.status(200).end();
    return;
  }

  if (req.method !== 'POST') {
    res.status(405).json({ error: 'Method not allowed' });
    return;
  }

  try {
    const { credential } = req.body;

    if (!credential) {
      res.status(400).json({ error: 'Google credential is required' });
      return;
    }

    // Verify Google token
    const ticket = await client.verifyIdToken({
      idToken: credential,
      audience: process.env.GOOGLE_CLIENT_ID,
    });

    const payload = ticket.getPayload();
    
    if (!payload) {
      res.status(400).json({ error: 'Invalid Google token' });
      return;
    }

    // Extract user info
    const user = {
      id: payload.sub,
      email: payload.email,
      name: payload.name,
      picture: payload.picture,
      verified: payload.email_verified
    };

    // Create JWT token
    const token = jwt.sign(
      { userId: user.id, email: user.email },
      process.env.JWT_SECRET,
      { expiresIn: '7d' }
    );

    res.status(200).json({
      success: true,
      user: user,
      token: token,
      message: 'Login successful'
    });

  } catch (error) {
    console.error('Login error:', error);
    res.status(500).json({
      error: 'Authentication failed',
      message: error.message
    });
  }
}

[END OF FILE: api\auth\login.js]

--------------------------------------------------------------------------------
FILE: api\auth\logout.js
SIZE: 868 bytes (0.8 KB)
--------------------------------------------------------------------------------
export default async function handler(req, res) {
  // Set CORS headers
  res.setHeader('Access-Control-Allow-Origin', '*');
  res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');
  res.setHeader('Access-Control-Allow-Headers', 'Content-Type, Authorization');

  if (req.method === 'OPTIONS') {
    res.status(200).end();
    return;
  }

  if (req.method !== 'POST') {
    res.status(405).json({ error: 'Method not allowed' });
    return;
  }

  try {
    // In a real app, you might want to blacklist the token
    // For now, we'll just return success
    res.status(200).json({
      success: true,
      message: 'Logout successful'
    });
  } catch (error) {
    console.error('Logout error:', error);
    res.status(500).json({
      error: 'Logout failed',
      message: error.message
    });
  }
}

[END OF FILE: api\auth\logout.js]

--------------------------------------------------------------------------------
FILE: api\auth\user.js
SIZE: 1438 bytes (1.4 KB)
--------------------------------------------------------------------------------
const jwt = require('jsonwebtoken');

export default async function handler(req, res) {
  // Set CORS headers
  res.setHeader('Access-Control-Allow-Origin', '*');
  res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');
  res.setHeader('Access-Control-Allow-Headers', 'Content-Type, Authorization');

  if (req.method === 'OPTIONS') {
    res.status(200).end();
    return;
  }

  if (req.method !== 'GET') {
    res.status(405).json({ error: 'Method not allowed' });
    return;
  }

  try {
    const authHeader = req.headers.authorization;
    
    if (!authHeader || !authHeader.startsWith('Bearer ')) {
      res.status(401).json({ error: 'No token provided' });
      return;
    }

    const token = authHeader.substring(7);
    
    try {
      const decoded = jwt.verify(token, process.env.JWT_SECRET);
      
      // In a real app, you'd fetch user data from database
      // For now, we'll return the decoded token data
      res.status(200).json({
        success: true,
        user: {
          id: decoded.userId,
          email: decoded.email
        }
      });
    } catch (jwtError) {
      res.status(401).json({ error: 'Invalid token' });
      return;
    }

  } catch (error) {
    console.error('User info error:', error);
    res.status(500).json({
      error: 'Failed to get user info',
      message: error.message
    });
  }
}

[END OF FILE: api\auth\user.js]

--------------------------------------------------------------------------------
FILE: api\cv\preview.js
SIZE: 4584 bytes (4.5 KB)
--------------------------------------------------------------------------------
// File: api/cv/preview.js
const fs = require('fs');
const path = require('path');

export default async function handler(req, res) {
  // Set CORS headers
  res.setHeader('Access-Control-Allow-Origin', '*');
  res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');
  res.setHeader('Access-Control-Allow-Headers', 'Content-Type, Authorization');

  if (req.method === 'OPTIONS') {
    res.status(200).end();
    return;
  }

  if (req.method !== 'GET') {
    res.status(405).json({ error: 'Method not allowed' });
    return;
  }

  try {
    const { previewId } = req.query;
    
    if (!previewId) {
      res.status(400).json({ error: 'Preview ID is required' });
      return;
    }

    // In production, you'd get this from your database
    // For now, we'll use the same storage as the main server
    const generationInfo = getGenerationInfo(previewId); // You'll need to implement this
    
    if (!generationInfo) {
      res.status(404).json({ error: 'Preview not found' });
      return;
    }

    // Check if the generated files exist
    const indexPath = path.join(generationInfo.outputDir, 'index.html');
    
    if (!fs.existsSync(indexPath)) {
      res.status(404).json({ error: 'Generated files not found' });
      return;
    }

    // Read the HTML file
    const htmlContent = fs.readFileSync(indexPath, 'utf8');

    // Return HTML directly for preview
    res.setHeader('Content-Type', 'text/html');
    res.status(200).send(htmlContent);

  } catch (error) {
    console.error('Preview error:', error);
    res.status(500).json({
      error: 'Preview failed',
      message: error.message
    });
  }
}

// File: api/cv/download.js
const fs = require('fs');
const path = require('path');
const archiver = require('archiver');

export default async function handler(req, res) {
  // Set CORS headers
  res.setHeader('Access-Control-Allow-Origin', '*');
  res.setHeader('Access-Control-Allow-Methods', 'GET, POST, PUT, DELETE, OPTIONS');
  res.setHeader('Access-Control-Allow-Headers', 'Content-Type, Authorization');

  if (req.method === 'OPTIONS') {
    res.status(200).end();
    return;
  }

  if (req.method !== 'GET') {
    res.status(405).json({ error: 'Method not allowed' });
    return;
  }

  try {
    const { generationId } = req.query;
    
    if (!generationId) {
      res.status(400).json({ error: 'Generation ID is required' });
      return;
    }

    // Get generation info
    const generationInfo = getGenerationInfo(generationId);
    
    if (!generationInfo) {
      res.status(404).json({ error: 'Generation not found' });
      return;
    }

    const outputDir = generationInfo.outputDir;
    
    if (!fs.existsSync(outputDir)) {
      res.status(404).json({ error: 'Generated files not found' });
      return;
    }

    // Create ZIP file
    const archive = archiver('zip', {
      zlib: { level: 9 }
    });

    const personName = generationInfo.personName || 'landing-page';
    const zipFileName = `${personName.replace(/\s+/g, '-').toLowerCase()}-landing-page.zip`;

    res.setHeader('Content-Type', 'application/zip');
    res.setHeader('Content-Disposition', `attachment; filename="${zipFileName}"`);

    archive.pipe(res);

    // Add all files from the generated directory
    const filesToInclude = ['index.html', 'styles.css', 'script.js', 'data.js', 'README.md'];
    
    filesToInclude.forEach(fileName => {
      const filePath = path.join(outputDir, fileName);
      if (fs.existsSync(filePath)) {
        archive.file(filePath, { name: fileName });
      }
    });

    // Add any assets if they exist
    const assetsDir = path.join(outputDir, 'assets');
    if (fs.existsSync(assetsDir)) {
      archive.directory(assetsDir, 'assets');
    }

    await archive.finalize();

  } catch (error) {
    console.error('Download error:', error);
    res.status(500).json({
      error: 'Download failed',
      message: error.message
    });
  }
}

// Helper function to get generation info (you'll need to implement this based on your storage)
function getGenerationInfo(id) {
  // This should connect to your actual storage system
  // For now, return a mock structure
  return {
    id: id,
    outputDir: path.join(__dirname, '../../generated', 'user123', id),
    personName: 'John Doe',
    generatedAt: new Date().toISOString(),
    files: ['index.html', 'styles.css', 'script.js', 'data.js', 'README.md']
  };
}

[END OF FILE: api\cv\preview.js]

=====================================
DIRECTORY: templates
PATH: C:\Coding\cv-landing-generator\templates
=====================================

--------------------------------------------------------------------------------
FILE: templates\professional\script.js
SIZE: 17823 bytes (17.4 KB)
--------------------------------------------------------------------------------
// File: templates/professional/script.js
// Landing Page Script - Renders CV data with About Me section and theme toggle

document.addEventListener('DOMContentLoaded', function () {
    console.log('Landing page loading...', cvData);

    // Initialize theme
    initializeTheme();

    // Helper functions
    function getInitials(name) {
        return name.split(' ').map(n => n[0]).join('').toUpperCase();
    }

    function formatDate(dateStr) {
        if (!dateStr) return '';
        if (dateStr.toLowerCase() === 'present') return 'Present';

        const date = new Date(dateStr + '-01');
        if (isNaN(date.getTime())) return dateStr;

        return date.toLocaleDateString('en-US', {
            year: 'numeric',
            month: 'short'
        });
    }

    function calculateYearsExperience() {
        if (!cvData.experience || cvData.experience.length === 0) return 0;

        let totalMonths = 0;

        cvData.experience.forEach(exp => {
            if (!exp.startDate) return;

            // Parse start date
            let startDate;
            if (exp.startDate.includes('-')) {
                startDate = new Date(exp.startDate + '-01');
            } else {
                startDate = new Date(exp.startDate + '-01-01');
            }

            // Parse end date
            let endDate;
            if (exp.endDate && exp.endDate.toLowerCase() === 'present') {
                endDate = new Date();
            } else if (exp.endDate) {
                if (exp.endDate.includes('-')) {
                    endDate = new Date(exp.endDate + '-01');
                } else {
                    endDate = new Date(exp.endDate + '-01-01');
                }
            } else {
                return; // Skip if no end date
            }

            // Validate dates
            if (isNaN(startDate.getTime()) || isNaN(endDate.getTime())) {
                console.warn(`Invalid dates for ${exp.title}: ${exp.startDate} - ${exp.endDate}`);
                return;
            }

            // Calculate months for this job
            const monthsDiff = (endDate.getFullYear() - startDate.getFullYear()) * 12 +
                (endDate.getMonth() - startDate.getMonth());

            // Only add positive months
            if (monthsDiff > 0) {
                totalMonths += monthsDiff;
                console.log(`Job: ${exp.title}, Duration: ${monthsDiff} months`);
            }
        });

        const years = Math.floor(totalMonths / 12);
        console.log(`Total experience: ${totalMonths} months = ${years} years`);

        return years;
    }

    // Theme toggle functionality
    function initializeTheme() {
        const themeToggle = document.getElementById('theme-toggle');
        const sunIcon = document.getElementById('sun-icon');
        const moonIcon = document.getElementById('moon-icon');
        const body = document.body;

        // Check for saved theme preference or default to dark
        const savedTheme = localStorage.getItem('theme') || 'dark';
        setTheme(savedTheme);

        function setTheme(theme) {
            if (theme === 'light') {
                body.classList.remove('dark-theme');
                body.classList.add('light-theme');
                sunIcon.classList.add('hidden');
                moonIcon.classList.remove('hidden');
            } else {
                body.classList.remove('light-theme');
                body.classList.add('dark-theme');
                sunIcon.classList.remove('hidden');
                moonIcon.classList.add('hidden');
            }
            localStorage.setItem('theme', theme);
        }

        themeToggle.addEventListener('click', () => {
            const currentTheme = body.classList.contains('light-theme') ? 'light' : 'dark';
            const newTheme = currentTheme === 'light' ? 'dark' : 'light';
            setTheme(newTheme);
        });
    }

    // Update page title and meta
    document.title = `${cvData.personalInfo.name} - Professional Profile`;

    // Update header
    const headerName = document.getElementById('header-name');
    const headerTitle = document.getElementById('header-title');
    const emailLink = document.getElementById('email-link');

    if (headerName) headerName.textContent = cvData.personalInfo.name;
    if (emailLink) emailLink.href = `mailto:${cvData.personalInfo.email}`;

    const currentTitle = cvData.experience.length > 0 ? cvData.experience[0].title : 'Professional';
    if (headerTitle) headerTitle.textContent = currentTitle;

    // Update hero section
    const heroName = document.getElementById('hero-name');
    const heroTitle = document.getElementById('hero-title');
    const heroLocation = document.getElementById('hero-location');
    const heroSummary = document.getElementById('hero-summary');
    const heroAvatar = document.getElementById('hero-avatar');

    if (heroName) heroName.textContent = cvData.personalInfo.name;
    if (heroTitle) heroTitle.textContent = currentTitle;

    if (heroSummary) {
        heroSummary.textContent = cvData.personalInfo.summary || 'Professional dedicated to excellence and innovation.';
    }

    if (heroLocation) {
        const locationSpan = heroLocation.querySelector('span');
        if (locationSpan) locationSpan.textContent = cvData.personalInfo.location;
    }

    // Handle hero avatar
    if (heroAvatar && cvData.personalInfo.profilePicture) {
        heroAvatar.innerHTML = `<img src="${cvData.personalInfo.profilePicture}" alt="${cvData.personalInfo.name}" class="w-full h-full object-cover rounded-full">`;
        heroAvatar.className = "hero-avatar w-48 h-48 rounded-full overflow-hidden";
    } else if (heroAvatar) {
        heroAvatar.className = "hero-avatar w-48 h-48 rounded-full bg-white/10 flex items-center justify-center text-6xl font-bold text-white backdrop-blur-sm";
        const initials = getInitials(cvData.personalInfo.name);
        heroAvatar.innerHTML = `<span>${initials}</span>`;
    }

    // Update About Me section
    const aboutText = document.getElementById('about-text');
    const yearsExperience = document.getElementById('years-experience');

    if (aboutText && cvData.personalInfo.aboutMe) {
        // Set the text content with proper formatting
        aboutText.textContent = cvData.personalInfo.aboutMe;

        // Ensure proper text formatting
        aboutText.style.textAlign = 'justify';
        aboutText.style.width = '100%';
        aboutText.style.maxWidth = 'none';

        console.log('About me text set:', cvData.personalInfo.aboutMe.length, 'characters');
    }

    // Calculate and display statistics
    if (yearsExperience) {
        const years = calculateYearsExperience();
        yearsExperience.textContent = years > 0 ? years + '+' : '3+';
    }


    // Update quick contact
    const quickEmail = document.getElementById('quick-email');
    const quickPhone = document.getElementById('quick-phone');

    if (quickEmail) {
        quickEmail.href = `mailto:${cvData.personalInfo.email}`;
        const emailSpan = quickEmail.querySelector('span');
        if (emailSpan) emailSpan.textContent = cvData.personalInfo.email;
    }

    if (quickPhone) {
        quickPhone.href = `tel:${cvData.personalInfo.phone}`;
        const phoneSpan = quickPhone.querySelector('span');
        if (phoneSpan) phoneSpan.textContent = cvData.personalInfo.phone;
    }

    // Render Experience
    const experienceContainer = document.getElementById('experience-container');
    if (experienceContainer && cvData.experience.length > 0) {
        experienceContainer.innerHTML = cvData.experience.map(exp => {
            // Skip if this entry looks like a standalone "Key Achievements" section
            const titleLower = (exp.title || '').toLowerCase();
            const companyLower = (exp.company || '').toLowerCase();

            // Don't render entries that are just achievement headers
            if (titleLower.includes('key achievement') ||
                titleLower.includes('achievement') ||
                titleLower.includes('accomplishment') ||
                companyLower.includes('key achievement') ||
                companyLower.includes('achievement') ||
                // Skip if title is just bullet points or dashes
                exp.title.trim().startsWith('•') ||
                exp.title.trim().startsWith('-') ||
                exp.title.trim().startsWith('*') ||
                // Skip if this looks like an achievement line
                (exp.title.length < 50 && (
                    titleLower.includes('improved') ||
                    titleLower.includes('increased') ||
                    titleLower.includes('reduced') ||
                    titleLower.includes('developed') ||
                    titleLower.includes('led') ||
                    titleLower.includes('managed') ||
                    titleLower.includes('created')
                ) && !titleLower.includes(' at ') && !titleLower.includes(' - '))
            ) {
                console.log(`Skipping achievement entry: "${exp.title}"`);
                return ''; // Return empty string to skip this entry
            }

            // Validate this is a real job entry
            if (!exp.title || !exp.company || exp.title.length < 3 || exp.company.length < 3) {
                console.log(`Skipping invalid job entry: "${exp.title}" at "${exp.company}"`);
                return '';
            }

            console.log(`Rendering job: "${exp.title}" at "${exp.company}"`);

            return `
            <div class="experience-card">
                <div class="flex flex-col lg:flex-row lg:justify-between lg:items-start mb-4">
                    <div class="flex-1">
                        <h3 class="text-xl font-semibold text-white mb-1">${exp.title}</h3>
                        <p class="text-lg text-blue-400 font-medium mb-1">${exp.company}</p>
                        ${exp.location ? `<p class="text-gray-300">${exp.location}</p>` : ''}
                    </div>
                    <div class="text-gray-400 text-right mt-2 lg:mt-0 lg:ml-4 flex-shrink-0">
                        <p class="font-medium text-sm lg:text-base whitespace-nowrap">${formatDate(exp.startDate)} - ${formatDate(exp.endDate)}</p>
                    </div>
                </div>
                ${exp.description ? `<p class="text-gray-300 mb-4 leading-relaxed">${exp.description}</p>` : ''}
                ${exp.achievements && exp.achievements.length > 0 ? `
                    <div>
                        <h4 class="font-medium text-white mb-2">Key Achievements:</h4>
                        <ul class="list-disc list-inside text-gray-300 space-y-1">
                            ${exp.achievements.map(achievement => `<li>${achievement}</li>`).join('')}
                        </ul>
                    </div>
                ` : ''}
            </div>
        `;
        }).filter(html => html.trim() !== '').join(''); // Filter out empty strings
    } else {
        const experienceSection = document.getElementById('experience-section');
        if (experienceSection) experienceSection.style.display = 'none';
    }

    // Render Skills
    const technicalSkills = document.getElementById('technical-skills');
    const softSkills = document.getElementById('soft-skills');
    const languages = document.getElementById('languages');

    if (technicalSkills && cvData.skills.technical.length > 0) {
        technicalSkills.innerHTML = cvData.skills.technical.map(skill =>
            `<span class="skill-tag">${skill}</span>`
        ).join('');
    }

    if (softSkills && cvData.skills.soft.length > 0) {
        softSkills.innerHTML = cvData.skills.soft.map(skill =>
            `<span class="skill-tag">${skill}</span>`
        ).join('');
    }

    if (languages && cvData.skills.languages.length > 0) {
        languages.innerHTML = cvData.skills.languages.map(lang =>
            `<span class="skill-tag">${lang}</span>`
        ).join('');
    } else {
        const languagesSection = document.getElementById('languages-section');
        if (languagesSection) languagesSection.style.display = 'none';
    }

    // Hide skills section if no skills
    if (cvData.skills.technical.length === 0 && cvData.skills.soft.length === 0) {
        const skillsSection = document.getElementById('skills-section');
        if (skillsSection) skillsSection.style.display = 'none';
    }

    // Render Education
    const educationContainer = document.getElementById('education-container');
    if (educationContainer && cvData.education.length > 0) {
        educationContainer.innerHTML = cvData.education.map(edu => `
            <div class="education-card">
                <div class="flex flex-col lg:flex-row lg:justify-between lg:items-start mb-4">
                    <div class="flex-1">
                        <h3 class="text-xl font-semibold text-white mb-1">${edu.degree}</h3>
                        <p class="text-lg text-blue-400 font-medium mb-1">${edu.institution}</p>
                        <p class="text-gray-300">${edu.location}</p>
                        ${edu.gpa ? `<p class="text-gray-300">GPA: ${edu.gpa}</p>` : ''}
                    </div>
                    <div class="text-gray-400 text-right mt-2 lg:mt-0 lg:ml-4 flex-shrink-0">
                        <p class="font-medium text-sm lg:text-base whitespace-nowrap">${edu.graduationDate}</p>
                    </div>
                </div>
                ${edu.achievements && edu.achievements.length > 0 ? `
                    <div>
                        <h4 class="font-medium text-white mb-2">Achievements:</h4>
                        <ul class="list-disc list-inside text-gray-300 space-y-1">
                            ${edu.achievements.map(achievement => `<li>${achievement}</li>`).join('')}
                        </ul>
                    </div>
                ` : ''}
            </div>
        `).join('');
    } else {
        const educationSection = document.getElementById('education-section');
        if (educationSection) educationSection.style.display = 'none';
    }

    // Render Projects
    const projectsContainer = document.getElementById('projects-container');
    if (projectsContainer && cvData.projects.length > 0) {
        projectsContainer.innerHTML = cvData.projects.map(project => `
            <div class="project-card">
                <h3 class="text-xl font-semibold text-white mb-3">${project.name}</h3>
                <p class="text-gray-300 mb-4">${project.description}</p>
                ${project.technologies && project.technologies.length > 0 ? `
                    <div class="mb-4">
                        <h4 class="text-sm font-medium text-white mb-2">Technologies:</h4>
                        <div class="flex flex-wrap gap-2">
                            ${project.technologies.map(tech => `<span class="skill-tag text-xs">${tech}</span>`).join('')}
                        </div>
                    </div>
                ` : ''}
                ${project.url ? `
                    <a href="${project.url}" target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:text-blue-300 font-medium text-sm">
                        View Project →
                    </a>
                ` : ''}
            </div>
        `).join('');
    } else {
        const projectsSection = document.getElementById('projects-section');
        if (projectsSection) projectsSection.style.display = 'none';
    }

    // Render Certifications
    const certificationsContainer = document.getElementById('certifications-container');
    if (certificationsContainer && cvData.certifications.length > 0) {
        certificationsContainer.innerHTML = cvData.certifications.map(cert => `
            <div class="certification-card">
                <h3 class="text-lg font-semibold text-white mb-2">${cert.name}</h3>
                <p class="text-blue-400 font-medium mb-2">${cert.issuer}</p>
                <p class="text-gray-300 text-sm mb-3">${cert.date}</p>
                ${cert.url ? `
                    <a href="${cert.url}" target="_blank" rel="noopener noreferrer" class="text-blue-400 hover:text-blue-300 font-medium text-sm">
                        View Certificate
                    </a>
                ` : ''}
            </div>
        `).join('');
    } else {
        const certificationsSection = document.getElementById('certifications-section');
        if (certificationsSection) certificationsSection.style.display = 'none';
    }

    // Update contact buttons
    const contactEmailBtn = document.getElementById('contact-email-btn');
    const contactPhoneBtn = document.getElementById('contact-phone-btn');
    const footerName = document.getElementById('footer-name');

    if (contactEmailBtn) contactEmailBtn.href = `mailto:${cvData.personalInfo.email}`;
    if (contactPhoneBtn) contactPhoneBtn.href = `tel:${cvData.personalInfo.phone}`;
    if (footerName) footerName.textContent = cvData.personalInfo.name;

    // Add contact button functionality
    const contactBtn = document.getElementById('contact-btn');
    if (contactBtn) {
        contactBtn.addEventListener('click', function () {
            window.location.href = `mailto:${cvData.personalInfo.email}`;
        });
    }

    console.log('Landing page loaded successfully with dark theme!');
});

[END OF FILE: templates\professional\script.js]

--------------------------------------------------------------------------------
FILE: templates\professional\index.html
SIZE: 14920 bytes (14.6 KB)
--------------------------------------------------------------------------------
<!-- File: templates/professional/index.html -->
<!DOCTYPE html>
<html lang="en" class="dark">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{NAME}} - Professional Profile</title>
    <meta name="description" content="{{NAME}} - {{SUMMARY_EXCERPT}}">
    <meta name="keywords" content="{{SKILLS_KEYWORDS}}">
    <meta name="color-scheme" content="dark light">

    <!-- Open Graph -->
    <meta property="og:title" content="{{NAME}} - Professional Profile">
    <meta property="og:description" content="{{SUMMARY_EXCERPT}}">
    <meta property="og:type" content="profile">
    <meta property="og:url" content="{{SITE_URL}}">

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon"
        href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iNCIgZmlsbD0iIzM3NDNGRiIvPgo8dGV4dCB4PSIxNiIgeT0iMjAiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxNCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5QPC90ZXh0Pgo8L3N2Zz4K">

    <link href="styles.css" rel="stylesheet">
</head>

<body class="dark-theme">
    <!-- Theme Toggle -->
    <button id="theme-toggle"
        class="fixed top-4 right-4 z-50 p-2 rounded-lg bg-gray-800 text-white hover:bg-gray-700 transition-colors"
        title="Toggle Theme">
        <svg id="sun-icon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" />
        </svg>
        <svg id="moon-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" />
        </svg>
    </button>

    <!-- Header -->
    <header class="bg-gray-900 shadow-sm sticky top-0 z-40 border-b border-gray-700">
        <nav class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div>
                    <h1 id="header-name" class="text-xl font-semibold text-white text-glow">{{NAME}}</h1>
                    <p id="header-title" class="text-sm text-gray-300">{{CURRENT_TITLE}}</p>
                </div>

                <div class="flex items-center space-x-4">
                    <a id="email-link" href="mailto:{{EMAIL}}"
                        class="text-blue-400 hover:text-blue-300 transition-colors">
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                        </svg>
                    </a>
                    <button id="contact-btn"
                        class="btn bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors">
                        Contact Me
                    </button>
                </div>
            </div>
        </nav>
    </header>

    <!-- Hero Section -->
    <section class="hero-section text-white py-16">
        <div class="hero-content max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col lg:flex-row items-center space-y-8 lg:space-y-0 lg:space-x-12">
                <div class="flex-1 text-center lg:text-left">
                    <h1 id="hero-name" class="text-4xl lg:text-5xl font-bold mb-4 text-glow section-header">{{NAME}}
                    </h1>
                    <h2 id="hero-title" class="text-xl lg:text-2xl text-blue-200 mb-6">{{CURRENT_TITLE}}</h2>
                    <div id="hero-location"
                        class="flex items-center justify-center lg:justify-start text-blue-200 mb-6">
                        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                        <span>{{LOCATION}}</span>
                    </div>
                    <p id="hero-summary" class="text-lg text-blue-100 leading-relaxed">{{SUMMARY}}</p>
                </div>

                <div class="flex-shrink-0">
                    <div id="hero-avatar"
                        class="hero-avatar w-48 h-48 rounded-full bg-white/10 flex items-center justify-center text-6xl font-bold text-white backdrop-blur-sm overflow-hidden">
                        <span id="hero-initials">{{INITIALS}}</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- About Me Section -->
    <section class="py-16 bg-gray-800">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center mb-12">
                <h2 class="section-header text-3xl font-bold text-white mb-6">About Me</h2>
            </div>

            <div class="max-w-5xl mx-auto">
                <div class="about-card bg-gray-900/50 backdrop-blur-sm rounded-2xl border border-gray-700">
                    <div id="about-content" class="w-full">
                        <p id="about-text" class="text-gray-300 text-lg leading-relaxed">{{ABOUT_ME}}</p>
                    </div>

                    <!-- Key Highlights -->
                    <div id="about-highlights" class="mt-8">
                        <div class="highlight-item">
                            <span class="highlight-number" id="years-experience">{{YEARS_EXPERIENCE}}+</span>
                            <p class="highlight-label">Years Experience</p>
                        </div>
                        <div class="highlight-item">
                            <span class="highlight-number" id="projects-completed">10+</span>
                            <p class="highlight-label">Projects Completed</p>
                        </div>
                        <div class="highlight-item">
                            <span class="highlight-number" id="skills-count">15+</span>
                            <p class="highlight-label">Technical Skills</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Quick Contact -->
    <section class="bg-gray-900 py-8 border-b border-gray-700">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-wrap justify-center items-center gap-6">
                <a id="quick-email" href="mailto:{{EMAIL}}"
                    class="flex items-center space-x-2 text-gray-400 hover:text-blue-400 transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />
                    </svg>
                    <span>{{EMAIL}}</span>
                </a>

                <a id="quick-phone" href="tel:{{PHONE}}"
                    class="flex items-center space-x-2 text-gray-400 hover:text-blue-400 transition-colors">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
                    </svg>
                    <span>{{PHONE}}</span>
                </a>

                <div id="quick-linkedin" class="flex items-center space-x-2 text-gray-400">
                    <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                        <path
                            d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z" />
                    </svg>
                    <span>LinkedIn Profile</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Experience Section -->
    <section id="experience-section" class="py-16 bg-gray-800">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="section-header text-3xl font-bold text-white mb-12 text-center">Professional Experience</h2>
            <div id="experience-container" class="space-y-8">
                <!-- Experience items will be inserted here by JavaScript -->
            </div>
        </div>
    </section>

    <!-- Skills Section -->
    <section id="skills-section" class="py-16 bg-gray-900">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="section-header text-3xl font-bold mb-12 text-center text-white">Skills & Expertise</h2>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                <!-- Technical Skills -->
                <div>
                    <h3 class="text-xl font-semibold mb-6 text-white">Technical Skills</h3>
                    <div id="technical-skills" class="flex flex-wrap gap-3">
                        <!-- Technical skills will be inserted here -->
                    </div>
                </div>

                <!-- Soft Skills -->
                <div>
                    <h3 class="text-xl font-semibold mb-6 text-white">Core Competencies</h3>
                    <div id="soft-skills" class="flex flex-wrap gap-3">
                        <!-- Soft skills will be inserted here -->
                    </div>
                </div>
            </div>

            <!-- Languages -->
            <div id="languages-section" class="mt-12">
                <h3 class="text-xl font-semibold mb-6 text-center text-white">Languages</h3>
                <div id="languages" class="flex flex-wrap justify-center gap-4">
                    <!-- Languages will be inserted here -->
                </div>
            </div>
        </div>
    </section>

    <!-- Education Section -->
    <section id="education-section" class="py-16 bg-gray-800">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="section-header text-3xl font-bold text-white mb-12 text-center">Education</h2>
            <div id="education-container" class="space-y-8">
                <!-- Education items will be inserted here -->
            </div>
        </div>
    </section>

    <!-- Projects Section -->
    <section id="projects-section" class="py-16 bg-gray-900">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="section-header text-3xl font-bold text-white mb-12 text-center">Featured Projects</h2>
            <div id="projects-container" class="grid grid-cols-1 md:grid-cols-2 gap-8">
                <!-- Project items will be inserted here -->
            </div>
        </div>
    </section>

    <!-- Certifications Section -->
    <section id="certifications-section" class="py-16 bg-gray-800">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <h2 class="section-header text-3xl font-bold text-white mb-12 text-center">Certifications</h2>
            <div id="certifications-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Certification items will be inserted here -->
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section class="contact-section py-16 text-white">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 text-center relative z-10">
            <h2 class="text-3xl font-bold mb-6 text-glow">Let's Work Together</h2>
            <p class="text-xl text-blue-200 mb-8 max-w-2xl mx-auto">
                I'm always interested in hearing about new opportunities and interesting projects.
            </p>
            <div class="flex flex-col sm:flex-row justify-center gap-4">
                <a id="contact-email-btn" href="mailto:{{EMAIL}}"
                    class="btn bg-white text-blue-600 px-8 py-3 rounded-lg font-semibold hover:bg-gray-100 transition-colors">
                    Send Email
                </a>
                <a id="contact-phone-btn" href="tel:{{PHONE}}"
                    class="btn border-2 border-white text-white px-8 py-3 rounded-lg font-semibold hover:bg-white hover:text-blue-600 transition-colors">
                    Call Me
                </a>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="custom-footer text-gray-300 py-8 bg-gray-900">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0">
                    <p>&copy; 2025 <span id="footer-name">{{NAME}}</span>. All rights reserved.</p>
                </div>
                <div class="text-sm text-gray-400 text-center md:text-right">
                    <p>Generated with ❤️ by <strong class="text-blue-400">Hadar's ARTech</strong></p>
                    <p class="text-xs mt-1">Professional CV Landing Page Generator</p>
                </div>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="data.js"></script>
    <script src="script.js"></script>
</body>

</html>

[END OF FILE: templates\professional\index.html]

--------------------------------------------------------------------------------
FILE: templates\professional\styles.css
SIZE: 22332 bytes (21.8 KB)
--------------------------------------------------------------------------------
/* File: templates/professional/styles.css */
/*! Professional CV with Dark Theme - Modern Design */

/* Base reset */
*,
::before,
::after {
  box-sizing: border-box;
  border-width: 0;
  border-style: solid;
  border-color: #374151;
}

html {
  line-height: 1.6;
  -webkit-text-size-adjust: 100%;
  font-family: 'Inter', 'SF Pro Display', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  scroll-behavior: smooth;
}

/* Dark theme base */
body {
  margin: 0;
  line-height: inherit;
  background: linear-gradient(-45deg, #0f172a, #1e293b, #334155, #475569);
  background-size: 400% 400%;
  animation: gradientShift 20s ease infinite;
  min-height: 100vh;
  color: #f1f5f9;
  position: relative;
  overflow-x: hidden;
}

/* Light theme */
body.light-theme {
  background: linear-gradient(-45deg, #f8fafc, #e2e8f0, #f1f5f9, #e0f2fe);
  color: #0f172a;
}

/* Animated background */
@keyframes gradientShift {
  0% {
    background-position: 0% 50%;
  }

  50% {
    background-position: 100% 50%;
  }

  100% {
    background-position: 0% 50%;
  }
}

/* Floating particles */
body::before {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-image:
    radial-gradient(circle at 20% 50%, rgba(59, 130, 246, 0.1) 1px, transparent 1px),
    radial-gradient(circle at 80% 50%, rgba(29, 78, 216, 0.08) 1px, transparent 1px);
  background-size: 200px 200px, 300px 300px;
  animation: floatingParticles 30s linear infinite;
  pointer-events: none;
  z-index: 1;
}

@keyframes floatingParticles {
  0% {
    transform: translateY(0px) rotate(0deg);
  }

  100% {
    transform: translateY(-1000px) rotate(360deg);
  }
}

/* Theme toggle button */
#theme-toggle {
  background: rgba(31, 41, 55, 0.9);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(75, 85, 99, 0.3);
  transition: all 0.3s ease;
}

#theme-toggle:hover {
  background: rgba(55, 65, 81, 0.9);
  transform: scale(1.05);
}

.light-theme #theme-toggle {
  background: rgba(255, 255, 255, 0.9);
  color: #374151;
  border-color: rgba(209, 213, 219, 0.3);
}

.light-theme #theme-toggle:hover {
  background: rgba(249, 250, 251, 0.9);
}

/* Header styles */
header {
  background: rgba(17, 24, 39, 0.95) !important;
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-bottom: 1px solid rgba(75, 85, 99, 0.3) !important;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
  position: relative;
  z-index: 100;
}

.light-theme header {
  background: rgba(255, 255, 255, 0.95) !important;
  border-bottom: 1px solid rgba(226, 232, 240, 0.5) !important;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

/* Hero section */
.hero-section {
  background: linear-gradient(135deg,
      rgba(15, 23, 42, 0.95) 0%,
      rgba(30, 41, 59, 0.9) 50%,
      rgba(51, 65, 85, 0.85) 100%) !important;
  position: relative;
  overflow: hidden;
}

.light-theme .hero-section {
  background: linear-gradient(135deg,
      rgba(59, 130, 246, 0.9) 0%,
      rgba(29, 78, 216, 0.85) 50%,
      rgba(37, 99, 235, 0.8) 100%) !important;
}

.hero-section::before {
  content: '';
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  background: conic-gradient(from 0deg,
      transparent,
      rgba(59, 130, 246, 0.1),
      transparent,
      rgba(29, 78, 216, 0.1),
      transparent);
  animation: rotate 30s linear infinite;
  z-index: 1;
}

@keyframes rotate {
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
}

.hero-content {
  position: relative;
  z-index: 10;
}

/* Hero avatar */
.hero-avatar {
  position: relative;
  filter: drop-shadow(0 0 20px rgba(59, 130, 246, 0.3));
}

.hero-avatar::before {
  content: '';
  position: absolute;
  top: -5px;
  left: -5px;
  right: -5px;
  bottom: -5px;
  border-radius: 50%;
  background: linear-gradient(45deg, #3b82f6, #1d4ed8, #2563eb, #1e40af);
  background-size: 200% 200%;
  animation: gradientBorder 4s ease infinite;
  z-index: -1;
}

@keyframes gradientBorder {

  0%,
  100% {
    background-position: 0% 50%;
  }

  50% {
    background-position: 100% 50%;
  }
}

/* About Me section */
.about-card {
  background: rgba(17, 24, 39, 0.6);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(75, 85, 99, 0.3);
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
  padding: 2.5rem;
}

.light-theme .about-card {
  background: rgba(255, 255, 255, 0.9);
  border-color: rgba(226, 232, 240, 0.6);
}

.about-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
}

.light-theme .about-card:hover {
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
}

/* About content styling */
#about-content {
  width: 100%;
  max-width: none;
}

#about-text {
  color: #e2e8f0;
  font-size: 1.125rem;
  line-height: 1.75;
  text-align: justify;
  hyphens: auto;
  word-wrap: break-word;
  width: 100%;
  margin: 0;
  padding: 0;
}

.light-theme #about-text {
  color: #334155;
}

/* About highlights grid */
#about-highlights {
  margin-top: 2rem;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 2rem;
  padding: 1.5rem 0;
  border-top: 1px solid rgba(75, 85, 99, 0.3);
}

.light-theme #about-highlights {
  border-top-color: rgba(226, 232, 240, 0.6);
}

/* Highlight items */
.highlight-item {
  text-align: center;
  padding: 1rem;
  border-radius: 12px;
  background: rgba(59, 130, 246, 0.1);
  border: 1px solid rgba(59, 130, 246, 0.2);
  transition: all 0.3s ease;
}

.light-theme .highlight-item {
  background: rgba(59, 130, 246, 0.05);
  border-color: rgba(59, 130, 246, 0.15);
}

.highlight-item:hover {
  transform: translateY(-2px);
  background: rgba(59, 130, 246, 0.15);
  border-color: rgba(59, 130, 246, 0.3);
}

.highlight-number {
  display: block;
  font-size: 2.5rem;
  font-weight: 800;
  color: #60a5fa;
  line-height: 1;
  margin-bottom: 0.5rem;
}

.light-theme .highlight-number {
  color: #2563eb;
}

.highlight-label {
  color: #94a3b8;
  font-size: 0.875rem;
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.light-theme .highlight-label {
  color: #64748b;
}

/* Responsive adjustments */
@media (max-width: 768px) {
  .about-card {
    padding: 1.5rem;
  }

  #about-text {
    font-size: 1rem;
    line-height: 1.6;
    text-align: left;
  }

  #about-highlights {
    grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
    gap: 1rem;
    margin-top: 1.5rem;
  }

  .highlight-number {
    font-size: 2rem;
  }
}

@media (max-width: 480px) {
  #about-highlights {
    grid-template-columns: 1fr;
    gap: 1rem;
  }
}


/* Cards and components */
.card,
.experience-card,
.project-card,
.certification-card,
.education-card {
  background: rgba(17, 24, 39, 0.8);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border: 1px solid rgba(75, 85, 99, 0.3);
  border-radius: 16px;
  padding: 2rem;
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}

.light-theme .card,
.light-theme .experience-card,
.light-theme .project-card,
.light-theme .certification-card,
.light-theme .education-card {
  background: rgba(255, 255, 255, 0.85);
  border-color: rgba(226, 232, 240, 0.6);
  box-shadow: 0 8px 32px rgba(15, 23, 42, 0.1);
}

.card::before,
.experience-card::before,
.project-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(59, 130, 246, 0.1), transparent);
  transition: left 0.5s;
}

.card:hover::before,
.experience-card:hover::before,
.project-card:hover::before {
  left: 100%;
}

.card:hover,
.experience-card:hover,
.project-card:hover,
.certification-card:hover,
.education-card:hover {
  transform: translateY(-8px) scale(1.01);
  box-shadow: 0 25px 50px rgba(0, 0, 0, 0.4);
}

.light-theme .card:hover,
.light-theme .experience-card:hover,
.light-theme .project-card:hover,
.light-theme .certification-card:hover,
.light-theme .education-card:hover {
  box-shadow: 0 25px 50px rgba(15, 23, 42, 0.15);
}

/* Skill tags */
.skill-tag {
  display: inline-block;
  padding: 0.5rem 1.2rem;
  margin: 0.3rem;
  border-radius: 20px;
  font-size: 0.875rem;
  font-weight: 600;
  position: relative;
  overflow: hidden;
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(29, 78, 216, 0.3));
  color: #93c5fd;
  border: 1px solid rgba(59, 130, 246, 0.3);
  backdrop-filter: blur(10px);
  transition: all 0.3s ease;
  cursor: pointer;
}

.light-theme .skill-tag {
  background: linear-gradient(135deg, #3b82f6, #1d4ed8);
  color: white;
  border-color: rgba(59, 130, 246, 0.3);
}

.skill-tag::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: left 0.5s;
}

.skill-tag:hover::before {
  left: 100%;
}

.skill-tag:hover {
  transform: scale(1.05);
  box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
  background: linear-gradient(135deg, rgba(59, 130, 246, 0.3), rgba(29, 78, 216, 0.4));
}

.light-theme .skill-tag:hover {
  box-shadow: 0 0 20px rgba(59, 130, 246, 0.4);
  background: linear-gradient(135deg, #2563eb, #1e40af);
}

/* Section headers */
.section-header {
  position: relative;
  display: inline-block;
  font-weight: 800;
  background: linear-gradient(135deg, #60a5fa, #3b82f6, #2563eb);
  background-size: 200% 200%;
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  animation: gradientText 5s ease infinite;
}

.light-theme .section-header {
  background: linear-gradient(135deg, #1e40af, #3b82f6, #2563eb);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

@keyframes gradientText {

  0%,
  100% {
    background-position: 0% 50%;
  }

  50% {
    background-position: 100% 50%;
  }
}

.section-header::after {
  content: '';
  position: absolute;
  bottom: -10px;
  left: 0;
  width: 100%;
  height: 3px;
  background: linear-gradient(90deg, #3b82f6, #1d4ed8);
  border-radius: 2px;
  transform: scaleX(0);
  transform-origin: left;
  animation: lineGrow 1s ease forwards;
}

@keyframes lineGrow {
  to {
    transform: scaleX(1);
  }
}

/* Contact section */
.contact-section {
  background: linear-gradient(135deg,
      rgba(15, 23, 42, 0.95) 0%,
      rgba(30, 41, 59, 0.9) 100%) !important;
  position: relative;
  overflow: hidden;
}

.light-theme .contact-section {
  background: linear-gradient(135deg,
      rgba(59, 130, 246, 0.9) 0%,
      rgba(29, 78, 216, 0.85) 100%) !important;
}

.contact-section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image:
    radial-gradient(circle at 20% 20%, rgba(59, 130, 246, 0.15) 0%, transparent 40%),
    radial-gradient(circle at 80% 80%, rgba(29, 78, 216, 0.12) 0%, transparent 40%);
  animation: cosmicDrift 20s ease infinite;
  z-index: 1;
}

@keyframes cosmicDrift {

  0%,
  100% {
    transform: scale(1) rotate(0deg);
  }

  50% {
    transform: scale(1.05) rotate(180deg);
  }
}

/* Footer */
.custom-footer {
  background: rgba(17, 24, 39, 0.98) !important;
  backdrop-filter: blur(20px);
  border-top: 1px solid rgba(59, 130, 246, 0.2) !important;
  position: relative;
}

.light-theme .custom-footer {
  background: rgba(255, 255, 255, 0.98) !important;
  border-top: 1px solid rgba(226, 232, 240, 0.5) !important;
}

/* Buttons */
button,
.btn {
  background: linear-gradient(135deg, #3b82f6, #1d4ed8);
  border: none;
  border-radius: 8px;
  padding: 12px 24px;
  color: white;
  font-weight: 600;
  cursor: pointer;
  position: relative;
  overflow: hidden;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
}

button::before,
.btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: left 0.5s;
}

button:hover::before,
.btn:hover::before {
  left: 100%;
}

button:hover,
.btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(59, 130, 246, 0.4);
}

/* Text effects */
.text-glow {
  text-shadow: 0 2px 10px rgba(59, 130, 246, 0.3);
}

.light-theme .text-glow {
  text-shadow: 0 2px 10px rgba(59, 130, 246, 0.5);
}

/* Background utilities */
.bg-gray-800 {
  background: rgba(31, 41, 55, 0.9) !important;
  backdrop-filter: blur(10px);
}

.bg-gray-900 {
  background: rgba(17, 24, 39, 0.9) !important;
  backdrop-filter: blur(10px);
}

.light-theme .bg-gray-800 {
  background: rgba(248, 250, 252, 0.9) !important;
}

.light-theme .bg-gray-900 {
  background: rgba(255, 255, 255, 0.9) !important;
}

/* Text colors */
.text-white {
  color: #f1f5f9 !important;
}

.text-gray-100 {
  color: #f1f5f9 !important;
}

.text-gray-200 {
  color: #e2e8f0 !important;
}

.text-gray-300 {
  color: #cbd5e1 !important;
}

.text-gray-400 {
  color: #94a3b8 !important;
}

.text-blue-100 {
  color: #dbeafe !important;
}

.text-blue-200 {
  color: #bfdbfe !important;
}

.text-blue-400 {
  color: #60a5fa !important;
}

.light-theme .text-white {
  color: #0f172a !important;
}

.light-theme .text-gray-100 {
  color: #0f172a !important;
}

.light-theme .text-gray-200 {
  color: #1e293b !important;
}

.light-theme .text-gray-300 {
  color: #334155 !important;
}

.light-theme .text-gray-400 {
  color: #475569 !important;
}

/* Utility classes */
.max-w-6xl {
  max-width: 72rem;
}

.max-w-4xl {
  max-width: 56rem;
}

.max-w-2xl {
  max-width: 42rem;
}

.max-w-none {
  max-width: none;
}

.mx-auto {
  margin-left: auto;
  margin-right: auto;
}

.mb-1 {
  margin-bottom: 0.25rem;
}

.mb-2 {
  margin-bottom: 0.5rem;
}

.mb-3 {
  margin-bottom: 0.75rem;
}

.mb-4 {
  margin-bottom: 1rem;
}

.mb-6 {
  margin-bottom: 1.5rem;
}

.mb-8 {
  margin-bottom: 2rem;
}

.mb-12 {
  margin-bottom: 3rem;
}

.mt-2 {
  margin-top: 0.5rem;
}

.mt-4 {
  margin-top: 1rem;
}

.mt-8 {
  margin-top: 2rem;
}

.mt-12 {
  margin-top: 3rem;
}

.mr-2 {
  margin-right: 0.5rem;
}

.ml-3 {
  margin-left: 0.75rem;
}

.px-3 {
  padding-left: 0.75rem;
  padding-right: 0.75rem;
}

.px-4 {
  padding-left: 1rem;
  padding-right: 1rem;
}

.px-6 {
  padding-left: 1.5rem;
  padding-right: 1.5rem;
}

.px-8 {
  padding-left: 2rem;
  padding-right: 2rem;
}

.py-2 {
  padding-top: 0.5rem;
  padding-bottom: 0.5rem;
}

.py-3 {
  padding-top: 0.75rem;
  padding-bottom: 0.75rem;
}

.py-4 {
  padding-top: 1rem;
  padding-bottom: 1rem;
}

.py-8 {
  padding-top: 2rem;
  padding-bottom: 2rem;
}

.py-16 {
  padding-top: 4rem;
  padding-bottom: 4rem;
}

.p-2 {
  padding: 0.5rem;
}

.p-8 {
  padding: 2rem;
}

.w-5 {
  width: 1.25rem;
}

.w-10 {
  width: 2.5rem;
}

.w-20 {
  width: 5rem;
}

.w-48 {
  width: 12rem;
}

.w-full {
  width: 100%;
}

.h-5 {
  height: 1.25rem;
}

.h-10 {
  height: 2.5rem;
}

.h-20 {
  height: 5rem;
}

.h-48 {
  height: 12rem;
}

.h-full {
  height: 100%;
}

.flex {
  display: flex;
}

.grid {
  display: grid;
}

.hidden {
  display: none;
}

.inline-block {
  display: inline-block;
}

.flex-col {
  flex-direction: column;
}

.flex-wrap {
  flex-wrap: wrap;
}

.flex-1 {
  flex: 1 1 0%;
}

.flex-shrink-0 {
  flex-shrink: 0;
}

.items-center {
  align-items: center;
}

.items-start {
  align-items: flex-start;
}

.justify-center {
  justify-content: center;
}

.justify-between {
  justify-content: space-between;
}

.grid-cols-1 {
  grid-template-columns: repeat(1, minmax(0, 1fr));
}

.grid-cols-2 {
  grid-template-columns: repeat(2, minmax(0, 1fr));
}

.grid-cols-3 {
  grid-template-columns: repeat(3, minmax(0, 1fr));
}

.gap-2 {
  gap: 0.5rem;
}

.gap-3 {
  gap: 0.75rem;
}

.gap-4 {
  gap: 1rem;
}

.gap-6 {
  gap: 1.5rem;
}

.gap-8 {
  gap: 2rem;
}

.gap-12 {
  gap: 3rem;
}

.space-x-2> :not([hidden])~ :not([hidden]) {
  margin-left: 0.5rem;
}

.space-x-3> :not([hidden])~ :not([hidden]) {
  margin-left: 0.75rem;
}

.space-x-4> :not([hidden])~ :not([hidden]) {
  margin-left: 1rem;
}

.space-x-12> :not([hidden])~ :not([hidden]) {
  margin-left: 3rem;
}

.space-y-1> :not([hidden])~ :not([hidden]) {
  margin-top: 0.25rem;
}

.space-y-8> :not([hidden])~ :not([hidden]) {
  margin-top: 2rem;
}

.rounded-lg {
  border-radius: 0.5rem;
}

.rounded-2xl {
  border-radius: 1rem;
}

.rounded-full {
  border-radius: 9999px;
}

.border {
  border-width: 1px;
}

.border-b {
  border-bottom-width: 1px;
}

.border-2 {
  border-width: 2px;
}

.border-4 {
  border-width: 4px;
}

.border-white {
  border-color: #ffffff;
}

.border-gray-700 {
  border-color: #374151;
}

.shadow-sm {
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
}

.shadow-md {
  box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -2px rgba(0, 0, 0, 0.1);
}

.sticky {
  position: sticky;
}

.fixed {
  position: fixed;
}

.relative {
  position: relative;
}

.top-0 {
  top: 0px;
}

.top-4 {
  top: 1rem;
}

.right-4 {
  right: 1rem;
}

.z-40 {
  z-index: 40;
}

.z-50 {
  z-index: 50;
}

.overflow-hidden {
  overflow: hidden;
}

.text-center {
  text-align: center;
}

.text-right {
  text-align: right;
}

.whitespace-nowrap {
  white-space: nowrap;
}

.object-cover {
  object-fit: cover;
}

.list-disc {
  list-style-type: disc;
}

.list-inside {
  list-style-position: inside;
}

.transition-colors {
  transition-property: color, background-color, border-color;
  transition-duration: 150ms;
}

.text-xs {
  font-size: 0.75rem;
  line-height: 1rem;
}

.text-sm {
  font-size: 0.875rem;
  line-height: 1.25rem;
}

.text-base {
  font-size: 1rem;
  line-height: 1.5rem;
}

.text-lg {
  font-size: 1.125rem;
  line-height: 1.75rem;
}

.text-xl {
  font-size: 1.25rem;
  line-height: 1.75rem;
}

.text-2xl {
  font-size: 1.5rem;
  line-height: 2rem;
}

.text-3xl {
  font-size: 1.875rem;
  line-height: 2.25rem;
}

.text-4xl {
  font-size: 2.25rem;
  line-height: 2.5rem;
}

.text-5xl {
  font-size: 3rem;
  line-height: 1;
}

.font-medium {
  font-weight: 500;
}

.font-semibold {
  font-weight: 600;
}

.font-bold {
  font-weight: 700;
}

.leading-relaxed {
  line-height: 1.625;
}

.prose {
  max-width: 65ch;
}

.prose-invert {
  color: #d1d5db;
}

/* Hover effects */
.hover\:text-blue-300:hover {
  color: #93c5fd;
}

.hover\:text-blue-400:hover {
  color: #60a5fa;
}

.hover\:text-blue-600:hover {
  color: #2563eb;
}

.hover\:text-blue-700:hover {
  color: #1d4ed8;
}

.hover\:bg-blue-700:hover {
  background: linear-gradient(135deg, #2563eb, #1e40af);
}

.hover\:bg-gray-600:hover {
  background-color: #4b5563;
}

.hover\:bg-gray-700:hover {
  background-color: #374151;
}

.hover\:bg-gray-100:hover {
  background-color: #f3f4f6;
}

.hover\:bg-white:hover {
  background-color: #ffffff;
}

/* Responsive design */
@media (min-width: 640px) {
  .sm\:px-6 {
    padding-left: 1.5rem;
    padding-right: 1.5rem;
  }

  .sm\:flex-row {
    flex-direction: row;
  }
}

@media (min-width: 768px) {
  .md\:grid-cols-2 {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .md\:grid-cols-3 {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }

  .md\:flex-row {
    flex-direction: row;
  }

  .md\:mb-0 {
    margin-bottom: 0px;
  }

  .md\:text-right {
    text-align: right;
  }
}

@media (min-width: 1024px) {
  .lg\:px-8 {
    padding-left: 2rem;
    padding-right: 2rem;
  }

  .lg\:text-2xl {
    font-size: 1.5rem;
    line-height: 2rem;
  }

  .lg\:text-5xl {
    font-size: 3rem;
    line-height: 1;
  }

  .lg\:text-base {
    font-size: 1rem;
    line-height: 1.5rem;
  }

  .lg\:flex-row {
    flex-direction: row;
  }

  .lg\:grid-cols-2 {
    grid-template-columns: repeat(2, minmax(0, 1fr));
  }

  .lg\:grid-cols-3 {
    grid-template-columns: repeat(3, minmax(0, 1fr));
  }

  .lg\:justify-between {
    justify-content: space-between;
  }

  .lg\:items-start {
    align-items: flex-start;
  }

  .lg\:mt-0 {
    margin-top: 0px;
  }

  .lg\:ml-4 {
    margin-left: 1rem;
  }

  .lg\:text-right {
    text-align: right;
  }

  .lg\:space-y-0> :not([hidden])~ :not([hidden]) {
    margin-top: 0px;
  }

  .lg\:space-x-12> :not([hidden])~ :not([hidden]) {
    margin-left: 3rem;
  }

  .lg\:text-left {
    text-align: left;
  }

  .lg\:justify-start {
    justify-content: flex-start;
  }
}

/* Print styles */
@media print {
  body {
    background: white !important;
    animation: none !important;
    color: #000 !important;
  }

  body::before {
    display: none !important;
  }

  .card,
  .experience-card,
  .project-card,
  .certification-card {
    background: white !important;
    backdrop-filter: none !important;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
    border: 1px solid #e5e7eb !important;
    color: #000 !important;
  }

  .skill-tag {
    background: #f3f4f6 !important;
    color: #374151 !important;
    border: 1px solid #d1d5db !important;
  }

  #theme-toggle {
    display: none !important;
  }
}

[END OF FILE: templates\professional\styles.css]

--------------------------------------------------------------------------------
FILE: templates\professional\README.md
SIZE: 683 bytes (0.7 KB)
--------------------------------------------------------------------------------
# Professional Landing Page Template

This template generates a professional landing page from CV data.

## Features

- Responsive design
- Professional layout
- Skills showcase
- Experience timeline
- Projects portfolio
- Contact information
- Print-friendly styles

## Generated Files

- `index.html` - Main landing page
- `styles.css` - Compiled Tailwind CSS
- `script.js` - Interactive functionality
- `data.js` - Hardcoded CV data

## Customization

The template can be customized by editing:
- Colors in `styles.css`
- Layout in `index.html`
- Functionality in `script.js`

## Browser Support

- Chrome 60+
- Firefox 60+
- Safari 12+
- Edge 79+

[END OF FILE: templates\professional\README.md]

--------------------------------------------------------------------------------
FILE: templates\professional\data.js.template
SIZE: 2046 bytes (2 KB)
--------------------------------------------------------------------------------
// CV Data Template - This will be replaced with actual user data
const cvData = {
  personalInfo: {
    name: "{{NAME}}",
    email: "{{EMAIL}}",
    phone: "{{PHONE}}",
    location: "{{LOCATION}}",
    profilePicture: "{{PROFILE_PICTURE}}",
    summary: "{{SUMMARY}}"
  },
  experience: [
    {{#each EXPERIENCE}}
    {
      title: "{{title}}",
      company: "{{company}}",
      location: "{{location}}",
      startDate: "{{startDate}}",
      endDate: "{{endDate}}",
      description: "{{description}}",
      achievements: [
        {{#each achievements}}
        "{{this}}"{{#unless @last}},{{/unless}}
        {{/each}}
      ]
    }{{#unless @last}},{{/unless}}
    {{/each}}
  ],
  education: [
    {{#each EDUCATION}}
    {
      degree: "{{degree}}",
      institution: "{{institution}}",
      location: "{{location}}",
      graduationDate: "{{graduationDate}}",
      gpa: "{{gpa}}",
      achievements: [
        {{#each achievements}}
        "{{this}}"{{#unless @last}},{{/unless}}
        {{/each}}
      ]
    }{{#unless @last}},{{/unless}}
    {{/each}}
  ],
  skills: {
    technical: [
      {{#each SKILLS.technical}}
      "{{this}}"{{#unless @last}},{{/unless}}
      {{/each}}
    ],
    soft: [
      {{#each SKILLS.soft}}
      "{{this}}"{{#unless @last}},{{/unless}}
      {{/each}}
    ],
    languages: [
      {{#each SKILLS.languages}}
      "{{this}}"{{#unless @last}},{{/unless}}
      {{/each}}
    ]
  },
  projects: [
    {{#each PROJECTS}}
    {
      name: "{{name}}",
      description: "{{description}}",
      technologies: [
        {{#each technologies}}
        "{{this}}"{{#unless @last}},{{/unless}}
        {{/each}}
      ],
      url: "{{url}}"
    }{{#unless @last}},{{/unless}}
    {{/each}}
  ],
  certifications: [
    {{#each CERTIFICATIONS}}
    {
      name: "{{name}}",
      issuer: "{{issuer}}",
      date: "{{date}}",
      url: "{{url}}"
    }{{#unless @last}},{{/unless}}
    {{/each}}
  ]
};

[END OF FILE: templates\professional\data.js.template]

=====================================
DIRECTORY: lib
PATH: C:\Coding\cv-landing-generator\lib
=====================================

--------------------------------------------------------------------------------
FILE: lib\cv-parser-modular.js
SIZE: 12320 bytes (12 KB)
--------------------------------------------------------------------------------
// File: lib/cv-parser-modular.js
const fs = require('fs');
const pdfParse = require('pdf-parse');
const mammoth = require('mammoth');

// Import processors
const PersonalInfoProcessor = require('./cv-processors/personal-info-processor');
const AboutMeProcessor = require('./cv-processors/about-me-processor');
const ExperienceProcessor = require('./cv-processors/experience-processor');
const SkillsProcessor = require('./cv-processors/skills-processor');
const EducationProcessor = require('./cv-processors/education-processor');
const ProjectsProcessor = require('./cv-processors/projects-processor');
const CertificationsProcessor = require('./cv-processors/certifications-processor');

// Import utilities
const TextCleaner = require('./utils/text-cleaner');
const LLMClientFactory = require('./utils/llm-client-factory');

class ModularCVParser {
    constructor(llmConfig = {}) {
        console.log('Initializing Modular CV Parser...');
        
        // Determine LLM configuration
        this.llmConfig = this._resolveLLMConfig(llmConfig);
        console.log(`Using LLM client: ${this.llmConfig.type || 'gemini'}`);
        
        // Initialize processors with LLM configuration
        this.personalInfoProcessor = new PersonalInfoProcessor(this.llmConfig);
        this.aboutMeProcessor = new AboutMeProcessor(this.llmConfig);
        this.experienceProcessor = new ExperienceProcessor(this.llmConfig);
        this.skillsProcessor = new SkillsProcessor(this.llmConfig);
        this.educationProcessor = new EducationProcessor(this.llmConfig);
        this.projectsProcessor = new ProjectsProcessor(this.llmConfig);
        this.certificationsProcessor = new CertificationsProcessor(this.llmConfig);
        
        // Test LLM connection
        this.testLLMConnection();
        
        console.log('Modular CV Parser ready');
    }

    _resolveLLMConfig(providedConfig) {
        // Priority: provided config > environment variables > defaults
        const config = {
            type: providedConfig.type || process.env.LLM_CLIENT_TYPE || 'gemini',
            ...providedConfig
        };

        // Add client-specific defaults
        switch (config.type.toLowerCase()) {
            case 'ollama':
                config.baseUrl = config.baseUrl || process.env.OLLAMA_BASE_URL || 'http://localhost:11434';
                config.model = config.model || process.env.OLLAMA_MODEL || 'llama2';
                break;
            case 'gemini':
                config.model = config.model || 'gemini-1.5-flash';
                break;
        }

        return config;
    }

    async testLLMConnection() {
        try {
            const client = LLMClientFactory.createClient(this.llmConfig);
            await client.testConnection();
            console.log(`LLM client (${client.clientName}) connection verified`);
        } catch (error) {
            console.error('LLM connection test failed:', error.message);
            
            // If Gemini fails, suggest Ollama as alternative
            if (this.llmConfig.type === 'gemini' && error.message.includes('API')) {
                console.log('\nSuggestion: Consider using Ollama as an alternative:');
                console.log('1. Install Ollama: https://ollama.ai/');
                console.log('2. Pull a model: ollama pull llama2');
                console.log('3. Set environment: LLM_CLIENT_TYPE=ollama');
            }
            
            throw error;
        }
    }

    async extractTextFromFile(filePath, mimeType) {
        try {
            console.log(`Extracting text from: ${filePath}`);
            console.log(`File type: ${mimeType}`);
            
            let extractedText = '';
            
            switch (mimeType) {
                case 'application/pdf':
                    extractedText = await this.extractFromPDF(filePath);
                    break;
                case 'application/msword':
                case 'application/vnd.openxmlformats-officedocument.wordprocessingml.document':
                    extractedText = await this.extractFromWord(filePath);
                    break;
                default:
                    throw new Error('Unsupported file type: ' + mimeType);
            }
            
            console.log(`Text extraction successful: ${extractedText.length} characters`);
            return extractedText;
            
        } catch (error) {
            console.error('Text extraction error:', error);
            throw new Error('Failed to extract text from file: ' + error.message);
        }
    }

    async extractFromPDF(filePath) {
        console.log('Extracting from PDF...');
        const dataBuffer = fs.readFileSync(filePath);
        const data = await pdfParse(dataBuffer);
        return data.text;
    }

    async extractFromWord(filePath) {
        console.log('Extracting from Word document...');
        const result = await mammoth.extractRawText({ path: filePath });
        return result.value;
    }

    async processCV(extractedText) {
        console.log('Starting CV processing...');
        console.log(`Processing ${extractedText.length} characters`);
        
        // Clean the text first
        const cleanedText = TextCleaner.prepareForAI(extractedText);
        console.log(`Text cleaned: ${cleanedText.length} characters`);
        
        // Process in phases - NO TRY/CATCH, let errors bubble up
        const cvData = {};
        
        // Phase 1: Extract personal information
        console.log('\nPhase 1: Processing personal information...');
        const personalResult = await this.personalInfoProcessor.process(cleanedText);
        Object.assign(cvData, personalResult);
        
        // Phase 2: Generate about me content
        console.log('\nPhase 2: Generating about me content...');
        const aboutResult = await this.aboutMeProcessor.process(cleanedText, cvData);
        Object.assign(cvData, aboutResult);
        
        // Phase 3: Extract work experience
        console.log('\nPhase 3: Processing work experience...');
        const experienceResult = await this.experienceProcessor.process(cleanedText, cvData);
        Object.assign(cvData, experienceResult);
        
        // Phase 4: Extract and organize skills
        console.log('\nPhase 4: Processing skills...');
        const skillsResult = await this.skillsProcessor.process(cleanedText, cvData);
        Object.assign(cvData, skillsResult);
        
        // Phase 5: Extract education background
        console.log('\nPhase 5: Processing education...');
        const educationResult = await this.educationProcessor.process(cleanedText, cvData);
        Object.assign(cvData, educationResult);
        
        // Phase 6: Extract projects and portfolio work
        console.log('\nPhase 6: Processing projects...');
        const projectsResult = await this.projectsProcessor.process(cleanedText, cvData);
        Object.assign(cvData, projectsResult);
        
        // Phase 7: Extract certifications and credentials
        console.log('\nPhase 7: Processing certifications...');
        const certificationsResult = await this.certificationsProcessor.process(cleanedText, cvData);
        Object.assign(cvData, certificationsResult);
        
        // Combine data into final structure
        const finalData = this.buildFinalStructure(cvData);
        
        // Validate the data
        this.validateCVData(finalData);
        
        console.log('CV processing completed successfully');
        console.log(`Generated data for: ${finalData.personalInfo.name}`);
        
        return finalData;
    }

    buildFinalStructure(cvData) {
        // Build the complete CV data structure
        const personalInfo = cvData.personalInfo || {};
        const aboutData = cvData.aboutData || {};
        const experience = cvData.experience || [];
        const skills = cvData.skills || { technical: [], soft: [], languages: [] };
        const education = cvData.education || [];
        const projects = cvData.projects || [];
        const certifications = cvData.certifications || [];
        
        return {
            personalInfo: {
                name: personalInfo.name || '',
                email: personalInfo.email || '',
                phone: personalInfo.phone || '',
                location: personalInfo.location || '',
                currentTitle: personalInfo.currentTitle || 'Professional',
                summary: aboutData.summary || '',
                aboutMe: aboutData.aboutMe || ''
            },
            experience: experience,
            skills: skills,
            education: education,
            projects: projects,
            certifications: certifications // Now populated!
        };
    }

    // Legacy compatibility method
    async structureWithGemini(extractedText) {
        return await this.processCV(extractedText);
    }

    // Utility method to validate the final data
    validateCVData(cvData) {
        const errors = [];
        
        if (!cvData.personalInfo?.name) {
            errors.push('Missing name');
        }
        
        if (!cvData.personalInfo?.summary) {
            errors.push('Missing summary');
        }
        
        if (!cvData.personalInfo?.aboutMe) {
            errors.push('Missing about me');
        }
        
        if (errors.length > 0) {
            throw new Error('CV data validation failed: ' + errors.join(', '));
        }
        
        console.log('CV data validation passed');
        return true;
    }

    // Method to get processing statistics
    getProcessingStats(cvData) {
        const stats = {
            personalInfo: {
                hasName: !!cvData.personalInfo?.name,
                hasEmail: !!cvData.personalInfo?.email,
                hasPhone: !!cvData.personalInfo?.phone,
                hasLocation: !!cvData.personalInfo?.location,
                hasSummary: !!cvData.personalInfo?.summary,
                hasAboutMe: !!cvData.personalInfo?.aboutMe
            },
            contentLengths: {
                summary: cvData.personalInfo?.summary?.length || 0,
                aboutMe: cvData.personalInfo?.aboutMe?.length || 0
            },
            sectionCounts: {
                experience: cvData.experience?.length || 0,
                education: cvData.education?.length || 0,
                projects: cvData.projects?.length || 0,
                certifications: cvData.certifications?.length || 0
            }
        };
        
        console.log('Processing statistics:', JSON.stringify(stats, null, 2));
        return stats;
    }

    // Method to switch LLM client for all processors
    switchLLMClient(newConfig) {
        console.log('Switching LLM client for all processors...');
        this.llmConfig = this._resolveLLMConfig(newConfig);
        
        this.personalInfoProcessor.switchLLMClient(this.llmConfig);
        this.aboutMeProcessor.switchLLMClient(this.llmConfig);
        this.experienceProcessor.switchLLMClient(this.llmConfig);
        this.skillsProcessor.switchLLMClient(this.llmConfig);
        this.educationProcessor.switchLLMClient(this.llmConfig);
        this.projectsProcessor.switchLLMClient(this.llmConfig);
        this.certificationsProcessor.switchLLMClient(this.llmConfig);
        
        console.log(`All processors now using: ${this.llmConfig.type}`);
    }

    // Method to test all LLM clients
    async testAllProcessors() {
        const processors = [
            this.personalInfoProcessor,
            this.aboutMeProcessor,
            this.experienceProcessor,
            this.skillsProcessor,
            this.educationProcessor,
            this.projectsProcessor,
            this.certificationsProcessor
        ];

        const results = {};
        for (const processor of processors) {
            results[processor.processorName] = await processor.testLLMClient();
        }

        return results;
    }
}

module.exports = ModularCVParser;

[END OF FILE: lib\cv-parser-modular.js]

--------------------------------------------------------------------------------
FILE: lib\cv-parser.js
SIZE: 24404 bytes (23.8 KB)
--------------------------------------------------------------------------------
// File: lib/cv-parser.js
const fs = require('fs');
const pdfParse = require('pdf-parse');
const mammoth = require('mammoth');
const { GoogleGenerativeAI } = require('@google/generative-ai');

class CVParser {
    constructor() {
        // Validate API key on construction
        if (!process.env.GEMINI_API_KEY) {
            throw new Error('GEMINI_API_KEY environment variable is required for CV processing');
        }

        // Log API key info for debugging (safely)
        console.log('Initializing Gemini with API key length:', process.env.GEMINI_API_KEY.length);
        console.log('API key starts with:', process.env.GEMINI_API_KEY.substring(0, 10) + '...');

        try {
            this.genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY);
            this.model = this.genAI.getGenerativeModel({ model: "gemini-1.5-flash" });
            console.log('✅ Gemini AI initialized successfully');
        } catch (error) {
            console.error('Failed to initialize Gemini AI:', error);
            throw new Error('Failed to initialize Gemini AI: ' + error.message);
        }
    }

    async extractTextFromFile(filePath, mimeType) {
        try {
            console.log('Extracting text from:', filePath, 'Type:', mimeType);
            
            switch (mimeType) {
                case 'application/pdf':
                    return await this.extractFromPDF(filePath);
                case 'application/msword':
                case 'application/vnd.openxmlformats-officedocument.wordprocessingml.document':
                    return await this.extractFromWord(filePath);
                default:
                    throw new Error('Unsupported file type: ' + mimeType);
            }
        } catch (error) {
            console.error('Text extraction error:', error);
            throw new Error('Failed to extract text from file: ' + error.message);
        }
    }

    async extractFromPDF(filePath) {
        console.log('Extracting from PDF...');
        const dataBuffer = fs.readFileSync(filePath);
        const data = await pdfParse(dataBuffer);
        console.log('PDF extraction successful, text length:', data.text.length);
        return data.text;
    }

    async extractFromWord(filePath) {
        console.log('Extracting from Word document...');
        const result = await mammoth.extractRawText({ path: filePath });
        console.log('Word extraction successful, text length:', result.value.length);
        return result.value;
    }

    async structureWithGemini(extractedText) {
        try {
            console.log('Processing CV with Gemini AI...');
            console.log('Input text length:', extractedText.length);
            
            // Limit text length to avoid API limits
            const maxLength = 30000; // Gemini 1.5 Flash limit
            const textToProcess = extractedText.length > maxLength 
                ? extractedText.substring(0, maxLength) + '\n\n[Text truncated due to length]'
                : extractedText;
            
            console.log('Processing text length:', textToProcess.length);
            
            // Step 1: Extract basic structured data
            const basicData = await this.extractBasicStructure(textToProcess);
            console.log('Basic structure extracted for:', basicData.personalInfo?.name || 'Unknown');

            // Step 2: Generate enhanced content for each section
            const enhancedData = await this.enhanceWithAI(basicData, textToProcess);
            console.log('Enhanced data generated');

            // Step 3: Validate and clean the final data
            const finalData = this.validateAndCleanData(enhancedData);
            
            return finalData;
            
        } catch (error) {
            console.error('Gemini processing error:', error);
            
            // Provide more specific error messages
            if (error.message.includes('API_KEY_INVALID')) {
                throw new Error('Invalid Gemini API key. Please check your GEMINI_API_KEY in the .env file.');
            } else if (error.message.includes('QUOTA_EXCEEDED')) {
                throw new Error('Gemini API quota exceeded. Please check your API usage limits.');
            } else if (error.message.includes('PERMISSION_DENIED')) {
                throw new Error('Permission denied for Gemini API. Please verify your API key permissions.');
            } else {
                throw new Error('Failed to process CV with AI: ' + error.message);
            }
        }
    }

    async extractBasicStructure(extractedText) {
        const prompt = `
You are a professional CV/Resume parser. Extract and structure the CV content into JSON format.

CRITICAL JSON FORMATTING RULES:
- Return ONLY valid JSON (no markdown, no explanations)
- Escape ALL special characters in strings (\\n, \\", \\t, etc.)
- Use \\n for line breaks in descriptions
- Replace bullets (•) with "- " in text
- NO trailing commas
- Start with { and end with }

Extract these fields:
- personalInfo: {name, email, phone, location}
- experience: [{title, company, location, startDate, endDate, description, achievements: []}]
- education: [{degree, institution, location, graduationDate, gpa, achievements: []}]
- skills: {technical: [], soft: [], languages: []}
- projects: [{name, description, technologies: [], url}]
- certifications: [{name, issuer, date, url}]

Data Guidelines:
- Use "Present" for current positions
- Format dates as "YYYY-MM" or "YYYY"
- Convert bullet points to numbered or dashed lists in descriptions
- Keep descriptions factual and properly escaped
- Extract specific achievements as separate array items
- Use empty string "" or empty array [] for missing data
- Do NOT include summary or aboutMe fields

CV Content:
${extractedText}

Return properly escaped JSON:`;

        console.log('Sending basic structure request to Gemini...');
        console.log('Prompt length:', prompt.length);

        try {
            const result = await this.model.generateContent(prompt);
            const response = await result.response;
            const text = response.text();

            console.log('Received response from Gemini, length:', text.length);

            // Clean the response - remove markdown code blocks if present
            let cleanedText = text.trim();
            
            // Remove ```json and ``` if present
            if (cleanedText.startsWith('```json')) {
                cleanedText = cleanedText.replace(/^```json\s*/, '').replace(/\s*```$/, '');
            } else if (cleanedText.startsWith('```')) {
                cleanedText = cleanedText.replace(/^```\s*/, '').replace(/\s*```$/, '');
            }
            
            // Remove any leading/trailing whitespace
            cleanedText = cleanedText.trim();
            
            // Fix common JSON issues from Gemini
            cleanedText = this.sanitizeJsonResponse(cleanedText);
            
            console.log('Cleaned response length:', cleanedText.length);
            console.log('Cleaned response starts with:', cleanedText.substring(0, 100) + '...');

            try {
                const parsedData = JSON.parse(cleanedText);
                console.log('✅ Successfully parsed JSON from Gemini');
                return parsedData;
            } catch (parseError) {
                console.error('❌ Failed to parse JSON from Gemini:', parseError);
                console.log('Error at position:', parseError.message);
                console.log('Problematic area:', cleanedText.substring(Math.max(0, 4390-50), 4450));
                
                // Try to fix and parse again
                const fixedText = this.fixJsonErrors(cleanedText);
                try {
                    const parsedData = JSON.parse(fixedText);
                    console.log('✅ Successfully parsed JSON after fixing');
                    return parsedData;
                } catch (secondError) {
                    console.error('❌ Still failed after fixing:', secondError);
                    throw new Error('Invalid JSON response from AI');
                }
            }
        } catch (apiError) {
            console.error('❌ Gemini API call failed:', apiError);
            throw apiError;
        }
    }

    sanitizeJsonResponse(jsonString) {
        // Fix common JSON issues that Gemini might produce
        let fixed = jsonString;
        
        // Replace problematic characters in strings
        fixed = fixed.replace(/\n/g, '\\n');           // Fix unescaped newlines
        fixed = fixed.replace(/\r/g, '\\r');           // Fix unescaped carriage returns
        fixed = fixed.replace(/\t/g, '\\t');           // Fix unescaped tabs
        fixed = fixed.replace(/\\/g, '\\\\');          // Fix unescaped backslashes (but avoid double-escaping)
        fixed = fixed.replace(/\\\\n/g, '\\n');        // Fix double-escaped newlines
        fixed = fixed.replace(/\\\\r/g, '\\r');        // Fix double-escaped carriage returns
        fixed = fixed.replace(/\\\\t/g, '\\t');        // Fix double-escaped tabs
        
        // Remove or replace problematic Unicode characters
        fixed = fixed.replace(/•/g, '\\u2022');        // Bullet points
        fixed = fixed.replace(/–/g, '\\u2013');        // En dash
        fixed = fixed.replace(/—/g, '\\u2014');        // Em dash
        fixed = fixed.replace(/'/g, "\\'");            // Smart quotes
        fixed = fixed.replace(/'/g, "\\'");            // Smart quotes
        fixed = fixed.replace(/"/g, '\\"');            // Smart quotes
        fixed = fixed.replace(/"/g, '\\"');            // Smart quotes
        
        return fixed;
    }

    fixJsonErrors(jsonString) {
        // More aggressive JSON fixing
        let fixed = jsonString;
        
        // Try to find and fix the specific error area
        // Replace unescaped quotes in string values
        fixed = fixed.replace(/"([^"]*)"([^"]*)"([^"]*)"/g, (match, p1, p2, p3) => {
            return `"${p1}\\"${p2}\\"${p3}"`;
        });
        
        // Remove trailing commas
        fixed = fixed.replace(/,(\s*[}\]])/g, '$1');
        
        // Fix incomplete strings at the end
        if (fixed.match(/[^\\]"[^"]*$/)) {
            fixed += '"';
        }
        
        return fixed;
    }

    async enhanceWithAI(basicData, originalText) {
        console.log('Enhancing data with AI for each section...');
        
        try {
            // Generate professional summary
            const summary = await this.generateSummary(basicData, originalText);
            
            // Generate about me section
            const aboutMe = await this.generateAboutMe(basicData, originalText);
            
            // Enhance experience descriptions (simplified for now to avoid API issues)
            const enhancedExperience = basicData.experience || [];
            
            // Enhance education descriptions (simplified for now)
            const enhancedEducation = basicData.education || [];
            
            // Enhance project descriptions (simplified for now)
            const enhancedProjects = basicData.projects || [];
            
            // Enhance skills organization
            const enhancedSkills = await this.enhanceSkills(basicData.skills, originalText);

            return {
                ...basicData,
                personalInfo: {
                    ...basicData.personalInfo,
                    summary: summary,
                    aboutMe: aboutMe
                },
                experience: enhancedExperience,
                education: enhancedEducation,
                projects: enhancedProjects,
                skills: enhancedSkills
            };
        } catch (error) {
            console.error('Enhancement error:', error);
            // Return basic data if enhancement fails
            return {
                ...basicData,
                personalInfo: {
                    ...basicData.personalInfo,
                    summary: this.generateFallbackSummary(basicData),
                    aboutMe: this.generateFallbackAboutMe(basicData)
                }
            };
        }
    }

    async generateSummary(cvData, originalText) {
        console.log('Generating professional summary...');
        
        const prompt = `
Based on this CV data, create a compelling professional summary (2-3 sentences) for any profession.

Personal Info: ${JSON.stringify(cvData.personalInfo || {})}
Experience: ${JSON.stringify((cvData.experience || []).slice(0, 2))}
Skills: ${JSON.stringify(cvData.skills || {})}
Education: ${JSON.stringify((cvData.education || []).slice(0, 1))}

Requirements:
- 2-3 sentences maximum
- Work for ANY profession (tech, healthcare, finance, education, etc.)
- Highlight years of experience if determinable
- Mention key skills and expertise areas relevant to their field
- Sound professional and compelling
- Be specific to this person's actual background and industry
- Use industry-appropriate language

Return ONLY the summary text, no formatting or explanations.
`;

        try {
            const result = await this.model.generateContent(prompt);
            const response = await result.response;
            const summary = response.text().trim();
            console.log('✅ Summary generated successfully');
            return summary;
        } catch (error) {
            console.error('Summary generation failed:', error);
            return this.generateFallbackSummary(cvData);
        }
    }

    async generateAboutMe(cvData, originalText) {
        console.log('Generating About Me section...');
        
        const prompt = `
Create a compelling "About Me" section (3-4 sentences) for this person's professional landing page.
This should work for ANY profession and industry.

Personal Info: ${JSON.stringify(cvData.personalInfo || {})}
Experience: ${JSON.stringify((cvData.experience || []).slice(0, 2))}
Skills: ${JSON.stringify(cvData.skills || {})}
Education: ${JSON.stringify((cvData.education || []).slice(0, 1))}

Requirements:
- 3-4 sentences
- Write in first person ("I am...")
- Tell their professional journey/story appropriate to their industry
- Highlight what makes them unique in their field
- Show personality while staying professional
- Work for any profession (tech, healthcare, finance, marketing, etc.)
- Use industry-appropriate language and tone
- Be specific to this person's actual background

Return ONLY the about me text, no formatting or explanations.
`;

        try {
            const result = await this.model.generateContent(prompt);
            const response = await result.response;
            const aboutMe = response.text().trim();
            console.log('✅ About Me generated successfully');
            return aboutMe;
        } catch (error) {
            console.error('About Me generation failed:', error);
            return this.generateFallbackAboutMe(cvData);
        }
    }

    async enhanceSkills(skills, originalText) {
        console.log('Organizing and enhancing skills...');
        
        const prompt = `
Organize and enhance the skills section based on the CV data.
Categorize skills appropriately and add any missing ones from the text.

Current Skills: ${JSON.stringify(skills || {})}

Requirements:
- Categorize skills into technical, soft, and languages
- Add any skills mentioned in CV but missing from current data
- Remove duplicates
- Order by relevance/importance
- Ensure technical skills are specific technologies/tools
- Ensure soft skills are professional competencies

CRITICAL: Return ONLY valid JSON. No markdown blocks. No explanations.
Start with { and end with } only.

Example format:
{"technical": ["Python", "JavaScript"], "soft": ["Leadership"], "languages": ["English"]}
`;

        try {
            const result = await this.model.generateContent(prompt);
            const response = await result.response;
            const rawText = response.text().trim();
            
            // Clean response - remove markdown if present
            let cleanedText = rawText;
            if (cleanedText.startsWith('```json')) {
                cleanedText = cleanedText.replace(/^```json\s*/, '').replace(/\s*```$/, '');
            } else if (cleanedText.startsWith('```')) {
                cleanedText = cleanedText.replace(/^```\s*/, '').replace(/\s*```$/, '');
            }
            cleanedText = cleanedText.trim();
            
            const enhancedSkills = JSON.parse(cleanedText);
            console.log('✅ Skills enhanced successfully');
            
            return {
                technical: Array.isArray(enhancedSkills.technical) ? enhancedSkills.technical : skills?.technical || [],
                soft: Array.isArray(enhancedSkills.soft) ? enhancedSkills.soft : skills?.soft || [],
                languages: Array.isArray(enhancedSkills.languages) ? enhancedSkills.languages : skills?.languages || []
            };
        } catch (error) {
            console.error('Skills enhancement failed:', error);
            return skills || { technical: [], soft: [], languages: [] };
        }
    }

    generateFallbackSummary(cvData) {
        const currentJob = cvData.experience?.[0];
        const skills = cvData.skills?.technical?.slice(0, 3) || cvData.skills?.soft?.slice(0, 3) || [];
        
        if (currentJob) {
            return `Experienced ${currentJob.title} with proven expertise in ${skills.join(', ') || 'their field'}. Strong professional with a track record of delivering results at ${currentJob.company || 'leading organizations'}.`;
        }
        
        const education = cvData.education?.[0];
        if (education) {
            return `${education.degree} graduate with expertise in ${skills.join(', ') || 'their field'} and strong ${cvData.skills?.soft?.slice(0, 2).join(' and ') || 'professional'} skills.`;
        }
        
        return `Professional with expertise in ${skills.join(', ') || 'various fields'} and strong ${cvData.skills?.soft?.slice(0, 2).join(' and ') || 'interpersonal'} skills.`;
    }

    generateFallbackAboutMe(cvData) {
        const currentJob = cvData.experience?.[0];
        const yearsOfExperience = this.calculateYearsOfExperience(cvData.experience);
        const education = cvData.education?.[0];
        const skills = cvData.skills?.technical?.slice(0, 2) || cvData.skills?.soft?.slice(0, 2) || [];
        
        if (currentJob) {
            return `I am a passionate ${currentJob.title} with ${yearsOfExperience}+ years of experience in ${skills.join(' and ') || 'my field'}. I thrive in professional environments where I can leverage my expertise in ${skills.concat(cvData.skills?.soft?.slice(0, 2) || []).slice(0, 3).join(', ') || 'various areas'} to drive meaningful results. I am committed to continuous learning and excellence in my profession.`;
        }
        
        if (education) {
            return `I am a dedicated professional with a strong foundation in ${education.degree}. My expertise in ${skills.join(' and ') || 'various areas'} allows me to contribute effectively to ${education.degree.includes('Engineering') ? 'technical projects' : education.degree.includes('Business') ? 'business initiatives' : 'professional endeavors'}. I am passionate about applying my knowledge to create positive impact in my field.`;
        }
        
        return `I am a committed professional with expertise in ${skills.join(' and ') || 'various areas'}. I bring strong ${cvData.skills?.soft?.slice(0, 2).join(' and ') || 'problem-solving and communication'} skills to every project I undertake. I am dedicated to continuous improvement and delivering exceptional results.`;
    }

    calculateYearsOfExperience(experience) {
        if (!experience || experience.length === 0) return 0;
        
        let totalMonths = 0;
        experience.forEach(exp => {
            const startDate = new Date(exp.startDate + '-01');
            const endDate = exp.endDate?.toLowerCase() === 'present' ? new Date() : new Date(exp.endDate + '-01');
            
            if (!isNaN(startDate.getTime()) && !isNaN(endDate.getTime())) {
                const months = (endDate.getFullYear() - startDate.getFullYear()) * 12 + 
                              (endDate.getMonth() - startDate.getMonth());
                totalMonths += months;
            }
        });
        
        return Math.floor(totalMonths / 12);
    }

    validateAndCleanData(data) {
        console.log('Validating and cleaning final data...');
        
        // Ensure all required fields exist with proper structure
        const cleaned = {
            personalInfo: {
                name: data.personalInfo?.name || '',
                email: data.personalInfo?.email || '',
                phone: data.personalInfo?.phone || '',
                location: data.personalInfo?.location || '',
                summary: data.personalInfo?.summary || '',
                aboutMe: data.personalInfo?.aboutMe || ''
            },
            experience: Array.isArray(data.experience) ? data.experience.map(exp => ({
                title: exp.title || '',
                company: exp.company || '',
                location: exp.location || '',
                startDate: exp.startDate || '',
                endDate: exp.endDate || '',
                description: exp.description || '',
                achievements: Array.isArray(exp.achievements) ? exp.achievements.filter(a => a && a.trim()) : []
            })).filter(exp => exp.title && exp.company) : [],
            education: Array.isArray(data.education) ? data.education.map(edu => ({
                degree: edu.degree || '',
                institution: edu.institution || '',
                location: edu.location || '',
                graduationDate: edu.graduationDate || '',
                gpa: edu.gpa || '',
                achievements: Array.isArray(edu.achievements) ? edu.achievements.filter(a => a && a.trim()) : []
            })).filter(edu => edu.degree && edu.institution) : [],
            skills: {
                technical: Array.isArray(data.skills?.technical) ? 
                    data.skills.technical.filter(s => s && s.trim()).slice(0, 15) : [],
                soft: Array.isArray(data.skills?.soft) ? 
                    data.skills.soft.filter(s => s && s.trim()).slice(0, 10) : [],
                languages: Array.isArray(data.skills?.languages) ? 
                    data.skills.languages.filter(s => s && s.trim()).slice(0, 5) : []
            },
            projects: Array.isArray(data.projects) ? data.projects.map(proj => ({
                name: proj.name || '',
                description: proj.description || '',
                technologies: Array.isArray(proj.technologies) ? 
                    proj.technologies.filter(t => t && t.trim()) : [],
                url: proj.url || ''
            })).filter(proj => proj.name && proj.description) : [],
            certifications: Array.isArray(data.certifications) ? data.certifications.map(cert => ({
                name: cert.name || '',
                issuer: cert.issuer || '',
                date: cert.date || '',
                url: cert.url || ''
            })).filter(cert => cert.name && cert.issuer) : []
        };

        // Ensure we have at least some content
        if (!cleaned.personalInfo.name) {
            throw new Error('Unable to extract name from CV');
        }

        if (cleaned.experience.length === 0 && cleaned.education.length === 0) {
            throw new Error('Unable to extract experience or education from CV');
        }

        console.log('✅ Data validation completed successfully for:', cleaned.personalInfo.name);
        return cleaned;
    }
}

module.exports = CVParser;

[END OF FILE: lib\cv-parser.js]

--------------------------------------------------------------------------------
FILE: lib\database.js
SIZE: 17023 bytes (16.6 KB)
--------------------------------------------------------------------------------
// File: lib/database.js
const mysql = require('mysql2/promise');
const crypto = require('crypto');

class Database {
    constructor() {
        this.connection = null;
        this.encryptionKey = process.env.ENCRYPTION_KEY || 'fallback-key-change-in-production';
    }

    async connect() {
        if (this.connection) return this.connection;

        try {
            this.connection = await mysql.createConnection({
                uri: process.env.DATABASE_URL,
                ssl: { rejectUnauthorized: true }
            });

            console.log('✅ Connected to PlanetScale database');
            return this.connection;
        } catch (error) {
            console.error('❌ Database connection failed:', error.message);
            throw new Error('Failed to connect to database: ' + error.message);
        }
    }

    // Encryption utilities for sensitive data
    encrypt(text) {
        if (!text) return null;
        const cipher = crypto.createCipher('aes256', this.encryptionKey);
        return cipher.update(text, 'utf8', 'hex') + cipher.final('hex');
    }

    decrypt(encryptedText) {
        if (!encryptedText) return null;
        const decipher = crypto.createDecipher('aes256', this.encryptionKey);
        return decipher.update(encryptedText, 'hex', 'utf8') + decipher.final('utf8');
    }

    // User management
    async createUser(userData) {
        const connection = await this.connect();

        try {
            const [result] = await connection.execute(
                `INSERT INTO users (email, name, github_username, github_access_token, google_id) 
                 VALUES (?, ?, ?, ?, ?)`,
                [
                    userData.email,
                    userData.name,
                    userData.github_username || null,
                    userData.github_access_token ? this.encrypt(userData.github_access_token) : null,
                    userData.google_id || null
                ]
            );

            // Get the created user
            const [users] = await connection.execute(
                'SELECT * FROM users WHERE id = ?',
                [result.insertId]
            );

            const user = users[0];
            if (user.github_access_token) {
                user.github_access_token = this.decrypt(user.github_access_token);
            }

            console.log(`✅ User created: ${userData.email}`);
            return user;
        } catch (error) {
            console.error('❌ Create user failed:', error.message);
            throw new Error('Failed to create user: ' + error.message);
        }
    }

    async getUserByEmail(email) {
        const connection = await this.connect();

        try {
            const [users] = await connection.execute(
                'SELECT * FROM users WHERE email = ?',
                [email]
            );

            if (users.length === 0) return null;

            const user = users[0];
            if (user.github_access_token) {
                user.github_access_token = this.decrypt(user.github_access_token);
            }

            return user;
        } catch (error) {
            console.error('❌ Get user by email failed:', error.message);
            throw new Error('Failed to get user: ' + error.message);
        }
    }

    async getUserById(userId) {
        const connection = await this.connect();

        try {
            const [users] = await connection.execute(
                'SELECT * FROM users WHERE id = ?',
                [userId]
            );

            if (users.length === 0) return null;

            const user = users[0];
            if (user.github_access_token) {
                user.github_access_token = this.decrypt(user.github_access_token);
            }

            return user;
        } catch (error) {
            console.error('❌ Get user by ID failed:', error.message);
            throw new Error('Failed to get user: ' + error.message);
        }
    }

    async updateUserGitHubToken(userId, githubData) {
        const connection = await this.connect();

        try {
            await connection.execute(
                `UPDATE users 
                 SET github_username = ?, github_access_token = ?, updated_at = CURRENT_TIMESTAMP 
                 WHERE id = ?`,
                [
                    githubData.username,
                    this.encrypt(githubData.access_token),
                    userId
                ]
            );

            console.log(`✅ GitHub token updated for user: ${userId}`);
            return true;
        } catch (error) {
            console.error('❌ Update GitHub token failed:', error.message);
            throw new Error('Failed to update GitHub token: ' + error.message);
        }
    }

    // Site management
    async createUserSite(siteData) {
        const connection = await this.connect();

        try {
            const [result] = await connection.execute(
                `INSERT INTO user_sites 
                 (user_id, site_name, repo_name, github_url, pages_url, vercel_url, custom_domain, deployment_status, cv_data) 
                 VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)`,
                [
                    siteData.user_id,
                    siteData.site_name,
                    siteData.repo_name,
                    siteData.github_url,
                    siteData.pages_url || null,
                    siteData.vercel_url || null,
                    siteData.custom_domain || null,
                    siteData.deployment_status || 'pending',
                    siteData.cv_data ? JSON.stringify(siteData.cv_data) : null
                ]
            );

            // Get the created site
            const [sites] = await connection.execute(
                'SELECT * FROM user_sites WHERE id = ?',
                [result.insertId]
            );

            const site = sites[0];
            if (site.cv_data) {
                site.cv_data = JSON.parse(site.cv_data);
            }

            console.log(`✅ Site created: ${siteData.repo_name} for user ${siteData.user_id}`);
            return site;
        } catch (error) {
            console.error('❌ Create site failed:', error.message);
            throw new Error('Failed to create site: ' + error.message);
        }
    }

    async getUserSites(userId) {
        const connection = await this.connect();

        try {
            const [sites] = await connection.execute(
                'SELECT * FROM user_sites WHERE user_id = ? ORDER BY created_at DESC',
                [userId]
            );

            // Parse JSON data
            sites.forEach(site => {
                if (site.cv_data) {
                    try {
                        site.cv_data = JSON.parse(site.cv_data);
                    } catch (e) {
                        console.warn('Failed to parse cv_data for site:', site.id);
                        site.cv_data = null;
                    }
                }
            });

            return sites;
        } catch (error) {
            console.error('❌ Get user sites failed:', error.message);
            throw new Error('Failed to get user sites: ' + error.message);
        }
    }

    async updateSiteDeploymentStatus(siteId, status, urls = {}) {
        const connection = await this.connect();

        try {
            await connection.execute(
                `UPDATE user_sites 
                 SET deployment_status = ?, pages_url = COALESCE(?, pages_url), 
                     vercel_url = COALESCE(?, vercel_url), updated_at = CURRENT_TIMESTAMP 
                 WHERE id = ?`,
                [status, urls.pages_url, urls.vercel_url, siteId]
            );

            console.log(`✅ Site deployment status updated: ${siteId} -> ${status}`);
            return true;
        } catch (error) {
            console.error('❌ Update deployment status failed:', error.message);
            throw new Error('Failed to update deployment status: ' + error.message);
        }
    }

    // User preferences
    async getUserPreferences(userId) {
        const connection = await this.connect();

        try {
            const [prefs] = await connection.execute(
                'SELECT * FROM user_preferences WHERE user_id = ?',
                [userId]
            );

            if (prefs.length === 0) {
                // Create default preferences
                return await this.createDefaultPreferences(userId);
            }

            const preferences = prefs[0];
            if (preferences.preferences) {
                try {
                    preferences.preferences = JSON.parse(preferences.preferences);
                } catch (e) {
                    preferences.preferences = {};
                }
            }

            return preferences;
        } catch (error) {
            console.error('❌ Get user preferences failed:', error.message);
            throw new Error('Failed to get preferences: ' + error.message);
        }
    }

    async createDefaultPreferences(userId) {
        const connection = await this.connect();

        try {
            await connection.execute(
                `INSERT INTO user_preferences (user_id, vercel_enabled, email_notifications, theme_preference) 
                 VALUES (?, FALSE, TRUE, 'professional')`,
                [userId]
            );

            return await this.getUserPreferences(userId);
        } catch (error) {
            console.error('❌ Create default preferences failed:', error.message);
            throw new Error('Failed to create preferences: ' + error.message);
        }
    }

    // Logging for debugging
    async logOperation(userId, operationType, status, errorMessage = null, processingTime = null) {
        const connection = await this.connect();

        try {
            await connection.execute(
                `INSERT INTO processing_logs (user_id, operation_type, status, error_message, processing_time_ms) 
                 VALUES (?, ?, ?, ?, ?)`,
                [userId, operationType, status, errorMessage, processingTime]
            );
        } catch (error) {
            console.warn('Failed to log operation:', error.message);
            // Don't throw here - logging failures shouldn't break the main flow
        }
    }

    // Health check
    async healthCheck() {
        try {
            const connection = await this.connect();
            const [result] = await connection.execute('SELECT 1 as health');
            return result[0].health === 1;
        } catch (error) {
            console.error('❌ Database health check failed:', error.message);
            return false;
        }
    }

    // Close connection (for cleanup)
    async close() {
        if (this.connection) {
            await this.connection.end();
            this.connection = null;
            console.log('Database connection closed');
        }
    }

    // GitHub-related user methods
    async updateUser(userId, updates) {
        try {
            const connection = await this.connect();

            // Build dynamic update query
            const updateFields = [];
            const updateValues = [];

            if (updates.github_username !== undefined) {
                updateFields.push('github_username = ?');
                updateValues.push(updates.github_username);
            }

            if (updates.github_access_token !== undefined) {
                updateFields.push('github_access_token = ?');
                updateValues.push(updates.github_access_token);
            }

            if (updateFields.length === 0) {
                throw new Error('No update fields provided');
            }

            updateFields.push('updated_at = CURRENT_TIMESTAMP');
            updateValues.push(userId);

            const updateQuery = `
                UPDATE users 
                SET ${updateFields.join(', ')}
                WHERE id = ?
            `;

            const [result] = await connection.execute(updateQuery, updateValues);

            if (result.affectedRows === 0) {
                throw new Error('User not found');
            }

            console.log(`✅ Updated user ${userId} with GitHub credentials`);
            return true;

        } catch (error) {
            console.error('❌ Failed to update user:', error.message);
            throw error;
        }
    }

    // Get user's GitHub credentials
    async getUserGitHubCredentials(userId) {
        try {
            const connection = await this.connect();
            const [rows] = await connection.execute(
                'SELECT github_username, github_access_token FROM users WHERE id = ?',
                [userId]
            );

            if (rows.length === 0) {
                throw new Error('User not found');
            }

            const user = rows[0];

            // Decrypt token if it exists
            if (user.github_access_token) {
                user.github_access_token = Buffer.from(user.github_access_token, 'base64').toString();
            }

            return user;

        } catch (error) {
            console.error('❌ Failed to get GitHub credentials:', error.message);
            throw error;
        }
    }

    // Check if user has GitHub connected
    async hasGitHubConnection(userId) {
        try {
            const credentials = await this.getUserGitHubCredentials(userId);
            return !!(credentials.github_username && credentials.github_access_token);
        } catch (error) {
            return false;
        }
    }

    // Site management methods (for next steps)
    async createSite(userId, siteData) {
        try {
            const connection = await this.connect();
            const [result] = await connection.execute(`
                INSERT INTO user_sites (
                    user_id, site_name, repo_name, 
                    deployment_status, cv_data, created_at, updated_at
                ) VALUES (?, ?, ?, ?, ?, CURRENT_TIMESTAMP, CURRENT_TIMESTAMP)
            `, [
                userId,
                siteData.site_name,
                siteData.repo_name,
                'pending',
                JSON.stringify(siteData.cv_data)
            ]);

            console.log(`✅ Created site record for user ${userId}`);
            return result.insertId;

        } catch (error) {
            console.error('❌ Failed to create site:', error.message);
            throw error;
        }
    }

    async updateSiteStatus(siteId, status, urls = {}) {
        try {
            const connection = await this.connect();

            const updateFields = ['deployment_status = ?', 'updated_at = CURRENT_TIMESTAMP'];
            const updateValues = [status];

            if (urls.github_url) {
                updateFields.push('github_url = ?');
                updateValues.push(urls.github_url);
            }

            if (urls.pages_url) {
                updateFields.push('pages_url = ?');
                updateValues.push(urls.pages_url);
            }

            if (urls.vercel_url) {
                updateFields.push('vercel_url = ?');
                updateValues.push(urls.vercel_url);
            }

            updateValues.push(siteId);

            const [result] = await connection.execute(`
                UPDATE user_sites 
                SET ${updateFields.join(', ')}
                WHERE id = ?
            `, updateValues);

            if (result.affectedRows === 0) {
                throw new Error('Site not found');
            }

            console.log(`✅ Updated site ${siteId} status to ${status}`);
            return true;

        } catch (error) {
            console.error('❌ Failed to update site status:', error.message);
            throw error;
        }
    }

    async getUserSites(userId) {
        try {
            const connection = await this.connect();
            const [rows] = await connection.execute(`
                SELECT id, site_name, repo_name, github_url, pages_url, vercel_url,
                       deployment_status, created_at, updated_at
                FROM user_sites 
                WHERE user_id = ?
                ORDER BY created_at DESC
            `, [userId]);

            return rows;

        } catch (error) {
            console.error('❌ Failed to get user sites:', error.message);
            throw error;
        }
    }
}

// Export singleton instance
const database = new Database();
module.exports = database;

[END OF FILE: lib\database.js]

--------------------------------------------------------------------------------
FILE: lib\github-client.js
SIZE: 8256 bytes (8.1 KB)
--------------------------------------------------------------------------------
// lib/github-client.js
class GitHubClient {
    constructor(accessToken) {
        this.accessToken = accessToken;
        this.baseUrl = 'https://api.github.com';
    }

    async createRepository(repoName, description = '') {
        console.log('🏗️ Creating GitHub repository:', repoName);
        
        try {
            const response = await fetch(`${this.baseUrl}/user/repos`, {
                method: 'POST',
                headers: {
                    'Authorization': `token ${this.accessToken}`,
                    'Accept': 'application/vnd.github.v3+json',
                    'Content-Type': 'application/json',
                    'User-Agent': 'CV-Landing-Generator'
                },
                body: JSON.stringify({
                    name: repoName,
                    description: description,
                    private: false,
                    auto_init: false, // We'll push our own files
                    has_issues: false,
                    has_projects: false,
                    has_wiki: false
                })
            });

            if (!response.ok) {
                const errorData = await response.json();
                throw new Error(`GitHub API error: ${response.status} - ${errorData.message}`);
            }

            const repo = await response.json();
            console.log('✅ Repository created:', repo.html_url);

            return {
                id: repo.id,
                name: repo.name,
                fullName: repo.full_name,
                htmlUrl: repo.html_url,
                cloneUrl: repo.clone_url,
                defaultBranch: repo.default_branch || 'main'
            };

        } catch (error) {
            console.error('❌ Failed to create repository:', error);
            throw error;
        }
    }

    async uploadFiles(repoName, files) {
        console.log('📤 Uploading files to repository:', repoName);
        console.log('   Files to upload:', Object.keys(files));

        try {
            // Get repository info
            const repoInfo = await this.getRepository(repoName);
            const branch = repoInfo.defaultBranch;

            // For empty repositories, we need to use the Contents API approach
            console.log('📝 Uploading files to empty repository using Contents API...');
            
            let lastCommitData = null;
            
            // Upload each file sequentially to avoid conflicts
            for (const [fileName, content] of Object.entries(files)) {
                console.log(`   Uploading: ${fileName}`);
                
                const response = await fetch(`${this.baseUrl}/repos/${repoInfo.fullName}/contents/${fileName}`, {
                    method: 'PUT',
                    headers: {
                        'Authorization': `token ${this.accessToken}`,
                        'Accept': 'application/vnd.github.v3+json',
                        'Content-Type': 'application/json',
                        'User-Agent': 'CV-Landing-Generator'
                    },
                    body: JSON.stringify({
                        message: `Add ${fileName}`,
                        content: Buffer.from(content, 'utf8').toString('base64'),
                        branch: branch
                    })
                });
                
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(`Failed to upload ${fileName}: ${errorData.message}`);
                }
                
                lastCommitData = await response.json();
                console.log(`   ✅ Uploaded: ${fileName}`);
                
                // Small delay to avoid rate limiting
                await new Promise(resolve => setTimeout(resolve, 100));
            }

            console.log('✅ All files uploaded successfully');
            
            return {
                commitSha: lastCommitData.commit.sha,
                commitUrl: lastCommitData.commit.html_url
            };

        } catch (error) {
            console.error('❌ Failed to upload files:', error);
            throw error;
        }
    }

    async enableGitHubPages(repoName) {
        console.log('📄 Enabling GitHub Pages for:', repoName);

        try {
            const repoInfo = await this.getRepository(repoName);
            
            const response = await fetch(`${this.baseUrl}/repos/${repoInfo.fullName}/pages`, {
                method: 'POST',
                headers: {
                    'Authorization': `token ${this.accessToken}`,
                    'Accept': 'application/vnd.github.v3+json',
                    'Content-Type': 'application/json',
                    'User-Agent': 'CV-Landing-Generator'
                },
                body: JSON.stringify({
                    source: {
                        branch: repoInfo.defaultBranch,
                        path: '/'
                    }
                })
            });

            if (!response.ok) {
                const errorData = await response.json();
                
                // GitHub Pages might already be enabled
                if (response.status === 409) {
                    console.log('⚠️ GitHub Pages already enabled');
                    return await this.getGitHubPagesInfo(repoName);
                }
                
                throw new Error(`Failed to enable GitHub Pages: ${errorData.message}`);
            }

            const pages = await response.json();
            console.log('✅ GitHub Pages enabled:', pages.html_url);

            return {
                url: pages.html_url,
                status: pages.status,
                source: pages.source
            };

        } catch (error) {
            console.error('❌ Failed to enable GitHub Pages:', error);
            throw error;
        }
    }

    async getRepository(repoName) {
        try {
            const response = await fetch(`${this.baseUrl}/user/repos`, {
                headers: {
                    'Authorization': `token ${this.accessToken}`,
                    'Accept': 'application/vnd.github.v3+json',
                    'User-Agent': 'CV-Landing-Generator'
                }
            });

            if (!response.ok) {
                throw new Error(`Failed to get repositories: ${response.status}`);
            }

            const repos = await response.json();
            const repo = repos.find(r => r.name === repoName);

            if (!repo) {
                throw new Error(`Repository ${repoName} not found`);
            }

            return {
                id: repo.id,
                name: repo.name,
                fullName: repo.full_name,
                htmlUrl: repo.html_url,
                defaultBranch: repo.default_branch || 'main'
            };

        } catch (error) {
            console.error('❌ Failed to get repository info:', error);
            throw error;
        }
    }

    async getGitHubPagesInfo(repoName) {
        try {
            const repoInfo = await this.getRepository(repoName);
            
            const response = await fetch(`${this.baseUrl}/repos/${repoInfo.fullName}/pages`, {
                headers: {
                    'Authorization': `token ${this.accessToken}`,
                    'Accept': 'application/vnd.github.v3+json',
                    'User-Agent': 'CV-Landing-Generator'
                }
            });

            if (!response.ok) {
                throw new Error(`Failed to get GitHub Pages info: ${response.status}`);
            }

            const pages = await response.json();
            return {
                url: pages.html_url,
                status: pages.status,
                source: pages.source
            };

        } catch (error) {
            console.error('❌ Failed to get GitHub Pages info:', error);
            throw error;
        }
    }
}

module.exports = GitHubClient;

[END OF FILE: lib\github-client.js]

--------------------------------------------------------------------------------
FILE: lib\template-processor.js
SIZE: 34422 bytes (33.6 KB)
--------------------------------------------------------------------------------
// File: lib/template-processor.js
const fs = require('fs');
const path = require('path');

class TemplateProcessor {
    constructor() {
        this.templateDir = path.join(__dirname, '../templates/professional');
    }

    async generateLandingPage(cvData, outputDir) {
        try {
            console.log('Generating landing page for:', cvData.personalInfo.name);
            console.log('Has edited content?', !!cvData._hasEditedContent);

            // Validate CV data has required content
            this.validateCVData(cvData);

            // Create output directory if it doesn't exist
            if (!fs.existsSync(outputDir)) {
                fs.mkdirSync(outputDir, { recursive: true });
            }

            // Copy template files
            await this.copyTemplateFiles(outputDir);

            // Generate data.js with EDITED CV data (this is the key fix!)
            await this.generateDataFileWithEditedContent(cvData, outputDir);

            // Process HTML template with edited data
            await this.processHTMLTemplate(cvData, outputDir);

            console.log('Landing page generated successfully with edited content in:', outputDir);

            return {
                success: true,
                outputDir: outputDir,
                files: ['index.html', 'styles.css', 'script.js', 'data.js', 'README.md']
            };

        } catch (error) {
            console.error('Template processing error:', error);
            throw new Error('Failed to generate landing page: ' + error.message);
        }
    }

    validateCVData(cvData) {
        if (!cvData.personalInfo?.name) {
            throw new Error('CV data missing personal name');
        }

        if (!cvData.personalInfo?.summary) {
            throw new Error('CV data missing summary');
        }

        console.log('CV data validation passed for:', cvData.personalInfo.name);
        console.log('Includes edited content:', !!cvData._hasEditedContent);
    }

    async copyTemplateFiles(outputDir) {
        const filesToCopy = [
            'styles.css',
            'script.js',
            'README.md'
        ];

        for (const file of filesToCopy) {
            const sourcePath = path.join(this.templateDir, file);
            const destPath = path.join(outputDir, file);

            if (fs.existsSync(sourcePath)) {
                fs.copyFileSync(sourcePath, destPath);
                console.log(`Copied ${file}`);
            } else {
                console.warn(`Template file not found: ${file}`);
            }
        }
    }

    async generateDataFileWithEditedContent(cvData, outputDir) {
        console.log('Generating data.js with edited content...');

        // Build the final CV data structure using edited content where available
        const finalCvData = this.buildFinalDataStructure(cvData);

        const dataContent = `// Generated CV Data for ${cvData.personalInfo.name}
// Generated on: ${new Date().toISOString()}
// Contains user-edited content
const cvData = ${JSON.stringify(finalCvData, null, 2)};
`;

        const dataPath = path.join(outputDir, 'data.js');
        fs.writeFileSync(dataPath, dataContent, 'utf8');
        console.log('Generated data.js with edited content');
    }

    buildFinalDataStructure(cvData) {
        console.log('Building final data structure with edited content...');

        // Start with basic structure
        const finalData = {
            personalInfo: {
                name: cvData.personalInfo.name,
                email: cvData.personalInfo.email,
                phone: cvData.personalInfo.phone,
                location: cvData.personalInfo.location,
                currentTitle: cvData.personalInfo.currentTitle,
                profilePicture: cvData.personalInfo.profilePicture,
                summary: cvData.personalInfo.summary,
                aboutMe: cvData.personalInfo.aboutMe
            },
            // Default to original structured data
            experience: cvData.experience || [],
            skills: cvData.skills || { technical: [], soft: [], languages: [] },
            education: cvData.education || [],
            projects: cvData.projects || [],
            certifications: cvData.certifications || []
        };

        // OVERRIDE with edited content if available
        if (cvData._hasEditedContent) {
            console.log('Using edited content for sections...');

            // Convert edited text back to structured data for the template
            if (cvData.experienceText) {
                finalData.experience = this.convertTextToExperience(cvData.experienceText);
                console.log('Used edited experience text');
            }

            if (cvData.skillsText) {
                finalData.skills = this.convertTextToSkills(cvData.skillsText);
                console.log('Used edited skills text');
            }

            if (cvData.educationText) {
                finalData.education = this.convertTextToEducation(cvData.educationText);
                console.log('Used edited education text');
            }

            if (cvData.projectsText) {
                finalData.projects = this.convertTextToProjects(cvData.projectsText);
                console.log('Used edited projects text');
            }

            if (cvData.certificationsText) {
                finalData.certifications = this.convertTextToCertifications(cvData.certificationsText);
                console.log('Used edited certifications text');
            }
        }

        console.log('Final data structure built with edited content');
        return finalData;
    }

    // Helper methods to convert edited text back to structured data
    convertTextToExperience(experienceText) {
        console.log('Converting experience text to structured data...');
        console.log('Input text length:', experienceText.length);

        // Split by double newlines first to separate different jobs
        let jobSections = experienceText.split('\n\n').filter(section => section.trim());

        // If no double newlines, try to split by job indicators
        if (jobSections.length === 1) {
            // Look for patterns that indicate new jobs
            const jobPatterns = [
                /^(.+?)\s+at\s+(.+?)$/gm,  // "Title at Company"
                /^(.+?)\s+-\s+(.+?)$/gm,   // "Title - Company"
                /^\d{4}[\s\-]+/gm,         // Lines starting with years
            ];

            // Try to split by lines that start with job titles
            const lines = experienceText.split('\n');
            let currentJob = [];
            const jobs = [];

            for (let i = 0; i < lines.length; i++) {
                const line = lines[i].trim();

                // Check if this line looks like a new job title
                const isNewJob = (
                    (line.includes(' at ') || line.includes(' - ')) &&
                    !line.toLowerCase().includes('achievement') &&
                    !line.toLowerCase().includes('responsibility') &&
                    !line.startsWith('•') &&
                    !line.startsWith('-') &&
                    line.length > 10 &&
                    line.length < 100
                );

                if (isNewJob && currentJob.length > 0) {
                    // Save previous job
                    jobs.push(currentJob.join('\n'));
                    currentJob = [line];
                } else {
                    currentJob.push(line);
                }
            }

            // Add the last job
            if (currentJob.length > 0) {
                jobs.push(currentJob.join('\n'));
            }

            jobSections = jobs;
        }

        console.log(`Found ${jobSections.length} job sections`);

        const experiences = jobSections.map((jobText, index) => {
            const lines = jobText.split('\n').map(line => line.trim()).filter(line => line);

            if (lines.length === 0) return null;

            console.log(`Processing job ${index + 1}:`, lines[0]);

            // First line should contain title and company
            const titleLine = lines[0];
            let title = 'Position';
            let company = 'Company';
            let location = '';
            let startDate = '';
            let endDate = '';
            let description = '';
            let achievements = [];

            // Parse title and company from first line
            if (titleLine.includes(' at ')) {
                const parts = titleLine.split(' at ');
                title = parts[0].trim();
                company = parts.slice(1).join(' at ').trim();
            } else if (titleLine.includes(' - ')) {
                const parts = titleLine.split(' - ');
                title = parts[0].trim();
                company = parts.slice(1).join(' - ').trim();
            } else {
                // If no clear separator, use the whole line as title
                title = titleLine;
            }

            // Process remaining lines
            let descriptionLines = [];

            for (let i = 1; i < lines.length; i++) {
                const line = lines[i];

                // Check if line contains dates
                if (line.match(/\d{4}/) && (line.includes('-') || line.includes('to') || line.includes('Present'))) {
                    // Parse dates
                    const dateMatch = line.match(/(\d{4}(?:-\d{2})?)\s*[-–to]\s*(\d{4}(?:-\d{2})?|Present)/i);
                    if (dateMatch) {
                        startDate = dateMatch[1];
                        endDate = dateMatch[2];
                        console.log(`Extracted dates: ${startDate} - ${endDate}`);
                    }
                }
                // Check if line looks like location
                else if (line.includes(',') && line.length < 50 && !line.includes('.')) {
                    location = line;
                }
                // Check if line is an achievement (starts with bullet or dash)
                else if (line.startsWith('•') || line.startsWith('-') || line.startsWith('*')) {
                    achievements.push(line.replace(/^[•\-*]\s*/, ''));
                }
                // Otherwise, it's part of the description
                else {
                    descriptionLines.push(line);
                }
            }

            description = descriptionLines.join(' ').trim();

            // If no description from lines, use a default
            if (!description && achievements.length > 0) {
                description = achievements[0];
                achievements = achievements.slice(1);
            }

            const experience = {
                title: title,
                company: company,
                location: location,
                startDate: startDate,
                endDate: endDate || 'Present',
                description: description || `Worked as ${title} at ${company}`,
                achievements: achievements
            };

            console.log(`Created experience:`, {
                title: experience.title,
                company: experience.company,
                dates: `${experience.startDate} - ${experience.endDate}`
            });

            return experience;
        }).filter(exp => exp !== null);

        console.log(`Successfully converted ${experiences.length} experience entries`);
        return experiences;
    }

    convertTextToSkills(skillsText) {
        const skills = { technical: [], soft: [], languages: [] };
        const sections = skillsText.split('\n\n');

        sections.forEach(section => {
            const lines = section.split('\n');
            const header = lines[0]?.toLowerCase() || '';
            const skillsList = lines.slice(1).join(' ').split(',').map(s => s.trim()).filter(s => s);

            if (header.includes('technical')) {
                skills.technical = skillsList;
            } else if (header.includes('professional') || header.includes('soft')) {
                skills.soft = skillsList;
            } else if (header.includes('language')) {
                skills.languages = skillsList;
            }
        });

        return skills;
    }

    convertTextToEducation(educationText) {
        const educationEntries = educationText.split('\n\n').filter(entry => entry.trim());

        return educationEntries.map(entryText => {
            const lines = entryText.split('\n').map(line => line.trim()).filter(line => line);

            if (lines.length === 0) return null;

            const firstLine = lines[0];
            const [degree, institution] = firstLine.includes(' from ') ? firstLine.split(' from ') : [firstLine, ''];

            return {
                degree: degree,
                institution: institution,
                location: '',
                graduationDate: '',
                gpa: '',
                achievements: []
            };
        }).filter(entry => entry !== null);
    }

    convertTextToProjects(projectsText) {
        const projectEntries = projectsText.split('\n\n').filter(entry => entry.trim());

        return projectEntries.map(entryText => {
            const lines = entryText.split('\n').map(line => line.trim()).filter(line => line);

            if (lines.length === 0) return null;

            const name = lines[0];
            const description = lines.slice(1).join(' ');

            return {
                name: name,
                description: description,
                technologies: [],
                url: ''
            };
        }).filter(entry => entry !== null);
    }

    convertTextToCertifications(certificationsText) {
        const certEntries = certificationsText.split('\n\n').filter(entry => entry.trim());

        return certEntries.map(entryText => {
            const lines = entryText.split('\n').map(line => line.trim()).filter(line => line);

            if (lines.length === 0) return null;

            const firstLine = lines[0];
            const [name, issuer] = firstLine.includes(' - ') ? firstLine.split(' - ') : [firstLine, ''];

            return {
                name: name,
                issuer: issuer,
                date: '',
                url: ''
            };
        }).filter(entry => entry !== null);
    }

    async processHTMLTemplate(cvData, outputDir) {
        console.log('Processing HTML template with edited data...');

        const templatePath = path.join(this.templateDir, 'index.html');
        const outputPath = path.join(outputDir, 'index.html');

        if (!fs.existsSync(templatePath)) {
            throw new Error('HTML template not found');
        }

        let htmlContent = fs.readFileSync(templatePath, 'utf8');

        // Replace placeholders with real CV data (using edited content)
        const replacements = this.createReplacements(cvData);

        for (const [placeholder, value] of Object.entries(replacements)) {
            const regex = new RegExp(`{{${placeholder}}}`, 'g');
            htmlContent = htmlContent.replace(regex, value);
        }

        // Handle profile picture if present
        if (cvData.personalInfo.profilePicture) {
            console.log('Including profile picture in landing page');

            htmlContent = htmlContent.replace(
                /<div id="hero-avatar"[^>]*class="[^"]*"[^>]*>[\s\S]*?<\/div>/,
                `<div id="hero-avatar" class="hero-avatar w-48 h-48 rounded-full overflow-hidden border-4 border-white/20">
                    <img src="${cvData.personalInfo.profilePicture}" alt="${cvData.personalInfo.name}" class="w-full h-full object-cover">
                </div>`
            );
        }

        // Update page title with real name
        htmlContent = htmlContent.replace(
            /<title>.*?<\/title>/,
            `<title>${cvData.personalInfo.name} - Professional Profile</title>`
        );

        // Write processed HTML
        fs.writeFileSync(outputPath, htmlContent, 'utf8');
        console.log('Generated index.html with edited data');
    }

    createReplacements(cvData) {
        console.log('Creating replacements with edited content...');

        const personal = cvData.personalInfo;
        const currentJob = { title: personal.currentTitle || 'Professional' };

        // Get initials from real name
        const initials = personal.name
            .split(' ')
            .map(n => n[0])
            .join('')
            .toUpperCase();

        // Create summary excerpt for meta description
        const summaryExcerpt = personal.summary
            ? personal.summary.substring(0, 150) + (personal.summary.length > 150 ? '...' : '')
            : `${personal.name} - Professional Profile`;

        // Create skills keywords for SEO from real skills
        const allSkills = [
            ...(cvData.skills.technical || []),
            ...(cvData.skills.soft || [])
        ];
        const skillsKeywords = allSkills.length > 0
            ? allSkills.slice(0, 10).join(', ')
            : `${personal.currentTitle}, Professional, ${personal.location}`.replace(/,\s*,/g, ',').replace(/^,|,$/g, '');

        // Calculate real years of experience if we have experience data
        const yearsExperience = cvData.experience && cvData.experience.length > 0
            ? this.calculateYearsExperience(cvData.experience)
            : 3; // Default for cases without experience data


        console.log(`Creating replacements for ${personal.name}:`);
        console.log(`- Current title: ${currentJob.title}`);
        console.log(`- Location: ${personal.location}`);
        console.log(`- Years experience: ${yearsExperience}`);
        console.log(`- Has summary: ${!!personal.summary}`);
        console.log(`- Has about me: ${!!personal.aboutMe}`);

        return {
            NAME: this.escapeHtml(personal.name),
            EMAIL: this.escapeHtml(personal.email || ''),
            PHONE: this.escapeHtml(personal.phone || ''),
            LOCATION: this.escapeHtml(personal.location || ''),
            SUMMARY: this.escapeHtml(personal.summary),
            ABOUT_ME: this.escapeHtml(personal.aboutMe || personal.summary),
            CURRENT_TITLE: this.escapeHtml(currentJob.title),
            INITIALS: initials,
            SUMMARY_EXCERPT: this.escapeHtml(summaryExcerpt),
            SKILLS_KEYWORDS: this.escapeHtml(skillsKeywords),
            YEARS_EXPERIENCE: yearsExperience.toString(),
            SITE_URL: 'https://your-profile.vercel.app'
        };
    }

    calculateYearsExperience(experience) {
        if (!experience || experience.length === 0) return 0;

        let totalMonths = 0;

        experience.forEach(exp => {
            if (!exp.startDate) {
                console.warn(`No start date for ${exp.title}, skipping`);
                return;
            }

            // Parse start date - handle both YYYY and YYYY-MM formats
            let startDate;
            if (exp.startDate.includes('-')) {
                startDate = new Date(exp.startDate + '-01');
            } else if (exp.startDate.length === 4) {
                startDate = new Date(exp.startDate + '-01-01');
            } else {
                console.warn(`Invalid start date format: ${exp.startDate}`);
                return;
            }

            // Parse end date
            let endDate;
            if (exp.endDate && exp.endDate.toLowerCase() === 'present') {
                endDate = new Date();
            } else if (exp.endDate) {
                if (exp.endDate.includes('-')) {
                    endDate = new Date(exp.endDate + '-01');
                } else if (exp.endDate.length === 4) {
                    endDate = new Date(exp.endDate + '-01-01');
                } else {
                    console.warn(`Invalid end date format: ${exp.endDate}`);
                    return;
                }
            } else {
                console.warn(`No end date for ${exp.title}, skipping`);
                return;
            }

            // Validate dates
            if (isNaN(startDate.getTime()) || isNaN(endDate.getTime())) {
                console.warn(`Invalid dates for ${exp.title}: ${exp.startDate} - ${exp.endDate}`);
                return;
            }

            // Ensure end date is not before start date
            if (endDate < startDate) {
                console.warn(`End date before start date for ${exp.title}, skipping`);
                return;
            }

            // Calculate months for this position
            const monthsDiff = (endDate.getFullYear() - startDate.getFullYear()) * 12 +
                (endDate.getMonth() - startDate.getMonth());

            if (monthsDiff > 0) {
                totalMonths += monthsDiff;
                console.log(`${exp.title} at ${exp.company}: ${monthsDiff} months (${exp.startDate} - ${exp.endDate})`);
            } else {
                console.warn(`Negative or zero months for ${exp.title}: ${monthsDiff}`);
            }
        });

        const years = Math.floor(totalMonths / 12);
        console.log(`Total experience calculation: ${totalMonths} months = ${years} years`);

        // Cap at reasonable maximum (e.g., 50 years)
        return Math.min(years, 50);
    }

    escapeHtml(text) {
        if (!text) return '';

        return text.toString()
            .replace(/&/g, '&amp;')
            .replace(/</g, '&lt;')
            .replace(/>/g, '&gt;')
            .replace(/"/g, '&quot;')
            .replace(/'/g, '&#x27;');
    }

    async generatePreview(cvData) {
        // Generate a temporary preview version with real data
        const tempDir = path.join(__dirname, '../temp/preview');

        if (!fs.existsSync(tempDir)) {
            fs.mkdirSync(tempDir, { recursive: true });
        }

        const result = await this.generateLandingPage(cvData, tempDir);

        return {
            success: true,
            previewDir: tempDir,
            indexPath: path.join(tempDir, 'index.html')
        };
    }

    cleanupTemp() {
        const tempDir = path.join(__dirname, '../temp');
        if (fs.existsSync(tempDir)) {
            fs.rmSync(tempDir, { recursive: true, force: true });
            console.log('Cleaned up temporary files');
        }
    }

    // GitHub-specific file generation methods
    async generateForGitHub(cvData, outputDir) {
        try {
            console.log('Generating landing page for GitHub deployment...');

            // Generate the standard landing page files
            await this.generateLandingPage(cvData, outputDir);

            // Add GitHub-specific files
            await this.generateGitHubFiles(cvData, outputDir);

            console.log('✅ Generated all files for GitHub deployment');
            return true;

        } catch (error) {
            console.error('❌ Failed to generate GitHub files:', error.message);
            throw error;
        }
    }

    async generateGitHubFiles(cvData, outputDir) {
        // Generate README.md
        const readmeContent = this.generateReadmeContent(cvData);
        fs.writeFileSync(path.join(outputDir, 'README.md'), readmeContent, 'utf8');

        // Generate .gitignore
        const gitignoreContent = this.generateGitignoreContent();
        fs.writeFileSync(path.join(outputDir, '.gitignore'), gitignoreContent, 'utf8');

        // Generate vercel.json for future Vercel integration
        const vercelConfig = this.generateVercelConfig();
        fs.writeFileSync(path.join(outputDir, 'vercel.json'), vercelConfig, 'utf8');

        // Generate package.json (minimal, for completeness)
        const packageJson = this.generatePackageJson(cvData);
        fs.writeFileSync(path.join(outputDir, 'package.json'), packageJson, 'utf8');

        console.log('Generated GitHub-specific files');
    }

    generateReadmeContent(cvData) {
        const name = cvData.personalInfo.name;
        const title = cvData.personalInfo.currentTitle || 'Professional';

        return `# ${name} - Professional Landing Page

${title} with expertise in various technologies and proven track record.

## 🌐 Live Site
This landing page is automatically deployed via GitHub Pages.

## 📋 About This Site
This professional landing page was generated from CV data and includes:

### ✨ Features
- **Responsive Design**: Optimized for all devices and screen sizes
- **Professional Layout**: Clean, modern design focused on readability
- **Fast Loading**: Optimized CSS and JavaScript for quick load times
- **SEO Friendly**: Structured data and meta tags for search engines
- **Accessible**: WCAG compliant design for all users

### 🛠 Technology Stack
- **HTML5**: Semantic markup for better structure
- **CSS3**: Modern styling with Tailwind CSS utilities
- **JavaScript**: Vanilla JS for smooth interactions
- **GitHub Pages**: Reliable, fast hosting
- **Responsive Design**: Mobile-first approach

## 📊 Sections Included
${this.generateSectionsList(cvData)}

## 🔧 Technical Details
- **Build System**: Static site generation
- **Deployment**: Automated via GitHub Pages
- **Performance**: Optimized for Core Web Vitals
- **Compatibility**: Works on all modern browsers

## 📞 Contact Information
${cvData.personalInfo.email ? `- **Email**: ${cvData.personalInfo.email}` : ''}
${cvData.personalInfo.phone ? `- **Phone**: ${cvData.personalInfo.phone}` : ''}
${cvData.personalInfo.location ? `- **Location**: ${cvData.personalInfo.location}` : ''}

---

*Generated on ${new Date().toLocaleDateString()} using CV Landing Generator*

### 🔄 Updates
This site can be automatically updated when CV information changes. The deployment process ensures the latest information is always displayed.

### 🚀 Performance
- Lighthouse Score: Optimized for 90+ in all categories
- Load Time: < 2 seconds on 3G networks
- Accessibility: WCAG 2.1 AA compliant
`;
    }

    generateSectionsList(cvData) {
        const sections = [];

        if (cvData.personalInfo && cvData.personalInfo.summary) {
            sections.push('- **Professional Summary**: Overview of experience and goals');
        }

        if (cvData.experience && cvData.experience.length > 0) {
            sections.push(`- **Work Experience**: ${cvData.experience.length} professional positions`);
        }

        if (cvData.skills && (cvData.skills.technical?.length > 0 || cvData.skills.soft?.length > 0)) {
            sections.push('- **Skills**: Technical and soft skills breakdown');
        }

        if (cvData.education && cvData.education.length > 0) {
            sections.push(`- **Education**: ${cvData.education.length} educational achievements`);
        }

        if (cvData.projects && cvData.projects.length > 0) {
            sections.push(`- **Projects**: ${cvData.projects.length} notable projects and contributions`);
        }

        if (cvData.certifications && cvData.certifications.length > 0) {
            sections.push(`- **Certifications**: ${cvData.certifications.length} professional certifications`);
        }

        return sections.join('\n');
    }

    generateGitignoreContent() {
        return `# Dependencies
node_modules/
npm-debug.log*
yarn-debug.log*
yarn-error.log*

# Build outputs
dist/
build/
out/

# Environment variables
.env
.env.local
.env.development.local
.env.test.local
.env.production.local

# OS generated files
.DS_Store
.DS_Store?
._*
.Spotlight-V100
.Trashes
ehthumbs.db
Thumbs.db

# IDE files
.vscode/
.idea/
*.swp
*.swo
*~

# Logs
logs
*.log

# Runtime data
pids
*.pid
*.seed
*.pid.lock

# Temporary files
*.tmp
*.temp
temp/
tmp/

# Coverage directory used by tools like istanbul
coverage/

# nyc test coverage
.nyc_output

# Dependency directories
jspm_packages/

# Optional npm cache directory
.npm

# Optional REPL history
.node_repl_history

# Output of 'npm pack'
*.tgz

# Yarn Integrity file
.yarn-integrity

# parcel-bundler cache (https://parceljs.org/)
.cache
.parcel-cache

# Microbundle cache
.rpt2_cache/
.rts2_cache_cjs/
.rts2_cache_es/
.rts2_cache_umd/

# Optional REPL history
.node_repl_history

# Editor directories and files
.idea
*.suo
*.ntvs*
*.njsproj
*.sln
*.sw?
`;
    }

    generateVercelConfig() {
        return JSON.stringify({
            "version": 2,
            "name": "cv-landing-page",
            "builds": [
                {
                    "src": "**/*",
                    "use": "@vercel/static"
                }
            ],
            "routes": [
                {
                    "src": "/(.*\\.(js|css|png|jpg|jpeg|gif|svg|ico|woff|woff2|ttf|eot))",
                    "headers": {
                        "cache-control": "public, max-age=31536000, immutable"
                    },
                    "dest": "/$1"
                },
                {
                    "src": "/(.*)",
                    "dest": "/$1"
                }
            ],
            "headers": [
                {
                    "source": "/(.*)",
                    "headers": [
                        {
                            "key": "X-Content-Type-Options",
                            "value": "nosniff"
                        },
                        {
                            "key": "X-Frame-Options",
                            "value": "DENY"
                        },
                        {
                            "key": "X-XSS-Protection",
                            "value": "1; mode=block"
                        }
                    ]
                }
            ]
        }, null, 2);
    }

    generatePackageJson(cvData) {
        const name = cvData.personalInfo.name.toLowerCase().replace(/[^a-z0-9]/g, '-');

        return JSON.stringify({
            "name": `${name}-landing-page`,
            "version": "1.0.0",
            "description": `Professional landing page for ${cvData.personalInfo.name}`,
            "main": "index.html",
            "scripts": {
                "start": "python3 -m http.server 8000",
                "serve": "npx serve .",
                "build": "echo 'Static site - no build required'"
            },
            "keywords": [
                "portfolio",
                "cv",
                "resume",
                "landing-page",
                "professional"
            ],
            "author": cvData.personalInfo.name,
            "license": "MIT",
            "homepage": ".",
            "repository": {
                "type": "git",
                "url": "git+https://github.com/username/repo-name.git"
            },
            "devDependencies": {
                "serve": "^14.0.0"
            }
        }, null, 2);
    }

    // Enhanced HTML generation with GitHub Pages meta tags
    generateEnhancedHTML(cvData, templateContent) {
        // Add GitHub Pages specific meta tags and optimizations
        const enhancedTemplate = templateContent.replace(
            '<head>',
            `<head>
    <!-- GitHub Pages Optimizations -->
    <meta name="generator" content="CV Landing Generator">
    <meta name="author" content="${cvData.personalInfo.name}">
    <meta name="description" content="Professional landing page for ${cvData.personalInfo.name} - ${cvData.personalInfo.currentTitle || 'Professional'}">
    <meta name="keywords" content="portfolio, cv, resume, ${cvData.personalInfo.name}, professional">
    
    <!-- Open Graph tags for social sharing -->
    <meta property="og:title" content="${cvData.personalInfo.name} - Professional Landing Page">
    <meta property="og:description" content="${cvData.personalInfo.summary || 'Professional portfolio and CV'}">
    <meta property="og:type" content="profile">
    <meta property="og:url" content="">
    
    <!-- Twitter Card tags -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="${cvData.personalInfo.name} - Professional Landing Page">
    <meta name="twitter:description" content="${cvData.personalInfo.summary || 'Professional portfolio and CV'}">
    
    <!-- Performance and SEO -->
    <meta name="robots" content="index, follow">
    <meta name="googlebot" content="index, follow">
    <link rel="canonical" href="">
    
    <!-- PWA support -->
    <meta name="theme-color" content="#1f2937">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">`
        );

        return enhancedTemplate;
    }

    // Optimize CSS for GitHub Pages
    optimizeCSSForGitHub(cssContent) {
        // Add GitHub Pages specific optimizations
        const optimizedCSS = `/* GitHub Pages Optimized CSS */
/* Generated on ${new Date().toISOString()} */

${cssContent}

/* GitHub Pages specific enhancements */
@media print {
    .no-print {
        display: none !important;
    }
}

/* Accessibility improvements */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
}

/* Performance optimizations */
img {
    loading: lazy;
    decoding: async;
}

/* Smooth scrolling for better UX */
html {
    scroll-behavior: smooth;
}

/* Focus improvements for accessibility */
a:focus,
button:focus {
    outline: 2px solid #3b82f6;
    outline-offset: 2px;
}
`;

        return optimizedCSS;
    }
}

module.exports = TemplateProcessor;

[END OF FILE: lib\template-processor.js]

--------------------------------------------------------------------------------
FILE: lib\cv-processors\about-me-processor.js
SIZE: 7673 bytes (7.5 KB)
--------------------------------------------------------------------------------
// File: lib/cv-processors/about-me-processor.js
const BaseProcessor = require('./base-processor');

class AboutMeProcessor extends BaseProcessor {
    constructor() {
        super();
    }

    async processText(cleanedText, existingData = {}) {
        console.log('📝 Generating about me content...');
        
        const personalInfo = existingData.personalInfo || {};
        
        // Step 1: Generate professional summary
        const summary = await this.generateSummary(cleanedText, personalInfo);
        
        // Step 2: Generate about me paragraph
        const aboutMe = await this.generateAboutMe(cleanedText, personalInfo);
        
        // Combine the results
        const aboutData = {
            summary: this.cleanValue(summary),
            aboutMe: this.cleanValue(aboutMe)
        };
        
        this.logStats(aboutData, 'generated about content');
        
        return { aboutData };
    }

    async generateSummary(cvText, personalInfo) {
        const name = personalInfo.name || 'Professional';
        const title = personalInfo.currentTitle || 'Professional';
        
        const prompt = `
Create a professional summary (2-3 sentences) for ${name} based on their CV.

Person: ${name}
Current Title: ${title}

CV Content:
${cvText.substring(0, 3000)}

Requirements:
- 2-3 sentences maximum
- Professional and compelling tone
- Highlight key strengths and experience
- Mention years of experience if you can determine it
- Adapt to their actual profession and industry
- Make it specific to their background

Professional Summary:`;

        try {
            const response = await this.generateSimpleText(prompt, 'summary generation');
            
            if (response && response.length > 20 && response.length < 500) {
                console.log(`✅ Summary generated (${response.length} chars)`);
                return response;
            } else {
                throw new Error('Invalid summary length');
            }
            
        } catch (error) {
            console.error('❌ Summary generation failed:', error.message);
            return this.getFallbackSummary(personalInfo);
        }
    }

    async generateAboutMe(cvText, personalInfo) {
        const name = personalInfo.name || 'Professional';
        const title = personalInfo.currentTitle || 'Professional';
        
        const prompt = `
Create a compelling "About Me" section (3-4 sentences) for ${name}'s professional landing page.

Person: ${name}
Current Title: ${title}

CV Content:
${cvText.substring(0, 3000)}

Requirements:
- 3-4 sentences
- Write in first person ("I am...")
- Tell their professional story and journey
- Show personality while staying professional
- Highlight what makes them unique
- Adapt to their actual industry and background
- Sound engaging and personal

About Me:`;

        try {
            const response = await this.generateSimpleText(prompt, 'about me generation');
            
            if (response && response.length > 50 && response.length < 800) {
                console.log(`✅ About me generated (${response.length} chars)`);
                return response;
            } else {
                throw new Error('Invalid about me length');
            }
            
        } catch (error) {
            console.error('❌ About me generation failed:', error.message);
            return this.getFallbackAboutMe(personalInfo);
        }
    }

    getFallbackSummary(personalInfo) {
        const title = personalInfo.currentTitle || 'Professional';
        const name = personalInfo.name || 'Professional';
        
        console.log('🔄 Using fallback summary');
        
        if (title.toLowerCase().includes('engineer') || title.toLowerCase().includes('developer')) {
            return `Experienced ${title} with a strong background in technology and software development. Passionate about creating innovative solutions and delivering high-quality results in dynamic environments.`;
        } else if (title.toLowerCase().includes('manager') || title.toLowerCase().includes('lead')) {
            return `Accomplished ${title} with proven expertise in team leadership and strategic planning. Dedicated to driving organizational success through effective management and innovative problem-solving.`;
        } else if (title.toLowerCase().includes('analyst') || title.toLowerCase().includes('data')) {
            return `Skilled ${title} with expertise in data analysis and strategic insights. Committed to transforming complex data into actionable business intelligence and driving informed decision-making.`;
        } else {
            return `Dedicated ${title} with a strong track record of professional excellence. Passionate about delivering outstanding results and contributing meaningfully to organizational objectives.`;
        }
    }

    getFallbackAboutMe(personalInfo) {
        const title = personalInfo.currentTitle || 'professional';
        const name = personalInfo.name || 'professional';
        
        console.log('🔄 Using fallback about me');
        
        if (title.toLowerCase().includes('engineer') || title.toLowerCase().includes('developer')) {
            return `I am a passionate ${title} who thrives on solving complex technical challenges and building innovative solutions. My journey in technology has been driven by curiosity and a commitment to continuous learning. I enjoy collaborating with diverse teams to create impactful software that makes a difference. When I'm not coding, I stay current with emerging technologies and contribute to the tech community.`;
        } else if (title.toLowerCase().includes('manager') || title.toLowerCase().includes('lead')) {
            return `I am an experienced ${title} who believes in empowering teams to achieve their full potential. My approach combines strategic thinking with hands-on leadership to drive results and foster innovation. I'm passionate about building collaborative environments where people can grow and excel. My goal is to create positive impact through effective leadership and meaningful professional relationships.`;
        } else if (title.toLowerCase().includes('analyst') || title.toLowerCase().includes('data')) {
            return `I am a detail-oriented ${title} who enjoys uncovering insights hidden within complex datasets. My passion lies in transforming raw data into compelling stories that drive business decisions. I thrive in environments where analytical thinking meets creative problem-solving. I'm committed to using data as a tool for positive change and strategic advancement.`;
        } else {
            return `I am a dedicated ${title} who brings enthusiasm and expertise to every project I undertake. My career has been shaped by a commitment to excellence and continuous improvement. I believe in the power of collaboration and innovative thinking to overcome challenges and create meaningful outcomes. I'm passionate about making a positive impact in my field and contributing to organizational success.`;
        }
    }

    async getFallbackData(existingData = {}) {
        const personalInfo = existingData.personalInfo || {};
        
        console.log('🔄 Generating fallback about data...');
        
        return {
            aboutData: {
                summary: this.getFallbackSummary(personalInfo),
                aboutMe: this.getFallbackAboutMe(personalInfo)
            }
        };
    }
}

module.exports = AboutMeProcessor;

[END OF FILE: lib\cv-processors\about-me-processor.js]

--------------------------------------------------------------------------------
FILE: lib\cv-processors\base-processor.js
SIZE: 7960 bytes (7.8 KB)
--------------------------------------------------------------------------------
// File: lib/cv-processors/base-processor.js
const LLMClientFactory = require('../utils/llm-client-factory');
const TextCleaner = require('../utils/text-cleaner');

class BaseProcessor {
    constructor(llmConfig = {}) {
        // Create LLM client based on configuration
        this.llmClient = LLMClientFactory.createClient(llmConfig);
        this.processorName = this.constructor.name;
        
        console.log(`${this.processorName} initialized with ${this.llmClient.clientName}`);
    }

    async process(cvText, existingData = {}) {
        try {
            console.log(`\nStarting ${this.processorName}...`);
            
            // Clean the text for processing
            const cleanedText = TextCleaner.prepareForAI(cvText);
            
            // Process the text (implemented by subclasses)
            const result = await this.processText(cleanedText, existingData);
            
            console.log(`${this.processorName} completed successfully`);
            return result;
            
        } catch (error) {
            console.warn(`${this.processorName} failed: ${error.message}`);
            
            try {
                // Try to get fallback data
                const fallback = await this.getFallbackData(existingData);
                console.log(`Using fallback data for ${this.processorName}`);
                return fallback;
            } catch (fallbackError) {
                console.warn(`Fallback also failed for ${this.processorName}: ${fallbackError.message}`);
                
                // Return empty data structure appropriate for each processor
                const emptyResult = this.getEmptyResult();
                console.log(`Returning empty result for ${this.processorName} - section will be hidden`);
                return emptyResult;
            }
        }
    }

    // Default empty result - can be overridden by subclasses
    getEmptyResult() {
        const processorType = this.constructor.name.toLowerCase();
        
        if (processorType.includes('personalinfo')) {
            return {
                personalInfo: {
                    name: '',
                    email: '',
                    phone: '',
                    location: '',
                    currentTitle: 'Professional'
                }
            };
        } else if (processorType.includes('aboutme')) {
            return {
                aboutData: {
                    summary: '',
                    aboutMe: ''
                }
            };
        } else if (processorType.includes('experience')) {
            return { experience: [] };
        } else if (processorType.includes('skills')) {
            return { 
                skills: { 
                    technical: [], 
                    soft: [], 
                    languages: [] 
                } 
            };
        } else if (processorType.includes('education')) {
            return { education: [] };
        } else if (processorType.includes('projects')) {
            return { projects: [] };
        } else if (processorType.includes('certifications')) {
            return { certifications: [] };
        } else {
            return {}; // Generic empty result
        }
    }

    // Abstract methods that must be implemented by subclasses
    async processText(cleanedText, existingData) {
        throw new Error(`processText method must be implemented by ${this.processorName}`);
    }

    async getFallbackData(existingData) {
        // Default implementation returns empty result
        console.log(`Using default empty result for ${this.processorName}`);
        return this.getEmptyResult();
    }

    // Utility method for simple AI text generation
    async generateSimpleText(prompt, description) {
        try {
            return await this.llmClient.generateSimpleText(prompt, 
                `${this.processorName} - ${description}`);
        } catch (error) {
            console.error(`AI generation failed for ${this.processorName}: ${error.message}`);
            throw error;
        }
    }

    // Utility method for extracting structured data
    async extractData(prompt, description) {
        try {
            return await this.llmClient.extractSimpleData(prompt, 
                `${this.processorName} - ${description}`);
        } catch (error) {
            console.error(`Data extraction failed for ${this.processorName}: ${error.message}`);
            throw error;
        }
    }

    // Utility method for JSON extraction
    async extractJSON(prompt, description) {
        try {
            return await this.llmClient.extractJSON(prompt, 
                `${this.processorName} - ${description}`);
        } catch (error) {
            console.error(`JSON extraction failed for ${this.processorName}: ${error.message}`);
            throw error;
        }
    }

    // Utility method to parse key-value responses
    parseKeyValueResponse(response) {
        const data = {};
        const lines = response.split('\n');
        
        lines.forEach(line => {
            const trimmed = line.trim();
            if (trimmed.includes('=')) {
                const [key, ...valueParts] = trimmed.split('=');
                const value = valueParts.join('=').trim();
                
                if (key && key.trim()) {
                    data[key.trim().toLowerCase()] = value || '';
                }
            }
        });
        
        return data;
    }

    // Utility method to validate required fields
    validateRequiredFields(data, requiredFields) {
        const missing = [];
        
        requiredFields.forEach(field => {
            if (!data[field] || data[field].trim() === '') {
                missing.push(field);
            }
        });
        
        if (missing.length > 0) {
            console.warn(`${this.processorName} - Missing required fields: ${missing.join(', ')}`);
        }
        
        return missing.length === 0;
    }

    // Utility method to clean extracted values
    cleanValue(value) {
        if (!value || typeof value !== 'string') {
            return '';
        }
        
        return value
            .trim()
            .replace(/^["']|["']$/g, '') // Remove surrounding quotes
            .replace(/\s+/g, ' ') // Normalize whitespace
            .trim();
    }

    // Utility method to log processing stats
    logStats(data, description) {
        const stats = {};
        
        Object.keys(data).forEach(key => {
            const value = data[key];
            if (typeof value === 'string') {
                stats[key] = value ? `${value.length} chars` : 'empty';
            } else if (Array.isArray(value)) {
                stats[key] = `${value.length} items`;
            } else {
                stats[key] = typeof value;
            }
        });
        
        console.log(`${this.processorName} - ${description}:`, stats);
    }

    // Method to switch LLM client if needed
    switchLLMClient(newConfig) {
        console.log(`${this.processorName} - Switching LLM client...`);
        this.llmClient = LLMClientFactory.createClient(newConfig);
        console.log(`${this.processorName} - Now using ${this.llmClient.clientName}`);
    }

    // Method to test current LLM client
    async testLLMClient() {
        try {
            await this.llmClient.testConnection();
            console.log(`${this.processorName} - ${this.llmClient.clientName} is working correctly`);
            return true;
        } catch (error) {
            console.error(`${this.processorName} - ${this.llmClient.clientName} test failed:`, error.message);
            return false;
        }
    }
}

module.exports = BaseProcessor;

[END OF FILE: lib\cv-processors\base-processor.js]

--------------------------------------------------------------------------------
FILE: lib\cv-processors\certifications-processor.js
SIZE: 9814 bytes (9.6 KB)
--------------------------------------------------------------------------------
// File: lib/cv-processors/certifications-processor.js
const BaseProcessor = require('./base-processor');

class CertificationsProcessor extends BaseProcessor {
    constructor() {
        super();
    }

    async processText(cleanedText, existingData = {}) {
        console.log('Extracting certifications and professional credentials...');

        // Step 1: Extract certifications data using AI
        const certificationsList = await this.extractCertificationsData(cleanedText);

        // Step 2: Light enhancement - just add basic context without over-explaining
        const enhancedCertifications = await this.lightlyEnhanceCertifications(certificationsList);

        console.log(`Processed ${enhancedCertifications.length} certification entries`);
        this.logStats({ certifications: enhancedCertifications }, 'extracted certifications');

        return { certifications: enhancedCertifications };
    }

    async extractCertificationsData(cvText) {
        const prompt = `
Look for ONLY clear certifications, licenses, professional credentials, and completed courses in this CV.

BE VERY CONSERVATIVE - only extract if you are CERTAIN it's a certification/course.

INCLUDE ONLY:
- Professional certifications (AWS, Google Cloud, Microsoft, Cisco, etc.)
- Industry licenses (CPA, RN, PE, Bar License, etc.)
- Completed courses with certificates
- Professional training programs with credentials
- Academic certifications beyond degrees
- Technical certifications (PMP, Six Sigma, ITIL, etc.)

DO NOT INCLUDE:
- Regular work experience or job titles
- Education degrees (Bachelor's, Master's, PhD)
- Skills or technologies without certification proof
- Soft skills or general abilities
- Achievements or accomplishments that aren't certifications
- Training that doesn't result in a credential
- Anything you're not 100% sure is a certification

Return ONLY the certifications you are CERTAIN about in this format:
Certification Name | Issuing Organization | Date | ID/URL | Type

If NO clear certifications are found, respond with: "NO_CERTIFICATIONS_FOUND"

Examples of what TO include:
- AWS Solutions Architect Associate | Amazon Web Services | 2023 | | Technical
- Project Management Professional (PMP) | PMI | 2022 | | Professional
- Registered Nurse License | State Board of Nursing | 2021 | RN123456 | License
- Google Analytics Certified | Google | 2023 | | Technical

Examples of what NOT to include:
- Bachelor of Science (this is education, not certification)
- Software Engineer (this is a job title)
- JavaScript (this is a skill, not a certification)
- Team Leadership (this is a skill/achievement)

CV Text:
${cvText}

Certifications (format: Name | Issuer | Date | URL/ID | Type):`;

        const response = await this.generateSimpleText(prompt, 'conservative certifications extraction');

        if (!response || response.trim().length === 0) {
            console.log('No certifications response from AI');
            throw new Error('No certifications data could be extracted from CV');
        }

        // Check if AI explicitly said no certifications found
        if (response.trim().toUpperCase().includes('NO_CERTIFICATIONS_FOUND')) {
            console.log('AI confirmed no clear certifications found in CV');
            throw new Error('No clear certifications found in CV');
        }

        return this.parseCertificationsResponse(response);
    }

    parseCertificationsResponse(response) {
        const certifications = [];
        const lines = response.split('\n').filter(line => line.trim().length > 0);

        // Keywords that indicate this is NOT a certification
        const excludeKeywords = [
            'bachelor', 'master', 'phd', 'doctorate', 'degree',
            'university', 'college', 'school',
            'engineer', 'manager', 'developer', 'analyst',
            'experience', 'worked', 'responsible',
            'skills', 'proficient', 'knowledge'
        ];

        // Keywords that indicate this IS likely a certification
        const includeKeywords = [
            'certified', 'certification', 'license', 'credential',
            'certificate', 'professional', 'associate', 'expert',
            'aws', 'google', 'microsoft', 'cisco', 'oracle',
            'pmp', 'cpa', 'rn', 'pe', 'itil', 'six sigma',
            'comptia', 'ccna', 'mcse', 'cissp'
        ];

        lines.forEach((line, index) => {
            // Skip obvious non-certification lines
            if (line.includes('Certifications (format:') ||
                line.includes('Examples of what') ||
                line.includes('DO NOT INCLUDE:') ||
                line.includes('INCLUDE ONLY:') ||
                line.length < 5) {
                return;
            }

            const parts = line.split('|').map(part => part.trim());

            if (parts.length >= 3) {
                const certName = this.cleanValue(parts[0]).toLowerCase();
                const issuer = this.cleanValue(parts[1]).toLowerCase();

                // Check if this looks like a certification
                const hasExcludeKeyword = excludeKeywords.some(keyword =>
                    certName.includes(keyword) || issuer.includes(keyword)
                );

                const hasIncludeKeyword = includeKeywords.some(keyword =>
                    certName.includes(keyword) || issuer.includes(keyword)
                );

                // Be very conservative - only include if:
                // 1. Has include keywords OR
                // 2. Doesn't have exclude keywords AND looks like cert format
                const looksLikeCert = (
                    hasIncludeKeyword ||
                    (!hasExcludeKeyword && (
                        certName.length > 5 &&
                        issuer.length > 2 &&
                        !certName.includes('experience') &&
                        !certName.includes('worked') &&
                        !certName.includes('responsible')
                    ))
                );

                if (looksLikeCert) {
                    const certification = {
                        name: this.cleanValue(parts[0]),
                        issuer: this.cleanValue(parts[1]),
                        date: this.cleanValue(parts[2]),
                        url: this.cleanValue(parts[3] || ''),
                        type: this.cleanValue(parts[4] || 'Professional')
                    };

                    // Final validation - make sure it has proper structure
                    if (certification.name &&
                        certification.issuer &&
                        certification.name.length > 3 &&
                        certification.issuer.length > 2) {

                        certifications.push(certification);
                        console.log(`Added certification ${certifications.length}: ${certification.name} from ${certification.issuer}`);
                    } else {
                        console.log(`Rejected invalid certification: ${line}`);
                    }
                } else {
                    console.log(`Rejected non-certification: "${certName}" - doesn't meet certification criteria`);
                }
            }
        });

        if (certifications.length === 0) {
            console.log('No valid certifications could be parsed from response');
            throw new Error('No clear certifications found in CV');
        }

        console.log(`Successfully parsed ${certifications.length} conservative certifications`);
        return certifications;
    }


    async lightlyEnhanceCertifications(certificationsList) {
        // Add basic descriptions for well-known certifications
        // Keep it short and factual
        const enhancedCertifications = [];

        for (const cert of certificationsList) {
            const enhanced = await this.addBasicDescription(cert);
            enhancedCertifications.push(enhanced);
        }

        return enhancedCertifications;
    }

    async addBasicDescription(certification) {
        // Add a very brief, factual description for context
        const prompt = `
Add a brief, factual description (1 sentence) for this certification. Keep it professional and concise.

Certification: ${certification.name}
Issuer: ${certification.issuer}
Type: ${certification.type}

REQUIREMENTS:
- Maximum 1 sentence
- Factual and professional
- Explain what this certification validates
- Don't be overly promotional

Return ONLY the description, nothing else:`;

        try {
            const response = await this.generateSimpleText(prompt, `description for ${certification.name}`);

            const description = this.cleanValue(response);

            // Validate the response
            if (description && description.length > 5 && description.length < 150) {
                return {
                    ...certification,
                    description: description
                };
            } else {
                // If enhancement fails, return without description
                return certification;
            }

        } catch (error) {
            console.warn(`Description generation failed for ${certification.name}, keeping without description`);
            return certification;
        }
    }

    async getFallbackData(existingData = {}) {
        console.log('No clear certifications found - section will be hidden');

        // Return empty certifications array - section will be hidden in UI
        return { certifications: [] };
    }
}

module.exports = CertificationsProcessor;

[END OF FILE: lib\cv-processors\certifications-processor.js]

--------------------------------------------------------------------------------
FILE: lib\cv-processors\education-processor.js
SIZE: 9157 bytes (8.9 KB)
--------------------------------------------------------------------------------
// File: lib/cv-processors/education-processor.js
const BaseProcessor = require('./base-processor');

class EducationProcessor extends BaseProcessor {
    constructor() {
        super();
    }

    async processText(cleanedText, existingData = {}) {
        console.log('Extracting education background...');
        
        try {
            // Step 1: Extract education data using AI
            const educationList = await this.extractEducationData(cleanedText);
            
            // Step 2: Enhance each education entry with better descriptions
            const enhancedEducation = await this.enhanceEducationEntries(educationList, cleanedText);
            
            console.log(`Processed ${enhancedEducation.length} education entries`);
            this.logStats({ education: enhancedEducation }, 'extracted education');
            
            return { education: enhancedEducation };
            
        } catch (error) {
            console.warn(`Education extraction failed: ${error.message}`);
            console.log('Returning empty education array - section will be hidden');
            
            // Return empty education array instead of throwing error
            return { education: [] };
        }
    }

    async extractEducationData(cvText) {
        const prompt = `
Extract ALL education from this CV for ANY profession. Return each degree/education in this EXACT format:

Degree/Qualification | Institution | Location | Graduation Date | GPA/Grade | Description

Rules:
- One education entry per line
- Use | as separator between fields
- For dates: use YYYY or YYYY-MM format
- Include degrees, diplomas, certificates, training, courses
- GPA/Grade can be empty if not mentioned
- Location can be empty if not mentioned
- Description should be 1-2 sentences about the program/achievements
- Works for ALL education types: university degrees, vocational training, certifications, courses
- List from most recent to oldest
- If NO education is found, respond with: "NO_EDUCATION_FOUND"

Examples for different professions:
- Bachelor of Science in Computer Science | MIT | Boston, MA | 2020 | 3.8 | Focused on software engineering and algorithms
- Culinary Arts Diploma | Le Cordon Bleu | Paris, France | 2019 | | Professional cooking program with French cuisine specialization
- Registered Nurse Certification | Community College | Chicago, IL | 2021 | | Nursing program with clinical training in patient care
- Teaching Certificate | State University | Austin, TX | 2018 | | Education program with classroom management training

CV Text:
${cvText}

Education (format: Degree | Institution | Location | Date | GPA | Description):`;

        const response = await this.generateSimpleText(prompt, 'education extraction');
        
        if (!response || response.trim().length === 0) {
            console.log('No education response from AI');
            throw new Error('No education data could be extracted from CV');
        }
        
        // Check if AI explicitly said no education found
        if (response.trim().toUpperCase().includes('NO_EDUCATION_FOUND')) {
            console.log('AI confirmed no education found in CV');
            throw new Error('No education mentioned in CV');
        }
        
        return this.parseEducationResponse(response);
    }

    parseEducationResponse(response) {
        const educationEntries = [];
        const lines = response.split('\n').filter(line => line.trim().length > 0);
        
        lines.forEach((line, index) => {
            // Skip lines that don't look like education entries
            if (line.includes('Education (format:') || 
                line.includes('Examples for different') ||
                line.includes('Rules:') ||
                line.length < 10) {
                return;
            }
            
            const parts = line.split('|').map(part => part.trim());
            
            if (parts.length >= 4) {
                const education = {
                    degree: this.cleanValue(parts[0]),
                    institution: this.cleanValue(parts[1]),
                    location: this.cleanValue(parts[2]),
                    graduationDate: this.cleanValue(parts[3]),
                    gpa: this.cleanValue(parts[4] || ''),
                    description: this.cleanValue(parts[5] || ''),
                    achievements: []
                };
                
                // Validate required fields
                if (education.degree && education.institution && 
                    education.degree.length > 2 && education.institution.length > 2) {
                    educationEntries.push(education);
                    console.log(`Parsed education ${index + 1}: ${education.degree} from ${education.institution}`);
                } else {
                    console.warn(`Skipped invalid education entry: ${line}`);
                }
            }
        });
        
        if (educationEntries.length === 0) {
            console.log('No valid education entries could be parsed from response');
            throw new Error('No valid education entries found in CV');
        }
        
        console.log(`Successfully parsed ${educationEntries.length} education entries`);
        return educationEntries;
    }

    async enhanceEducationEntries(educationList, cvText) {
        const enhancedEducation = [];
        
        for (let i = 0; i < educationList.length; i++) {
            const education = educationList[i];
            console.log(`Enhancing education ${i + 1}: ${education.degree} from ${education.institution}`);
            
            try {
                const enhanced = await this.enhanceSingleEducation(education, cvText);
                enhancedEducation.push(enhanced);
            } catch (error) {
                console.error(`Failed to enhance education ${education.degree}: ${error.message}`);
                // Keep original education if enhancement fails
                enhancedEducation.push(education);
            }
        }
        
        return enhancedEducation;
    }

    async enhanceSingleEducation(education, cvText) {
        const prompt = `
Enhance this education entry by improving the description and extracting achievements.

Education: ${education.degree} from ${education.institution}
Current Description: ${education.description}
Graduation: ${education.graduationDate}
GPA: ${education.gpa}

Full CV Context:
${cvText.substring(0, 4000)}

REQUIREMENTS:
1. Improve description (2-3 sentences max) - make it more compelling
2. Extract 2-4 specific academic achievements if mentioned in CV
3. Include relevant coursework, honors, activities, projects if mentioned
4. Stay factual but make it engaging
5. Focus on what makes this education valuable

Return in this format:
DESCRIPTION: [Enhanced description here]
ACHIEVEMENTS:
- [Achievement 1]
- [Achievement 2]
- [Achievement 3]
- [Achievement 4]

Enhanced education:`;

        try {
            const response = await this.generateSimpleText(prompt, `education enhancement for ${education.degree}`);
            return this.parseEnhancedEducationResponse(response, education);
        } catch (error) {
            console.warn(`Enhancement failed for ${education.degree}, keeping original`);
            return education;
        }
    }

    parseEnhancedEducationResponse(response, originalEducation) {
        const lines = response.split('\n').map(line => line.trim()).filter(line => line.length > 0);
        
        let description = originalEducation.description;
        const achievements = [];
        
        let inAchievements = false;
        
        lines.forEach(line => {
            if (line.startsWith('DESCRIPTION:')) {
                description = this.cleanValue(line.replace('DESCRIPTION:', ''));
            } else if (line.startsWith('ACHIEVEMENTS:')) {
                inAchievements = true;
            } else if (inAchievements && line.startsWith('-')) {
                const achievement = this.cleanValue(line.substring(1));
                if (achievement && achievement.length > 5) {
                    achievements.push(achievement);
                }
            }
        });
        
        // Validate enhanced content
        if (!description || description.length < 10) {
            console.warn(`Enhancement failed for ${originalEducation.degree}, using original description`);
            description = originalEducation.description;
        }
        
        return {
            ...originalEducation,
            description: description,
            achievements: achievements
        };
    }

    async getFallbackData(existingData = {}) {
        console.log('No education data found - section will be hidden in UI');
        
        // Return empty education array instead of throwing error
        return { education: [] };
    }
}

module.exports = EducationProcessor;

[END OF FILE: lib\cv-processors\education-processor.js]

--------------------------------------------------------------------------------
FILE: lib\cv-processors\experience-processor.js
SIZE: 6433 bytes (6.3 KB)
--------------------------------------------------------------------------------
// File: lib/cv-processors/experience-processor.js
const BaseProcessor = require('./base-processor');

class ExperienceProcessor extends BaseProcessor {
    constructor() {
        super();
    }

    async processText(cleanedText, existingData = {}) {
        console.log('Extracting work experience...');

        // Step 1: Extract experience data using AI
        const experienceList = await this.extractExperienceData(cleanedText);

        // Step 2: Enhance each experience entry with better descriptions
        const enhancedExperience = await this.enhanceExperienceEntries(experienceList, cleanedText);

        console.log(`Processed ${enhancedExperience.length} experience entries`);
        this.logStats({ experience: enhancedExperience }, 'extracted experience');

        return { experience: enhancedExperience };
    }

    async extractExperienceData(cvText) {
        const prompt = `
Extract work experience from this CV. ONLY extract from the "Work Experience" or "Employment" section, NOT from summary or skills sections.

Job Title | Company Name | Location | Start Date | End Date | Description

Rules:
- ONLY extract jobs from the actual Work Experience/Employment section
- One job per line
- Use | as separator between fields
- For dates: use YYYY-MM format or just YYYY if month unknown
- Use "Present" for current positions
- Location can be empty if not mentioned
- Description should be 1-2 sentences from the CV
- Do NOT add extra information not in the CV
- List jobs from most recent to oldest

CV Text:
${cvText}

Work Experience (format: Title | Company | Location | Start | End | Description):`;

        const response = await this.generateSimpleText(prompt, 'experience extraction');

        if (!response || response.trim().length === 0) {
            throw new Error('No experience data could be extracted from CV');
        }

        return this.parseExperienceResponse(response);
    }

    parseExperienceResponse(response) {
        const jobs = [];
        const lines = response.split('\n').filter(line => line.trim().length > 0);

        lines.forEach((line, index) => {
            const parts = line.split('|').map(part => part.trim());

            if (parts.length >= 5) {
                const job = {
                    title: this.cleanValue(parts[0]),
                    company: this.cleanValue(parts[1]),
                    location: this.cleanValue(parts[2]),
                    startDate: this.cleanValue(parts[3]),
                    endDate: this.cleanValue(parts[4]),
                    description: this.cleanValue(parts[5] || ''),
                    achievements: []
                };

                // Validate required fields
                if (job.title && job.company) {
                    jobs.push(job);
                    console.log(`Parsed job ${index + 1}: ${job.title} at ${job.company}`);
                } else {
                    console.warn(`Skipped invalid job entry: ${line}`);
                }
            }
        });

        if (jobs.length === 0) {
            throw new Error('No valid experience entries could be parsed');
        }

        console.log(`Successfully parsed ${jobs.length} jobs`);
        return jobs;
    }

    async enhanceExperienceEntries(jobs, cvText) {
        const enhancedJobs = [];

        for (let i = 0; i < jobs.length; i++) {
            const job = jobs[i];
            console.log(`Enhancing job ${i + 1}: ${job.title} at ${job.company}`);

            try {
                const enhanced = await this.enhanceSingleJob(job, cvText);
                enhancedJobs.push(enhanced);
            } catch (error) {
                console.error(`Failed to enhance job ${job.title}: ${error.message}`);
                // Keep original job if enhancement fails
                enhancedJobs.push(job);
            }
        }

        return enhancedJobs;
    }

    async enhanceSingleJob(job, cvText) {
        const prompt = `
Enhance this job experience by rewriting the description in FIRST PERSON and extracting achievements.

Job: ${job.title} at ${job.company}
Current Description: ${job.description}
Duration: ${job.startDate} to ${job.endDate}

Full CV Context:
${cvText.substring(0, 4000)}

REQUIREMENTS:
1. Rewrite description in FIRST PERSON (2-3 sentences max)
2. Extract 2-4 specific achievements as bullet points
3. Use action verbs and quantify results where possible
4. Make it compelling but stay factual
5. Focus on impact and results

Return in this format:
DESCRIPTION: [First-person description here]
ACHIEVEMENTS:
- [Achievement 1]
- [Achievement 2]
- [Achievement 3]
- [Achievement 4]

Enhanced job experience:`;

        const response = await this.generateSimpleText(prompt, `job enhancement for ${job.title}`);

        return this.parseEnhancedJobResponse(response, job);
    }

    parseEnhancedJobResponse(response, originalJob) {
        const lines = response.split('\n').map(line => line.trim()).filter(line => line.length > 0);

        let description = originalJob.description;
        const achievements = [];

        let inAchievements = false;

        lines.forEach(line => {
            if (line.startsWith('DESCRIPTION:')) {
                description = this.cleanValue(line.replace('DESCRIPTION:', ''));
            } else if (line.startsWith('ACHIEVEMENTS:')) {
                inAchievements = true;
            } else if (inAchievements && line.startsWith('-')) {
                const achievement = this.cleanValue(line.substring(1));
                if (achievement && achievement.length > 5) {
                    achievements.push(achievement);
                }
            }
        });

        // Validate enhanced content
        if (!description || description.length < 20) {
            console.warn(`Enhancement failed for ${originalJob.title}, using original description`);
            description = originalJob.description;
        }

        return {
            ...originalJob,
            description: description,
            achievements: achievements
        };
    }

    async getFallbackData(existingData = {}) {
        throw new Error('Experience extraction failed - no fallback available');
    }
}

module.exports = ExperienceProcessor;

[END OF FILE: lib\cv-processors\experience-processor.js]

--------------------------------------------------------------------------------
FILE: lib\cv-processors\personal-info-processor.js
SIZE: 6040 bytes (5.9 KB)
--------------------------------------------------------------------------------
// File: lib/cv-processors/personal-info-processor.js
const BaseProcessor = require('./base-processor');
const TextCleaner = require('../utils/text-cleaner');

class PersonalInfoProcessor extends BaseProcessor {
    constructor() {
        super();
    }

    async processText(cleanedText, existingData = {}) {
        console.log('👤 Extracting personal information...');
        
        // Step 1: Extract contact info using regex patterns
        const contactInfo = TextCleaner.extractContactInfo(cleanedText);
        
        // Step 2: Extract name using AI
        const nameData = await this.extractName(cleanedText);
        
        // Step 3: Extract location using AI
        const locationData = await this.extractLocation(cleanedText, contactInfo);
        
        // Step 4: Determine current job title
        const jobTitle = await this.extractCurrentJobTitle(cleanedText);
        
        // Combine all data
        const personalInfo = {
            name: this.cleanValue(nameData.name),
            email: contactInfo.emails[0] || '',
            phone: contactInfo.phones[0] || '',
            location: this.cleanValue(locationData.location),
            currentTitle: this.cleanValue(jobTitle)
        };
        
        this.logStats(personalInfo, 'extracted personal info');
        
        // Validate we have the minimum required data
        if (!personalInfo.name) {
            throw new Error('Unable to extract name from CV');
        }
        
        return { personalInfo };
    }

    async extractName(cvText) {
        const prompt = `
Extract the person's full name from this CV text.

CV Text:
${cvText.substring(0, 1000)}

Instructions:
- Look for the person's full name (usually at the top)
- Return only the name, nothing else
- If multiple names appear, choose the main person's name
- Do not include titles like Mr., Dr., etc.

Name:`;

        try {
            const response = await this.generateSimpleText(prompt, 'name extraction');
            const cleanedName = this.cleanValue(response);
            
            // Validate the name looks reasonable
            if (cleanedName && cleanedName.length > 1 && cleanedName.length < 50) {
                console.log(`✅ Name extracted: "${cleanedName}"`);
                return { name: cleanedName };
            } else {
                throw new Error('Invalid name format received');
            }
            
        } catch (error) {
            console.error('❌ AI name extraction failed:', error.message);
            
            // Fallback: try to find name using text patterns
            const candidates = TextCleaner.extractNameCandidates(cvText);
            if (candidates.length > 0) {
                console.log(`🔄 Using fallback name: "${candidates[0]}"`);
                return { name: candidates[0] };
            }
            
            throw new Error('Unable to extract name');
        }
    }

    async extractLocation(cvText, contactInfo) {
        // Start with any locations found by regex
        let locationCandidates = [...contactInfo.locations];
        
        const prompt = `
Extract the person's current location/address from this CV.

CV Text:
${cvText.substring(0, 2000)}

Instructions:
- Look for current address, city, state, country
- Return in format: City, State/Country
- If only city is mentioned, that's fine
- Do not include full street addresses
- Return only the location, nothing else

Location:`;

        try {
            const response = await this.generateSimpleText(prompt, 'location extraction');
            const cleanedLocation = this.cleanValue(response);
            
            if (cleanedLocation && cleanedLocation.length > 2) {
                console.log(`✅ Location extracted: "${cleanedLocation}"`);
                return { location: cleanedLocation };
            }
            
        } catch (error) {
            console.error('❌ AI location extraction failed:', error.message);
        }
        
        // Fallback to regex-found locations
        if (locationCandidates.length > 0) {
            console.log(`🔄 Using fallback location: "${locationCandidates[0]}"`);
            return { location: locationCandidates[0] };
        }
        
        return { location: '' };
    }

    async extractCurrentJobTitle(cvText) {
        const prompt = `
Extract the person's current job title from this CV.

CV Text:
${cvText.substring(0, 2000)}

Instructions:
- Look for their current position/job title
- Usually found near the top or in experience section
- Look for words like "Current", "Present", dates like 2024, 2025
- Return only the job title, not the company
- Examples: "Software Engineer", "Marketing Manager", "Data Analyst"

Current Job Title:`;

        try {
            const response = await this.generateSimpleText(prompt, 'job title extraction');
            const cleanedTitle = this.cleanValue(response);
            
            if (cleanedTitle && cleanedTitle.length > 2 && cleanedTitle.length < 100) {
                console.log(`✅ Job title extracted: "${cleanedTitle}"`);
                return cleanedTitle;
            }
            
        } catch (error) {
            console.error('❌ AI job title extraction failed:', error.message);
        }
        
        return 'Professional';
    }

    async getFallbackData(existingData = {}) {
        console.log('🔄 Generating fallback personal info...');
        
        return {
            personalInfo: {
                name: existingData.name || 'Professional',
                email: existingData.email || '',
                phone: existingData.phone || '',
                location: existingData.location || '',
                currentTitle: existingData.currentTitle || 'Professional'
            }
        };
    }
}

module.exports = PersonalInfoProcessor;

[END OF FILE: lib\cv-processors\personal-info-processor.js]

--------------------------------------------------------------------------------
FILE: lib\cv-processors\projects-processor.js
SIZE: 7019 bytes (6.9 KB)
--------------------------------------------------------------------------------
// File: lib/cv-processors/projects-processor.js
const BaseProcessor = require('./base-processor');

class ProjectsProcessor extends BaseProcessor {
    constructor() {
        super();
    }

    async processText(cleanedText, existingData = {}) {
        console.log('Extracting projects and portfolio work...');
        
        // Step 1: Extract projects data using AI
        const projectsList = await this.extractProjectsData(cleanedText);
        
        // Step 2: Light enhancement - just clean up formatting, keep original content
        const cleanedProjects = await this.lightlyEnhanceProjects(projectsList, cleanedText);
        
        console.log(`Processed ${cleanedProjects.length} project entries`);
        this.logStats({ projects: cleanedProjects }, 'extracted projects');
        
        return { projects: cleanedProjects };
    }

    async extractProjectsData(cvText) {
        const prompt = `
Extract ALL projects from this CV for ANY profession. This includes professional projects, personal projects, portfolio work, significant accomplishments, and notable work.

Return each project in this EXACT format:
Project Name | Description | Technologies/Tools Used | URL/Link | Type

Rules:
- One project per line
- Use | as separator between fields
- Keep descriptions close to original wording but clean them up slightly
- Technologies/Tools can include software, methods, techniques, equipment used
- URL/Link can be empty if not mentioned
- Type should be: Professional, Personal, Academic, Volunteer, or Other
- Include ANY significant work or projects mentioned
- Works for ALL professions

Examples for different professions:
- Restaurant Menu Redesign | Created new seasonal menu with 15 dishes | Recipe development, cost analysis, food photography | | Professional
- E-commerce Website | Built online store for local business | React, Node.js, Stripe API | github.com/user/store | Personal  
- Student Reading Program | Developed literacy program for 50 students | Curriculum design, assessment tools | | Professional
- Community Garden Project | Organized neighborhood vegetable garden | Project management, fundraising | | Volunteer

CV Text:
${cvText}

Projects (format: Name | Description | Technologies | URL | Type):`;

        const response = await this.generateSimpleText(prompt, 'projects extraction');
        
        if (!response || response.trim().length === 0) {
            throw new Error('No projects data could be extracted from CV');
        }
        
        return this.parseProjectsResponse(response);
    }

    parseProjectsResponse(response) {
        const projects = [];
        const lines = response.split('\n').filter(line => line.trim().length > 0);
        
        lines.forEach((line, index) => {
            // Skip obvious non-project lines
            if (line.includes('Projects (format:') || 
                line.includes('CRITICAL RULES:') ||
                line.length < 10) {
                return;
            }
            
            const parts = line.split('|').map(part => part.trim());
            
            if (parts.length >= 3) {
                const project = {
                    name: this.cleanValue(parts[0]),
                    description: this.cleanValue(parts[1]), // Keep original description
                    technologies: this.parseSkillsList(parts[2] || ''),
                    url: this.cleanValue(parts[3] || ''),
                    type: this.cleanValue(parts[4] || 'Other')
                };
                
                // Validate required fields
                if (project.name && project.description) {
                    projects.push(project);
                    console.log(`Parsed project ${index + 1}: ${project.name}`);
                } else {
                    console.warn(`Skipped invalid project entry: ${line}`);
                }
            }
        });
        
        if (projects.length === 0) {
            throw new Error('No valid project entries could be parsed');
        }
        
        console.log(`Successfully parsed ${projects.length} projects`);
        return projects;
    }

    parseSkillsList(skillsText) {
        if (!skillsText || skillsText.trim().length === 0) {
            return [];
        }
        
        return skillsText
            .split(',')
            .map(skill => this.cleanValue(skill))
            .filter(skill => skill && skill.length > 0);
    }

    async lightlyEnhanceProjects(projectsList, cvText) {
        // Very light enhancement - just clean up formatting and grammar
        // Keep the core content and meaning the same
        const enhancedProjects = [];
        
        for (let i = 0; i < projectsList.length; i++) {
            const project = projectsList[i];
            
            try {
                const enhanced = await this.lightlyEnhanceSingleProject(project);
                enhancedProjects.push(enhanced);
            } catch (error) {
                console.error(`Light enhancement failed for project ${project.name}: ${error.message}`);
                // Keep original project if enhancement fails
                enhancedProjects.push(project);
            }
        }
        
        return enhancedProjects;
    }

    async lightlyEnhanceSingleProject(project) {
        const prompt = `
Lightly improve this project description - fix grammar and make it flow better, but keep the core content and meaning exactly the same.

Project: ${project.name}
Current Description: ${project.description}
Technologies: ${project.technologies.join(', ')}

REQUIREMENTS:
- Fix any grammar or spelling issues
- Make the description flow better
- Keep the same meaning and content
- Don't add information that wasn't there
- Don't make it overly professional if it was casual
- Maximum 2-3 sentences

Return ONLY the improved description, nothing else:`;

        try {
            const response = await this.generateSimpleText(prompt, `light enhancement for ${project.name}`);
            
            const improvedDescription = this.cleanValue(response);
            
            // Validate the response is reasonable
            if (improvedDescription && improvedDescription.length > 10 && improvedDescription.length < 500) {
                return {
                    ...project,
                    description: improvedDescription
                };
            } else {
                throw new Error('Invalid enhanced description');
            }
            
        } catch (error) {
            console.warn(`Light enhancement failed for ${project.name}, keeping original`);
            return project;
        }
    }

    async getFallbackData(existingData = {}) {
        throw new Error('Projects extraction failed - no fallback available');
    }
}

module.exports = ProjectsProcessor;

[END OF FILE: lib\cv-processors\projects-processor.js]

--------------------------------------------------------------------------------
FILE: lib\cv-processors\skills-processor.js
SIZE: 8077 bytes (7.9 KB)
--------------------------------------------------------------------------------
// File: lib/cv-processors/skills-processor.js
const BaseProcessor = require('./base-processor');

class SkillsProcessor extends BaseProcessor {
    constructor() {
        super();
    }

    async processText(cleanedText, existingData = {}) {
        console.log('Extracting and organizing skills...');
        
        // Step 1: Extract all skills from CV
        const extractedSkills = await this.extractAllSkills(cleanedText);
        
        // Step 2: Categorize and organize skills
        const organizedSkills = await this.organizeSkillsIntoCategories(extractedSkills, cleanedText);
        
        // Step 3: Validate and clean the results
        const finalSkills = this.validateAndCleanSkills(organizedSkills);
        
        console.log(`Processed skills: ${finalSkills.technical.length} technical, ${finalSkills.soft.length} soft, ${finalSkills.languages.length} languages`);
        this.logStats({ skills: finalSkills }, 'extracted skills');
        
        return { skills: finalSkills };
    }

    async extractAllSkills(cvText) {
        const prompt = `
Extract ALL skills, abilities, competencies, and qualifications mentioned in this CV for ANY profession.

CV Text:
${cvText}

INSTRUCTIONS:
- Find EVERY skill mentioned for ANY job type (cook, sales, teacher, nurse, engineer, etc.)
- Include professional skills relevant to their field
- Include soft skills (leadership, communication, teamwork, etc.)
- Include technical skills and tools (any software, equipment, systems)
- Include spoken languages
- Include certifications and qualifications
- Include industry-specific skills and knowledge
- Include interpersonal and management abilities
- One skill per line
- Do not categorize yet, just list everything
- Be comprehensive - include obvious and subtle skill mentions
- Work for ANY profession or industry

Examples of skills to look for:
- Cooking: Food preparation, menu planning, kitchen management, food safety
- Sales: Customer service, negotiation, CRM systems, lead generation
- Teaching: Curriculum development, classroom management, student assessment
- Nursing: Patient care, medical procedures, documentation, emergency response
- And ANY other profession mentioned in the CV

All Skills Found:`;

        const response = await this.generateSimpleText(prompt, 'comprehensive skills extraction for any profession');
        
        if (!response || response.trim().length === 0) {
            throw new Error('No skills could be extracted from CV');
        }
        
        return this.parseSkillsList(response);
    }

    parseSkillsList(response) {
        const skills = [];
        const lines = response.split('\n');
        
        lines.forEach(line => {
            const skill = this.cleanValue(line.replace(/^[-•*]\s*/, ''));
            if (skill && skill.length > 1 && skill.length < 50) {
                // Remove duplicates (case insensitive)
                const exists = skills.some(existing => 
                    existing.toLowerCase() === skill.toLowerCase()
                );
                if (!exists) {
                    skills.push(skill);
                }
            }
        });
        
        if (skills.length === 0) {
            throw new Error('No valid skills could be parsed from response');
        }
        
        console.log(`Extracted ${skills.length} total skills`);
        return skills;
    }

    async organizeSkillsIntoCategories(skillsList, cvText) {
        const skillsText = skillsList.join(', ');
        
        const prompt = `
Organize these skills into three categories for ANY profession: Professional/Technical, Interpersonal/Soft Skills, and Languages.

Skills to categorize: ${skillsText}

Context from CV:
${cvText.substring(0, 2000)}

CATEGORIZATION RULES FOR ANY PROFESSION:
- Professional/Technical: Job-specific skills, tools, software, equipment, procedures, certifications, industry knowledge
  Examples: Cooking techniques, sales software, teaching methods, medical procedures, programming, accounting software
- Interpersonal/Soft: Universal workplace skills like communication, leadership, teamwork, problem-solving, time management
  Examples: Leadership, communication, customer service, multitasking, attention to detail, conflict resolution
- Languages: Spoken/written languages like English, Spanish, French, etc.

Return in this EXACT format:
TECHNICAL:
skill1, skill2, skill3

SOFT:
skill1, skill2, skill3

LANGUAGES:
language1, language2

Categories:`;

        const response = await this.generateSimpleText(prompt, 'skills categorization for any profession');
        
        return this.parseSkillsCategories(response);
    }

    parseSkillsCategories(response) {
        const categories = {
            technical: [],
            soft: [],
            languages: []
        };
        
        const lines = response.split('\n').map(line => line.trim());
        let currentCategory = null;
        
        lines.forEach(line => {
            if (line.toUpperCase().startsWith('TECHNICAL:')) {
                currentCategory = 'technical';
                const skills = line.replace(/^TECHNICAL:\s*/i, '');
                if (skills) {
                    this.addSkillsToCategory(categories.technical, skills);
                }
            } else if (line.toUpperCase().startsWith('SOFT:')) {
                currentCategory = 'soft';
                const skills = line.replace(/^SOFT:\s*/i, '');
                if (skills) {
                    this.addSkillsToCategory(categories.soft, skills);
                }
            } else if (line.toUpperCase().startsWith('LANGUAGES:')) {
                currentCategory = 'languages';
                const skills = line.replace(/^LANGUAGES:\s*/i, '');
                if (skills) {
                    this.addSkillsToCategory(categories.languages, skills);
                }
            } else if (currentCategory && line && !line.includes(':')) {
                this.addSkillsToCategory(categories[currentCategory], line);
            }
        });
        
        return categories;
    }

    addSkillsToCategory(categoryArray, skillsText) {
        const skills = skillsText.split(',').map(skill => this.cleanValue(skill));
        
        skills.forEach(skill => {
            if (skill && skill.length > 1 && skill.length < 30) {
                // Check for duplicates (case insensitive)
                const exists = categoryArray.some(existing => 
                    existing.toLowerCase() === skill.toLowerCase()
                );
                if (!exists) {
                    categoryArray.push(skill);
                }
            }
        });
    }

    validateAndCleanSkills(skills) {
        const cleaned = {
            technical: this.cleanSkillsArray(skills.technical || []).slice(0, 15),
            soft: this.cleanSkillsArray(skills.soft || []).slice(0, 10),
            languages: this.cleanSkillsArray(skills.languages || []).slice(0, 5)
        };
        
        // Ensure we have at least some skills
        if (cleaned.technical.length === 0 && cleaned.soft.length === 0) {
            throw new Error('No valid skills categories could be created');
        }
        
        return cleaned;
    }

    cleanSkillsArray(skillsArray) {
        return skillsArray
            .map(skill => this.cleanValue(skill))
            .filter(skill => skill && skill.length > 1 && skill.length < 30)
            .filter((skill, index, array) => 
                // Remove duplicates (case insensitive)
                index === array.findIndex(s => s.toLowerCase() === skill.toLowerCase())
            )
            .sort(); // Sort alphabetically
    }

    async getFallbackData(existingData = {}) {
        throw new Error('Skills extraction failed - no fallback available');
    }
}

module.exports = SkillsProcessor;

[END OF FILE: lib\cv-processors\skills-processor.js]

--------------------------------------------------------------------------------
FILE: lib\utils\gemini-client.js
SIZE: 1695 bytes (1.7 KB)
--------------------------------------------------------------------------------
// File: lib/utils/gemini-client.js
const { GoogleGenerativeAI } = require('@google/generative-ai');
const LLMClientBase = require('./llm-client-base');

class GeminiClient extends LLMClientBase {
    constructor(config = {}) {
        super(config);
        
        if (!process.env.GEMINI_API_KEY) {
            throw new Error('GEMINI_API_KEY environment variable is required');
        }

        this.genAI = new GoogleGenerativeAI(process.env.GEMINI_API_KEY);
        this.model = this.genAI.getGenerativeModel({ 
            model: config.model || "gemini-1.5-flash" 
        });
        
        console.log('Gemini client initialized');
    }

    async _sendRequest(prompt, options = {}) {
        try {
            const result = await this.model.generateContent(prompt);
            const response = await result.response;
            return response.text();
        } catch (error) {
            // Map Gemini-specific errors to common error types
            if (error.message.includes('API_KEY_INVALID')) {
                throw new Error('API_KEY_INVALID');
            } else if (error.message.includes('QUOTA_EXCEEDED')) {
                throw new Error('QUOTA_EXCEEDED');
            } else {
                throw error;
            }
        }
    }

    async _validateConnection() {
        const response = await this.generateSimpleText(
            'Say hello in one word.',
            'Connection test'
        );
        
        if (!response || response.length === 0) {
            throw new Error('Empty response from Gemini');
        }
        
        return response;
    }
}

module.exports = GeminiClient;

[END OF FILE: lib\utils\gemini-client.js]

--------------------------------------------------------------------------------
FILE: lib\utils\llm-client-base.js
SIZE: 7750 bytes (7.6 KB)
--------------------------------------------------------------------------------
// File: lib/utils/llm-client-base.js
// Abstract base class for all LLM clients with common functionality

class LLMClientBase {
    constructor(config = {}) {
        this.config = {
            maxRetries: 3,
            timeout: 30000,
            retryDelay: 1000,
            ...config
        };
        this.clientName = this.constructor.name;
    }

    // Abstract methods that must be implemented by subclasses
    async _sendRequest(prompt, options = {}) {
        throw new Error(`_sendRequest must be implemented by ${this.clientName}`);
    }

    async _validateConnection() {
        throw new Error(`_validateConnection must be implemented by ${this.clientName}`);
    }

    // Common retry logic used by all clients
    async generateText(prompt, options = {}) {
        const {
            maxRetries = this.config.maxRetries,
            timeout = this.config.timeout,
            description = 'AI request'
        } = options;

        console.log(`${this.clientName} - ${description} - sending request...`);
        console.log(`Prompt length: ${prompt.length} characters`);

        for (let attempt = 1; attempt <= maxRetries; attempt++) {
            try {
                const startTime = Date.now();
                const text = await this._sendRequest(prompt, { ...options, timeout });
                const duration = Date.now() - startTime;

                console.log(`${this.clientName} - ${description} - received response (${text.length} chars) in ${duration}ms`);
                return text.trim();

            } catch (error) {
                console.error(`${this.clientName} - ${description} - attempt ${attempt}/${maxRetries} failed:`, error.message);
                
                if (attempt === maxRetries) {
                    throw this._handleError(error, description);
                }
                
                // Wait before retry (exponential backoff)
                await this._delay(this.config.retryDelay * attempt);
            }
        }
    }

    // Common text generation with consistent formatting
    async generateSimpleText(prompt, description = 'Text generation') {
        const enhancedPrompt = this._formatSimpleTextPrompt(prompt);
        return await this.generateText(enhancedPrompt, { description });
    }

    // Common data extraction with consistent formatting
    async extractSimpleData(prompt, description = 'Data extraction') {
        const enhancedPrompt = this._formatDataExtractionPrompt(prompt);
        return await this.generateText(enhancedPrompt, { description });
    }

    // Common JSON extraction with error handling
    async extractJSON(prompt, description = 'JSON extraction') {
        const enhancedPrompt = this._formatJSONPrompt(prompt);
        const response = await this.generateText(enhancedPrompt, { description });
        
        try {
            return this._parseJSONResponse(response);
        } catch (error) {
            console.error(`${this.clientName} - JSON parsing failed:`, error.message);
            throw new Error(`Failed to parse JSON from ${this.clientName}: ${error.message}`);
        }
    }

    // Test connection with standard test
    async testConnection() {
        try {
            console.log(`Testing ${this.clientName} connection...`);
            const result = await this._validateConnection();
            console.log(`${this.clientName} connection test successful`);
            return result;
        } catch (error) {
            console.error(`${this.clientName} connection test failed:`, error.message);
            throw error;
        }
    }

    // Protected helper methods
    _formatSimpleTextPrompt(prompt) {
        return `${prompt}

IMPORTANT RULES:
- Return ONLY the requested text
- No markdown formatting
- No explanations or extra text
- No quotes around the response
- Keep response concise and professional
`;
    }

    _formatDataExtractionPrompt(prompt) {
        return `${prompt}

CRITICAL INSTRUCTIONS:
- Return ONLY the requested information
- Use simple format: field=value
- One line per field
- No extra text or explanations
- If field not found, write: field=
`;
    }

    _formatJSONPrompt(prompt) {
        return `${prompt}

CRITICAL JSON FORMATTING RULES:
- Return ONLY valid JSON (no markdown, no explanations)
- Escape ALL special characters in strings (\\n, \\", \\t, etc.)
- Use \\n for line breaks in descriptions
- NO trailing commas
- Start with { and end with }
`;
    }

    _parseJSONResponse(response) {
        let cleanedText = response.trim();
        
        // Remove markdown code blocks if present
        if (cleanedText.startsWith('```json')) {
            cleanedText = cleanedText.replace(/^```json\s*/, '').replace(/\s*```$/, '');
        } else if (cleanedText.startsWith('```')) {
            cleanedText = cleanedText.replace(/^```\s*/, '').replace(/\s*```$/, '');
        }
        
        cleanedText = cleanedText.trim();
        
        // Fix common JSON issues
        cleanedText = this._sanitizeJSONResponse(cleanedText);
        
        return JSON.parse(cleanedText);
    }

    _sanitizeJSONResponse(jsonString) {
        let fixed = jsonString;
        
        // Replace problematic characters in strings
        fixed = fixed.replace(/\n/g, '\\n');
        fixed = fixed.replace(/\r/g, '\\r');
        fixed = fixed.replace(/\t/g, '\\t');
        fixed = fixed.replace(/\\/g, '\\\\');
        fixed = fixed.replace(/\\\\n/g, '\\n');
        fixed = fixed.replace(/\\\\r/g, '\\r');
        fixed = fixed.replace(/\\\\t/g, '\\t');
        
        // Remove or replace problematic Unicode characters
        fixed = fixed.replace(/•/g, '\\u2022');
        fixed = fixed.replace(/–/g, '\\u2013');
        fixed = fixed.replace(/—/g, '\\u2014');
        fixed = fixed.replace(/'/g, "\\'");
        fixed = fixed.replace(/'/g, "\\'");
        fixed = fixed.replace(/"/g, '\\"');
        fixed = fixed.replace(/"/g, '\\"');
        
        // Remove trailing commas
        fixed = fixed.replace(/,(\s*[}\]])/g, '$1');
        
        return fixed;
    }

    _handleError(error, description) {
        // Common error handling for all clients
        if (error.message.includes('API_KEY_INVALID') || error.message.includes('unauthorized')) {
            return new Error(`Invalid API key for ${this.clientName}. Please check your configuration.`);
        } else if (error.message.includes('QUOTA_EXCEEDED') || error.message.includes('rate limit')) {
            return new Error(`${this.clientName} API quota exceeded. Please check your usage limits.`);
        } else if (error.message.includes('timeout')) {
            return new Error(`${this.clientName} request timeout. Please try again.`);
        } else {
            return new Error(`${description} failed with ${this.clientName}: ${error.message}`);
        }
    }

    _delay(ms) {
        return new Promise(resolve => setTimeout(resolve, ms));
    }

    // Static factory method for creating clients
    static createClient(type, config = {}) {
        const clientMap = {
            'gemini': () => new (require('./gemini-client'))(config),
            'ollama': () => new (require('./ollama-client'))(config)
        };

        const createClientFn = clientMap[type.toLowerCase()];
        if (!createClientFn) {
            throw new Error(`Unsupported LLM client type: ${type}. Supported types: ${Object.keys(clientMap).join(', ')}`);
        }

        return createClientFn();
    }
}

module.exports = LLMClientBase;

[END OF FILE: lib\utils\llm-client-base.js]

--------------------------------------------------------------------------------
FILE: lib\utils\llm-client-factory.js
SIZE: 3458 bytes (3.4 KB)
--------------------------------------------------------------------------------
// File: lib/utils/llm-client-factory.js
// Factory for creating and configuring LLM clients

const LLMClientBase = require('./llm-client-base');

class LLMClientFactory {
    static createClient(config = {}) {
        // Get client type from config, environment, or default
        const clientType = config.type || process.env.LLM_CLIENT_TYPE || 'gemini';
        
        console.log(`Creating LLM client: ${clientType}`);
        
        try {
            switch (clientType.toLowerCase()) {
                case 'gemini':
                    const GeminiClient = require('./gemini-client');
                    return new GeminiClient(config);
                    
                case 'ollama':
                    const OllamaClient = require('./ollama-client');
                    return new OllamaClient(config);
                    
                default:
                    throw new Error(`Unsupported LLM client type: ${clientType}`);
            }
        } catch (error) {
            console.error(`Failed to create ${clientType} client:`, error.message);
            throw error;
        }
    }

    static async createAndTestClient(config = {}) {
        const client = this.createClient(config);
        
        try {
            await client.testConnection();
            console.log(`${client.clientName} client ready for use`);
            return client;
        } catch (error) {
            console.error(`${client.clientName} client test failed:`, error.message);
            throw error;
        }
    }

    static getAvailableClients() {
        return ['gemini', 'ollama'];
    }

    static getClientRequirements() {
        return {
            gemini: {
                envVars: ['GEMINI_API_KEY'],
                description: 'Google Gemini API client',
                setup: 'Set GEMINI_API_KEY environment variable'
            },
            ollama: {
                envVars: ['OLLAMA_BASE_URL', 'OLLAMA_MODEL'],
                description: 'Local Ollama client',
                setup: 'Install and run Ollama locally, set OLLAMA_BASE_URL and OLLAMA_MODEL if needed'
            }
        };
    }

    static validateConfiguration(clientType) {
        const requirements = this.getClientRequirements();
        const clientReqs = requirements[clientType.toLowerCase()];
        
        if (!clientReqs) {
            throw new Error(`Unknown client type: ${clientType}`);
        }

        const missing = [];
        const optional = [];

        switch (clientType.toLowerCase()) {
            case 'gemini':
                if (!process.env.GEMINI_API_KEY) {
                    missing.push('GEMINI_API_KEY');
                }
                break;
                
            case 'ollama':
                // OLLAMA_BASE_URL and OLLAMA_MODEL are optional (have defaults)
                if (!process.env.OLLAMA_BASE_URL) {
                    optional.push('OLLAMA_BASE_URL (defaults to http://localhost:11434)');
                }
                if (!process.env.OLLAMA_MODEL) {
                    optional.push('OLLAMA_MODEL (defaults to llama2)');
                }
                break;
        }

        return {
            valid: missing.length === 0,
            missing,
            optional,
            setup: clientReqs.setup
        };
    }
}

module.exports = LLMClientFactory;

[END OF FILE: lib\utils\llm-client-factory.js]

--------------------------------------------------------------------------------
FILE: lib\utils\ollama-client.js
SIZE: 7374 bytes (7.2 KB)
--------------------------------------------------------------------------------
// File: lib/utils/ollama-client.js
const https = require('https');
const http = require('http');
const LLMClientBase = require('./llm-client-base');

class OllamaClient extends LLMClientBase {
    constructor(config = {}) {
        super(config);
        
        this.baseUrl = config.baseUrl || process.env.OLLAMA_BASE_URL || 'http://localhost:11434';
        this.model = config.model || process.env.OLLAMA_MODEL || 'llama2';
        this.temperature = config.temperature || 0.7;
        
        console.log(`Ollama client initialized - URL: ${this.baseUrl}, Model: ${this.model}`);
    }

    async _sendRequest(prompt, options = {}) {
        const requestData = {
            model: this.model,
            prompt: prompt,
            temperature: options.temperature || this.temperature,
            stream: false
        };

        return new Promise((resolve, reject) => {
            const url = new URL('/api/generate', this.baseUrl);
            const isHttps = url.protocol === 'https:';
            const httpModule = isHttps ? https : http;
            
            const requestOptions = {
                hostname: url.hostname,
                port: url.port || (isHttps ? 443 : 80),
                path: url.pathname,
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Content-Length': Buffer.byteLength(JSON.stringify(requestData))
                },
                timeout: options.timeout || this.config.timeout
            };

            const req = httpModule.request(requestOptions, (res) => {
                let data = '';
                
                res.on('data', (chunk) => {
                    data += chunk;
                });
                
                res.on('end', () => {
                    try {
                        const response = JSON.parse(data);
                        
                        if (res.statusCode !== 200) {
                            reject(new Error(`Ollama API error: ${response.error || 'Unknown error'}`));
                            return;
                        }
                        
                        if (response.error) {
                            reject(new Error(`Ollama error: ${response.error}`));
                            return;
                        }
                        
                        resolve(response.response || '');
                    } catch (error) {
                        reject(new Error(`Failed to parse Ollama response: ${error.message}`));
                    }
                });
            });

            req.on('error', (error) => {
                if (error.code === 'ECONNREFUSED') {
                    reject(new Error('Cannot connect to Ollama. Make sure Ollama is running.'));
                } else if (error.code === 'TIMEOUT') {
                    reject(new Error('timeout'));
                } else {
                    reject(error);
                }
            });

            req.on('timeout', () => {
                req.destroy();
                reject(new Error('timeout'));
            });

            req.write(JSON.stringify(requestData));
            req.end();
        });
    }

    async _validateConnection() {
        try {
            // First check if Ollama is running
            await this._checkOllamaStatus();
            
            // Then test with a simple prompt
            const response = await this.generateSimpleText(
                'Say hello in one word.',
                'Connection test'
            );
            
            if (!response || response.length === 0) {
                throw new Error('Empty response from Ollama');
            }
            
            return response;
        } catch (error) {
            if (error.message.includes('Cannot connect to Ollama')) {
                throw new Error('Ollama server is not running. Please start Ollama first.');
            }
            throw error;
        }
    }

    async _checkOllamaStatus() {
        return new Promise((resolve, reject) => {
            const url = new URL('/api/tags', this.baseUrl);
            const isHttps = url.protocol === 'https:';
            const httpModule = isHttps ? https : http;
            
            const requestOptions = {
                hostname: url.hostname,
                port: url.port || (isHttps ? 443 : 80),
                path: url.pathname,
                method: 'GET',
                timeout: 5000
            };

            const req = httpModule.request(requestOptions, (res) => {
                let data = '';
                
                res.on('data', (chunk) => {
                    data += chunk;
                });
                
                res.on('end', () => {
                    try {
                        const response = JSON.parse(data);
                        
                        if (res.statusCode === 200) {
                            // Check if our model exists
                            const models = response.models || [];
                            const modelExists = models.some(m => m.name === this.model || m.name.startsWith(this.model + ':'));
                            
                            if (!modelExists) {
                                console.warn(`Warning: Model ${this.model} not found. Available models:`, models.map(m => m.name));
                                console.warn(`You may need to run: ollama pull ${this.model}`);
                            }
                            
                            resolve(response);
                        } else {
                            reject(new Error(`Ollama status check failed: ${res.statusCode}`));
                        }
                    } catch (error) {
                        reject(new Error(`Failed to parse Ollama status response: ${error.message}`));
                    }
                });
            });

            req.on('error', (error) => {
                if (error.code === 'ECONNREFUSED') {
                    reject(new Error('Cannot connect to Ollama'));
                } else {
                    reject(error);
                }
            });

            req.on('timeout', () => {
                req.destroy();
                reject(new Error('Ollama status check timeout'));
            });

            req.end();
        });
    }

    // Ollama-specific method to list available models
    async listModels() {
        try {
            await this._checkOllamaStatus();
            const url = new URL('/api/tags', this.baseUrl);
            // Implementation would make HTTP request to get models
            console.log(`Available models can be listed at: ${url.toString()}`);
        } catch (error) {
            throw new Error(`Failed to list models: ${error.message}`);
        }
    }

    // Ollama-specific method to pull a model
    async pullModel(modelName) {
        console.log(`To pull model ${modelName}, run: ollama pull ${modelName}`);
        console.log('This needs to be done from the command line.');
    }
}

module.exports = OllamaClient;

[END OF FILE: lib\utils\ollama-client.js]

--------------------------------------------------------------------------------
FILE: lib\utils\text-cleaner.js
SIZE: 6426 bytes (6.3 KB)
--------------------------------------------------------------------------------
// File: lib/utils/text-cleaner.js

class TextCleaner {
    
    static cleanExtractedText(text) {
        if (!text || typeof text !== 'string') {
            return '';
        }

        let cleaned = text;

        // Remove excessive whitespace
        cleaned = cleaned.replace(/\s+/g, ' ');
        
        // Remove page breaks and form feeds
        cleaned = cleaned.replace(/\f/g, '\n');
        
        // Normalize line breaks
        cleaned = cleaned.replace(/\r\n/g, '\n');
        cleaned = cleaned.replace(/\r/g, '\n');
        
        // Remove excessive line breaks (more than 2 consecutive)
        cleaned = cleaned.replace(/\n{3,}/g, '\n\n');
        
        // Clean up bullet points and formatting
        cleaned = cleaned.replace(/[•▪▫‣⁃]/g, '- ');
        cleaned = cleaned.replace(/[→←↑↓]/g, ' ');
        
        // Remove weird characters that cause issues
        cleaned = cleaned.replace(/[\u200B-\u200D\uFEFF]/g, ''); // Zero-width spaces
        cleaned = cleaned.replace(/[^\x00-\x7F\u00A0-\u024F\u1E00-\u1EFF]/g, ' '); // Keep basic Latin + extensions
        
        // Trim and normalize
        cleaned = cleaned.trim();
        
        console.log(`📝 Text cleaned: ${text.length} → ${cleaned.length} characters`);
        return cleaned;
    }

    static extractContactInfo(text) {
        const contactInfo = {
            emails: [],
            phones: [],
            locations: []
        };

        // Extract emails
        const emailRegex = /\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/g;
        const emails = text.match(emailRegex) || [];
        contactInfo.emails = [...new Set(emails)]; // Remove duplicates

        // Extract phone numbers (various formats)
        const phoneRegex = /(?:\+?1[-.\s]?)?\(?[0-9]{3}\)?[-.\s]?[0-9]{3}[-.\s]?[0-9]{4}|\+?[0-9]{1,4}[-.\s]?[0-9]{2,3}[-.\s]?[0-9]{3,4}[-.\s]?[0-9]{3,4}/g;
        const phones = text.match(phoneRegex) || [];
        contactInfo.phones = [...new Set(phones)];

        // Extract potential locations (basic patterns)
        const locationKeywords = ['address', 'location', 'city', 'state', 'country'];
        const lines = text.split('\n');
        
        lines.forEach(line => {
            const lowerLine = line.toLowerCase();
            if (locationKeywords.some(keyword => lowerLine.includes(keyword))) {
                // Clean up the line and add if it looks like location info
                const cleanLocation = line.replace(/^(address|location|city|state|country)[\s:]*/, '').trim();
                if (cleanLocation.length > 3 && cleanLocation.length < 100) {
                    contactInfo.locations.push(cleanLocation);
                }
            }
        });

        console.log('📍 Contact info extracted:', {
            emails: contactInfo.emails.length,
            phones: contactInfo.phones.length,
            locations: contactInfo.locations.length
        });

        return contactInfo;
    }

    static extractNameCandidates(text) {
        const candidates = [];
        const lines = text.split('\n');
        
        // Look for name patterns in the first few lines
        for (let i = 0; i < Math.min(10, lines.length); i++) {
            const line = lines[i].trim();
            
            // Skip if too short or too long
            if (line.length < 3 || line.length > 50) continue;
            
            // Skip if contains numbers or special chars (likely not a name)
            if (/[0-9@#$%^&*()+=\[\]{}|\\:";'<>?,./]/.test(line)) continue;
            
            // Skip common CV headers
            const skipWords = ['resume', 'curriculum', 'vitae', 'cv', 'profile', 'summary', 'experience', 'education', 'skills'];
            if (skipWords.some(word => line.toLowerCase().includes(word))) continue;
            
            // Check if it looks like a name (2-4 words, proper case)
            const words = line.split(/\s+/);
            if (words.length >= 2 && words.length <= 4) {
                if (words.every(word => /^[A-Za-z][a-z]*$/.test(word) && word.length > 1)) {
                    candidates.push(line);
                }
            }
        }

        console.log(`👤 Name candidates found: ${candidates.length}`);
        return candidates;
    }

    static limitTextLength(text, maxLength = 25000) {
        if (!text || text.length <= maxLength) {
            return text;
        }

        // Try to cut at a sentence or paragraph boundary
        const truncated = text.substring(0, maxLength);
        const lastPeriod = truncated.lastIndexOf('.');
        const lastNewline = truncated.lastIndexOf('\n');
        
        const cutPoint = Math.max(lastPeriod, lastNewline);
        
        if (cutPoint > maxLength * 0.8) {
            return truncated.substring(0, cutPoint + 1) + '\n\n[Content truncated due to length]';
        }
        
        return truncated + '\n\n[Content truncated due to length]';
    }

    static removeCommonHeaders(text) {
        const lines = text.split('\n');
        const cleanedLines = [];
        
        const skipPatterns = [
            /^(page \d+ of \d+|page \d+)$/i,
            /^(curriculum vitae|resume|cv)$/i,
            /^(personal information|contact information)$/i,
            /^(confidential|private)$/i,
        ];

        lines.forEach(line => {
            const trimmed = line.trim();
            
            // Skip empty lines at the beginning
            if (cleanedLines.length === 0 && !trimmed) {
                return;
            }
            
            // Skip lines that match common headers
            if (!skipPatterns.some(pattern => pattern.test(trimmed))) {
                cleanedLines.push(line);
            }
        });

        return cleanedLines.join('\n');
    }

    static prepareForAI(text) {
        // Full cleaning pipeline for AI processing
        let prepared = text;
        
        prepared = this.cleanExtractedText(prepared);
        prepared = this.removeCommonHeaders(prepared);
        prepared = this.limitTextLength(prepared);
        
        console.log(`🤖 Text prepared for AI: ${prepared.length} characters`);
        return prepared;
    }
}

module.exports = TextCleaner;

[END OF FILE: lib\utils\text-cleaner.js]

=====================================
DIRECTORY: database
PATH: C:\Coding\cv-landing-generator\database
=====================================

========================================
COLLECTION SUMMARY
========================================
Total Files Processed: 83
Generated: 07/24/2025 17:22:38
Processing Time: 00:00:17.9428984
